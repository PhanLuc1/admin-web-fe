{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"rowKey\", \"dragSortKey\", \"dragSortHandlerRender\", \"onDragSortEnd\", \"onDataSourceChange\", \"defaultData\", \"dataSource\", \"onLoad\"],\n  _excluded2 = [\"rowData\", \"index\", \"className\"];\nimport { HolderOutlined } from '@ant-design/icons';\nimport { ConfigProvider } from 'antd';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport React, { useContext, useMemo } from 'react';\nimport ProTable from \"../../Table\";\nimport { useDragSort } from \"../../utils/useDragSort\";\nimport { useStyle } from \"./style\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction DragSortTable(props) {\n  var _otherProps$columns;\n  var rowKey = props.rowKey,\n    dragSortKey = props.dragSortKey,\n    dragSortHandlerRender = props.dragSortHandlerRender,\n    onDragSortEnd = props.onDragSortEnd,\n    onDataSourceChange = props.onDataSourceChange,\n    defaultData = props.defaultData,\n    originDataSource = props.dataSource,\n    onLoad = props.onLoad,\n    otherProps = _objectWithoutProperties(props, _excluded);\n  var _useContext = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls;\n  var _useMergedState = useMergedState(function () {\n      return defaultData || [];\n    }, {\n      value: originDataSource,\n      onChange: onDataSourceChange\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    dataSource = _useMergedState2[0],\n    setDataSource = _useMergedState2[1];\n  var _useStyle = useStyle(getPrefixCls('pro-table-drag')),\n    wrapSSR = _useStyle.wrapSSR,\n    hashId = _useStyle.hashId;\n\n  // 默认拖拽把手\n  var DragHandle = useMemo(function () {\n    return function (dragHandleProps) {\n      var rowData = dragHandleProps.rowData,\n        index = dragHandleProps.index,\n        className = dragHandleProps.className,\n        rest = _objectWithoutProperties(dragHandleProps, _excluded2);\n      var defaultDom = /*#__PURE__*/_jsx(HolderOutlined, _objectSpread(_objectSpread({}, rest), {}, {\n        className: \"\".concat(getPrefixCls('pro-table-drag-icon'), \" \").concat(className || '', \" \").concat(hashId || '').trim()\n      }));\n      var handel = dragSortHandlerRender ? dragSortHandlerRender(dragHandleProps === null || dragHandleProps === void 0 ? void 0 : dragHandleProps.rowData, dragHandleProps === null || dragHandleProps === void 0 ? void 0 : dragHandleProps.index) : defaultDom;\n      return /*#__PURE__*/_jsx(\"div\", _objectSpread(_objectSpread({}, rest), {}, {\n        children: handel\n      }));\n    };\n  }, [getPrefixCls]);\n\n  // 使用自定义hooks获取拖拽相关组件的components集合\n  var _useDragSort = useDragSort({\n      dataSource: dataSource === null || dataSource === void 0 ? void 0 : dataSource.slice(),\n      dragSortKey: dragSortKey,\n      onDragSortEnd: onDragSortEnd,\n      components: props.components,\n      rowKey: rowKey,\n      DragHandle: DragHandle\n    }),\n    components = _useDragSort.components,\n    DndContext = _useDragSort.DndContext;\n  var wrapOnload = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(ds) {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            setDataSource(ds);\n            return _context.abrupt(\"return\", onLoad === null || onLoad === void 0 ? void 0 : onLoad(ds));\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function wrapOnload(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return wrapSSR(/*#__PURE__*/_jsx(ProTable, _objectSpread(_objectSpread({}, otherProps), {}, {\n    columns: (_otherProps$columns = otherProps.columns) === null || _otherProps$columns === void 0 ? void 0 : _otherProps$columns.map(function (item) {\n      if (item.dataIndex == dragSortKey || item.key === dragSortKey) {\n        if (!item.render) {\n          item.render = function () {\n            return null;\n          };\n        }\n      }\n      return item;\n    }),\n    onLoad: wrapOnload,\n    rowKey: rowKey,\n    tableViewRender: function tableViewRender(_, defaultDom) {\n      return /*#__PURE__*/_jsx(DndContext, {\n        children: defaultDom\n      });\n    },\n    dataSource: dataSource,\n    components: components,\n    onDataSourceChange: onDataSourceChange\n  })));\n}\nexport default DragSortTable;","map":{"version":3,"names":["_regeneratorRuntime","_asyncToGenerator","_objectSpread","_slicedToArray","_objectWithoutProperties","_excluded","_excluded2","HolderOutlined","ConfigProvider","useMergedState","React","useContext","useMemo","ProTable","useDragSort","useStyle","jsx","_jsx","DragSortTable","props","_otherProps$columns","rowKey","dragSortKey","dragSortHandlerRender","onDragSortEnd","onDataSourceChange","defaultData","originDataSource","dataSource","onLoad","otherProps","_useContext","ConfigContext","getPrefixCls","_useMergedState","value","onChange","_useMergedState2","setDataSource","_useStyle","wrapSSR","hashId","DragHandle","dragHandleProps","rowData","index","className","rest","defaultDom","concat","trim","handel","children","_useDragSort","slice","components","DndContext","wrapOnload","_ref","mark","_callee","ds","wrap","_callee$","_context","prev","next","abrupt","stop","_x","apply","arguments","columns","map","item","dataIndex","key","render","tableViewRender","_"],"sources":["/Users/phanluc/admin-web-fe/node_modules/@ant-design/pro-table/es/components/DragSortTable/index.js"],"sourcesContent":["import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"rowKey\", \"dragSortKey\", \"dragSortHandlerRender\", \"onDragSortEnd\", \"onDataSourceChange\", \"defaultData\", \"dataSource\", \"onLoad\"],\n  _excluded2 = [\"rowData\", \"index\", \"className\"];\nimport { HolderOutlined } from '@ant-design/icons';\nimport { ConfigProvider } from 'antd';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport React, { useContext, useMemo } from 'react';\nimport ProTable from \"../../Table\";\nimport { useDragSort } from \"../../utils/useDragSort\";\nimport { useStyle } from \"./style\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction DragSortTable(props) {\n  var _otherProps$columns;\n  var rowKey = props.rowKey,\n    dragSortKey = props.dragSortKey,\n    dragSortHandlerRender = props.dragSortHandlerRender,\n    onDragSortEnd = props.onDragSortEnd,\n    onDataSourceChange = props.onDataSourceChange,\n    defaultData = props.defaultData,\n    originDataSource = props.dataSource,\n    onLoad = props.onLoad,\n    otherProps = _objectWithoutProperties(props, _excluded);\n  var _useContext = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls;\n  var _useMergedState = useMergedState(function () {\n      return defaultData || [];\n    }, {\n      value: originDataSource,\n      onChange: onDataSourceChange\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    dataSource = _useMergedState2[0],\n    setDataSource = _useMergedState2[1];\n  var _useStyle = useStyle(getPrefixCls('pro-table-drag')),\n    wrapSSR = _useStyle.wrapSSR,\n    hashId = _useStyle.hashId;\n\n  // 默认拖拽把手\n  var DragHandle = useMemo(function () {\n    return function (dragHandleProps) {\n      var rowData = dragHandleProps.rowData,\n        index = dragHandleProps.index,\n        className = dragHandleProps.className,\n        rest = _objectWithoutProperties(dragHandleProps, _excluded2);\n      var defaultDom = /*#__PURE__*/_jsx(HolderOutlined, _objectSpread(_objectSpread({}, rest), {}, {\n        className: \"\".concat(getPrefixCls('pro-table-drag-icon'), \" \").concat(className || '', \" \").concat(hashId || '').trim()\n      }));\n      var handel = dragSortHandlerRender ? dragSortHandlerRender(dragHandleProps === null || dragHandleProps === void 0 ? void 0 : dragHandleProps.rowData, dragHandleProps === null || dragHandleProps === void 0 ? void 0 : dragHandleProps.index) : defaultDom;\n      return /*#__PURE__*/_jsx(\"div\", _objectSpread(_objectSpread({}, rest), {}, {\n        children: handel\n      }));\n    };\n  }, [getPrefixCls]);\n\n  // 使用自定义hooks获取拖拽相关组件的components集合\n  var _useDragSort = useDragSort({\n      dataSource: dataSource === null || dataSource === void 0 ? void 0 : dataSource.slice(),\n      dragSortKey: dragSortKey,\n      onDragSortEnd: onDragSortEnd,\n      components: props.components,\n      rowKey: rowKey,\n      DragHandle: DragHandle\n    }),\n    components = _useDragSort.components,\n    DndContext = _useDragSort.DndContext;\n  var wrapOnload = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(ds) {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            setDataSource(ds);\n            return _context.abrupt(\"return\", onLoad === null || onLoad === void 0 ? void 0 : onLoad(ds));\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function wrapOnload(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return wrapSSR( /*#__PURE__*/_jsx(ProTable, _objectSpread(_objectSpread({}, otherProps), {}, {\n    columns: (_otherProps$columns = otherProps.columns) === null || _otherProps$columns === void 0 ? void 0 : _otherProps$columns.map(function (item) {\n      if (item.dataIndex == dragSortKey || item.key === dragSortKey) {\n        if (!item.render) {\n          item.render = function () {\n            return null;\n          };\n        }\n      }\n      return item;\n    }),\n    onLoad: wrapOnload,\n    rowKey: rowKey,\n    tableViewRender: function tableViewRender(_, defaultDom) {\n      return /*#__PURE__*/_jsx(DndContext, {\n        children: defaultDom\n      });\n    },\n    dataSource: dataSource,\n    components: components,\n    onDataSourceChange: onDataSourceChange\n  })));\n}\nexport default DragSortTable;"],"mappings":"AAAA,OAAOA,mBAAmB,MAAM,+CAA+C;AAC/E,OAAOC,iBAAiB,MAAM,6CAA6C;AAC3E,OAAOC,aAAa,MAAM,0CAA0C;AACpE,OAAOC,cAAc,MAAM,0CAA0C;AACrE,OAAOC,wBAAwB,MAAM,oDAAoD;AACzF,IAAIC,SAAS,GAAG,CAAC,QAAQ,EAAE,aAAa,EAAE,uBAAuB,EAAE,eAAe,EAAE,oBAAoB,EAAE,aAAa,EAAE,YAAY,EAAE,QAAQ,CAAC;EAC9IC,UAAU,GAAG,CAAC,SAAS,EAAE,OAAO,EAAE,WAAW,CAAC;AAChD,SAASC,cAAc,QAAQ,mBAAmB;AAClD,SAASC,cAAc,QAAQ,MAAM;AACrC,OAAOC,cAAc,MAAM,iCAAiC;AAC5D,OAAOC,KAAK,IAAIC,UAAU,EAAEC,OAAO,QAAQ,OAAO;AAClD,OAAOC,QAAQ,MAAM,aAAa;AAClC,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,QAAQ,QAAQ,SAAS;AAClC,SAASC,GAAG,IAAIC,IAAI,QAAQ,mBAAmB;AAC/C,SAASC,aAAaA,CAACC,KAAK,EAAE;EAC5B,IAAIC,mBAAmB;EACvB,IAAIC,MAAM,GAAGF,KAAK,CAACE,MAAM;IACvBC,WAAW,GAAGH,KAAK,CAACG,WAAW;IAC/BC,qBAAqB,GAAGJ,KAAK,CAACI,qBAAqB;IACnDC,aAAa,GAAGL,KAAK,CAACK,aAAa;IACnCC,kBAAkB,GAAGN,KAAK,CAACM,kBAAkB;IAC7CC,WAAW,GAAGP,KAAK,CAACO,WAAW;IAC/BC,gBAAgB,GAAGR,KAAK,CAACS,UAAU;IACnCC,MAAM,GAAGV,KAAK,CAACU,MAAM;IACrBC,UAAU,GAAG1B,wBAAwB,CAACe,KAAK,EAAEd,SAAS,CAAC;EACzD,IAAI0B,WAAW,GAAGpB,UAAU,CAACH,cAAc,CAACwB,aAAa,CAAC;IACxDC,YAAY,GAAGF,WAAW,CAACE,YAAY;EACzC,IAAIC,eAAe,GAAGzB,cAAc,CAAC,YAAY;MAC7C,OAAOiB,WAAW,IAAI,EAAE;IAC1B,CAAC,EAAE;MACDS,KAAK,EAAER,gBAAgB;MACvBS,QAAQ,EAAEX;IACZ,CAAC,CAAC;IACFY,gBAAgB,GAAGlC,cAAc,CAAC+B,eAAe,EAAE,CAAC,CAAC;IACrDN,UAAU,GAAGS,gBAAgB,CAAC,CAAC,CAAC;IAChCC,aAAa,GAAGD,gBAAgB,CAAC,CAAC,CAAC;EACrC,IAAIE,SAAS,GAAGxB,QAAQ,CAACkB,YAAY,CAAC,gBAAgB,CAAC,CAAC;IACtDO,OAAO,GAAGD,SAAS,CAACC,OAAO;IAC3BC,MAAM,GAAGF,SAAS,CAACE,MAAM;;EAE3B;EACA,IAAIC,UAAU,GAAG9B,OAAO,CAAC,YAAY;IACnC,OAAO,UAAU+B,eAAe,EAAE;MAChC,IAAIC,OAAO,GAAGD,eAAe,CAACC,OAAO;QACnCC,KAAK,GAAGF,eAAe,CAACE,KAAK;QAC7BC,SAAS,GAAGH,eAAe,CAACG,SAAS;QACrCC,IAAI,GAAG3C,wBAAwB,CAACuC,eAAe,EAAErC,UAAU,CAAC;MAC9D,IAAI0C,UAAU,GAAG,aAAa/B,IAAI,CAACV,cAAc,EAAEL,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE6C,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE;QAC5FD,SAAS,EAAE,EAAE,CAACG,MAAM,CAAChB,YAAY,CAAC,qBAAqB,CAAC,EAAE,GAAG,CAAC,CAACgB,MAAM,CAACH,SAAS,IAAI,EAAE,EAAE,GAAG,CAAC,CAACG,MAAM,CAACR,MAAM,IAAI,EAAE,CAAC,CAACS,IAAI,CAAC;MACxH,CAAC,CAAC,CAAC;MACH,IAAIC,MAAM,GAAG5B,qBAAqB,GAAGA,qBAAqB,CAACoB,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,eAAe,CAACC,OAAO,EAAED,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,eAAe,CAACE,KAAK,CAAC,GAAGG,UAAU;MAC3P,OAAO,aAAa/B,IAAI,CAAC,KAAK,EAAEf,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE6C,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE;QACzEK,QAAQ,EAAED;MACZ,CAAC,CAAC,CAAC;IACL,CAAC;EACH,CAAC,EAAE,CAAClB,YAAY,CAAC,CAAC;;EAElB;EACA,IAAIoB,YAAY,GAAGvC,WAAW,CAAC;MAC3Bc,UAAU,EAAEA,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAAC0B,KAAK,CAAC,CAAC;MACtFhC,WAAW,EAAEA,WAAW;MACxBE,aAAa,EAAEA,aAAa;MAC5B+B,UAAU,EAAEpC,KAAK,CAACoC,UAAU;MAC5BlC,MAAM,EAAEA,MAAM;MACdqB,UAAU,EAAEA;IACd,CAAC,CAAC;IACFa,UAAU,GAAGF,YAAY,CAACE,UAAU;IACpCC,UAAU,GAAGH,YAAY,CAACG,UAAU;EACtC,IAAIC,UAAU,GAAG,aAAa,YAAY;IACxC,IAAIC,IAAI,GAAGzD,iBAAiB,CAAE,aAAaD,mBAAmB,CAAC,CAAC,CAAC2D,IAAI,CAAC,SAASC,OAAOA,CAACC,EAAE,EAAE;MACzF,OAAO7D,mBAAmB,CAAC,CAAC,CAAC8D,IAAI,CAAC,SAASC,QAAQA,CAACC,QAAQ,EAAE;QAC5D,OAAO,CAAC,EAAE,QAAQA,QAAQ,CAACC,IAAI,GAAGD,QAAQ,CAACE,IAAI;UAC7C,KAAK,CAAC;YACJ5B,aAAa,CAACuB,EAAE,CAAC;YACjB,OAAOG,QAAQ,CAACG,MAAM,CAAC,QAAQ,EAAEtC,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACgC,EAAE,CAAC,CAAC;UAC9F,KAAK,CAAC;UACN,KAAK,KAAK;YACR,OAAOG,QAAQ,CAACI,IAAI,CAAC,CAAC;QAC1B;MACF,CAAC,EAAER,OAAO,CAAC;IACb,CAAC,CAAC,CAAC;IACH,OAAO,SAASH,UAAUA,CAACY,EAAE,EAAE;MAC7B,OAAOX,IAAI,CAACY,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IACpC,CAAC;EACH,CAAC,CAAC,CAAC;EACH,OAAO/B,OAAO,CAAE,aAAavB,IAAI,CAACJ,QAAQ,EAAEX,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE4B,UAAU,CAAC,EAAE,CAAC,CAAC,EAAE;IAC3F0C,OAAO,EAAE,CAACpD,mBAAmB,GAAGU,UAAU,CAAC0C,OAAO,MAAM,IAAI,IAAIpD,mBAAmB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,mBAAmB,CAACqD,GAAG,CAAC,UAAUC,IAAI,EAAE;MAChJ,IAAIA,IAAI,CAACC,SAAS,IAAIrD,WAAW,IAAIoD,IAAI,CAACE,GAAG,KAAKtD,WAAW,EAAE;QAC7D,IAAI,CAACoD,IAAI,CAACG,MAAM,EAAE;UAChBH,IAAI,CAACG,MAAM,GAAG,YAAY;YACxB,OAAO,IAAI;UACb,CAAC;QACH;MACF;MACA,OAAOH,IAAI;IACb,CAAC,CAAC;IACF7C,MAAM,EAAE4B,UAAU;IAClBpC,MAAM,EAAEA,MAAM;IACdyD,eAAe,EAAE,SAASA,eAAeA,CAACC,CAAC,EAAE/B,UAAU,EAAE;MACvD,OAAO,aAAa/B,IAAI,CAACuC,UAAU,EAAE;QACnCJ,QAAQ,EAAEJ;MACZ,CAAC,CAAC;IACJ,CAAC;IACDpB,UAAU,EAAEA,UAAU;IACtB2B,UAAU,EAAEA,UAAU;IACtB9B,kBAAkB,EAAEA;EACtB,CAAC,CAAC,CAAC,CAAC;AACN;AACA,eAAeP,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}