{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nvar _excluded = [\"key\", \"dataIndex\", \"children\"],\n  _excluded2 = [\"disabled\"];\nimport { SettingOutlined, VerticalAlignBottomOutlined, VerticalAlignMiddleOutlined, VerticalAlignTopOutlined } from '@ant-design/icons';\nimport { ProProvider, useIntl } from '@ant-design/pro-provider';\nimport { runFunction, useRefFunction } from '@ant-design/pro-utils';\nimport { Checkbox, ConfigProvider, Popover, Space, Tooltip, Tree, Typography } from 'antd';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport React, { useContext, useEffect, useMemo, useRef } from 'react';\nimport { TableContext } from \"../../Store/Provide\";\nimport { genColumnKey } from \"../../utils/index\";\nimport { useStyle } from \"./style\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar ToolTipIcon = function ToolTipIcon(_ref) {\n  var title = _ref.title,\n    show = _ref.show,\n    children = _ref.children,\n    columnKey = _ref.columnKey,\n    fixed = _ref.fixed;\n  var _useContext = useContext(TableContext),\n    columnsMap = _useContext.columnsMap,\n    setColumnsMap = _useContext.setColumnsMap;\n  if (!show) {\n    return null;\n  }\n  return /*#__PURE__*/_jsx(Tooltip, {\n    title: title,\n    children: /*#__PURE__*/_jsx(\"span\", {\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        e.preventDefault();\n        var config = columnsMap[columnKey] || {};\n        var columnKeyMap = _objectSpread(_objectSpread({}, columnsMap), {}, _defineProperty({}, columnKey, _objectSpread(_objectSpread({}, config), {}, {\n          fixed: fixed\n        })));\n        setColumnsMap(columnKeyMap);\n      },\n      children: children\n    })\n  });\n};\nvar CheckboxListItem = function CheckboxListItem(_ref2) {\n  var columnKey = _ref2.columnKey,\n    isLeaf = _ref2.isLeaf,\n    title = _ref2.title,\n    className = _ref2.className,\n    fixed = _ref2.fixed,\n    showListItemOption = _ref2.showListItemOption;\n  var intl = useIntl();\n  var _useContext2 = useContext(ProProvider),\n    hashId = _useContext2.hashId;\n  var dom = /*#__PURE__*/_jsxs(\"span\", {\n    className: \"\".concat(className, \"-list-item-option \").concat(hashId).trim(),\n    children: [/*#__PURE__*/_jsx(ToolTipIcon, {\n      columnKey: columnKey,\n      fixed: \"left\",\n      title: intl.getMessage('tableToolBar.leftPin', '固定在列首'),\n      show: fixed !== 'left',\n      children: /*#__PURE__*/_jsx(VerticalAlignTopOutlined, {})\n    }), /*#__PURE__*/_jsx(ToolTipIcon, {\n      columnKey: columnKey,\n      fixed: undefined,\n      title: intl.getMessage('tableToolBar.noPin', '不固定'),\n      show: !!fixed,\n      children: /*#__PURE__*/_jsx(VerticalAlignMiddleOutlined, {})\n    }), /*#__PURE__*/_jsx(ToolTipIcon, {\n      columnKey: columnKey,\n      fixed: \"right\",\n      title: intl.getMessage('tableToolBar.rightPin', '固定在列尾'),\n      show: fixed !== 'right',\n      children: /*#__PURE__*/_jsx(VerticalAlignBottomOutlined, {})\n    })]\n  });\n  return /*#__PURE__*/_jsxs(\"span\", {\n    className: \"\".concat(className, \"-list-item \").concat(hashId).trim(),\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"\".concat(className, \"-list-item-title \").concat(hashId).trim(),\n      children: title\n    }), showListItemOption && !isLeaf ? dom : null]\n  }, columnKey);\n};\nvar CheckboxList = function CheckboxList(_ref3) {\n  var _treeDataConfig$list, _treeDataConfig$list2, _treeDataConfig$list3;\n  var list = _ref3.list,\n    draggable = _ref3.draggable,\n    checkable = _ref3.checkable,\n    showListItemOption = _ref3.showListItemOption,\n    className = _ref3.className,\n    _ref3$showTitle = _ref3.showTitle,\n    showTitle = _ref3$showTitle === void 0 ? true : _ref3$showTitle,\n    listTitle = _ref3.title,\n    _ref3$listHeight = _ref3.listHeight,\n    listHeight = _ref3$listHeight === void 0 ? 280 : _ref3$listHeight;\n  var _useContext3 = useContext(ProProvider),\n    hashId = _useContext3.hashId;\n  var _useContext4 = useContext(TableContext),\n    columnsMap = _useContext4.columnsMap,\n    setColumnsMap = _useContext4.setColumnsMap,\n    sortKeyColumns = _useContext4.sortKeyColumns,\n    setSortKeyColumns = _useContext4.setSortKeyColumns;\n  var show = list && list.length > 0;\n  var treeDataConfig = useMemo(function () {\n    if (!show) return {};\n    var checkedKeys = [];\n    var treeMap = new Map();\n    var loopData = function loopData(data, parentConfig) {\n      return data.map(function (_ref4) {\n        var _config$disable;\n        var key = _ref4.key,\n          dataIndex = _ref4.dataIndex,\n          children = _ref4.children,\n          rest = _objectWithoutProperties(_ref4, _excluded);\n        var columnKey = genColumnKey(key, [parentConfig === null || parentConfig === void 0 ? void 0 : parentConfig.columnKey, rest.index].filter(Boolean).join('-'));\n        var config = columnsMap[columnKey || 'null'] || {\n          show: true\n        };\n        if (config.show !== false && !children) {\n          checkedKeys.push(columnKey);\n        }\n        var item = _objectSpread(_objectSpread({\n          key: columnKey\n        }, omit(rest, ['className'])), {}, {\n          selectable: false,\n          disabled: config.disable === true,\n          disableCheckbox: typeof config.disable === 'boolean' ? config.disable : (_config$disable = config.disable) === null || _config$disable === void 0 ? void 0 : _config$disable.checkbox,\n          isLeaf: parentConfig ? true : undefined\n        });\n        if (children) {\n          var _item$children;\n          item.children = loopData(children, _objectSpread(_objectSpread({}, config), {}, {\n            columnKey: columnKey\n          }));\n          // 如果children 已经全部是show了，把自己也设置为show\n          if ((_item$children = item.children) !== null && _item$children !== void 0 && _item$children.every(function (childrenItem) {\n            return checkedKeys === null || checkedKeys === void 0 ? void 0 : checkedKeys.includes(childrenItem.key);\n          })) {\n            checkedKeys.push(columnKey);\n          }\n        }\n        treeMap.set(key, item);\n        return item;\n      });\n    };\n    return {\n      list: loopData(list),\n      keys: checkedKeys,\n      map: treeMap\n    };\n  }, [columnsMap, list, show]);\n\n  /** 移动到指定的位置 */\n  var move = useRefFunction(function (id, targetId, dropPosition) {\n    var newMap = _objectSpread({}, columnsMap);\n    var newColumns = _toConsumableArray(sortKeyColumns);\n    var findIndex = newColumns.findIndex(function (columnKey) {\n      return columnKey === id;\n    });\n    var targetIndex = newColumns.findIndex(function (columnKey) {\n      return columnKey === targetId;\n    });\n    var isDownWard = dropPosition >= findIndex;\n    if (findIndex < 0) return;\n    var targetItem = newColumns[findIndex];\n    newColumns.splice(findIndex, 1);\n    if (dropPosition === 0) {\n      newColumns.unshift(targetItem);\n    } else {\n      newColumns.splice(isDownWard ? targetIndex : targetIndex + 1, 0, targetItem);\n    }\n    // 重新生成排序数组\n    newColumns.forEach(function (key, order) {\n      newMap[key] = _objectSpread(_objectSpread({}, newMap[key] || {}), {}, {\n        order: order\n      });\n    });\n    // 更新数组\n    setColumnsMap(newMap);\n    setSortKeyColumns(newColumns);\n  });\n\n  /** 选中反选功能 */\n  var onCheckTree = useRefFunction(function (e) {\n    var newColumnMap = _objectSpread({}, columnsMap);\n    var loopSetShow = function loopSetShow(key) {\n      var _treeDataConfig$map;\n      var newSetting = _objectSpread({}, newColumnMap[key]);\n      newSetting.show = e.checked;\n      // 如果含有子节点，也要选中\n      if ((_treeDataConfig$map = treeDataConfig.map) !== null && _treeDataConfig$map !== void 0 && (_treeDataConfig$map = _treeDataConfig$map.get(key)) !== null && _treeDataConfig$map !== void 0 && _treeDataConfig$map.children) {\n        var _treeDataConfig$map$g;\n        (_treeDataConfig$map$g = treeDataConfig.map.get(key)) === null || _treeDataConfig$map$g === void 0 || (_treeDataConfig$map$g = _treeDataConfig$map$g.children) === null || _treeDataConfig$map$g === void 0 || _treeDataConfig$map$g.forEach(function (item) {\n          return loopSetShow(item.key);\n        });\n      }\n      newColumnMap[key] = newSetting;\n    };\n    loopSetShow(e.node.key);\n    setColumnsMap(_objectSpread({}, newColumnMap));\n  });\n  if (!show) {\n    return null;\n  }\n  var listDom = /*#__PURE__*/_jsx(Tree, {\n    itemHeight: 24,\n    draggable: draggable && !!((_treeDataConfig$list = treeDataConfig.list) !== null && _treeDataConfig$list !== void 0 && _treeDataConfig$list.length) && ((_treeDataConfig$list2 = treeDataConfig.list) === null || _treeDataConfig$list2 === void 0 ? void 0 : _treeDataConfig$list2.length) > 1,\n    checkable: checkable,\n    onDrop: function onDrop(info) {\n      var dropKey = info.node.key;\n      var dragKey = info.dragNode.key;\n      var dropPosition = info.dropPosition,\n        dropToGap = info.dropToGap;\n      var position = dropPosition === -1 || !dropToGap ? dropPosition + 1 : dropPosition;\n      move(dragKey, dropKey, position);\n    },\n    blockNode: true,\n    onCheck: function onCheck(_, e) {\n      return onCheckTree(e);\n    },\n    checkedKeys: treeDataConfig.keys,\n    showLine: false,\n    titleRender: function titleRender(_node) {\n      var node = _objectSpread(_objectSpread({}, _node), {}, {\n        children: undefined\n      });\n      if (!node.title) return null;\n      var normalizedTitle = runFunction(node.title, node);\n      var wrappedTitle = /*#__PURE__*/_jsx(Typography.Text, {\n        style: {\n          width: 80\n        },\n        ellipsis: {\n          tooltip: normalizedTitle\n        },\n        children: normalizedTitle\n      });\n      return /*#__PURE__*/_jsx(CheckboxListItem, _objectSpread(_objectSpread({\n        className: className\n      }, omit(node, ['key'])), {}, {\n        showListItemOption: showListItemOption,\n        title: wrappedTitle,\n        columnKey: node.key\n      }));\n    },\n    height: listHeight,\n    treeData: (_treeDataConfig$list3 = treeDataConfig.list) === null || _treeDataConfig$list3 === void 0 ? void 0 : _treeDataConfig$list3.map(function (_ref5) {\n      var disabled = _ref5.disabled,\n        config = _objectWithoutProperties(_ref5, _excluded2);\n      return config;\n    })\n  });\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [showTitle && /*#__PURE__*/_jsx(\"span\", {\n      className: \"\".concat(className, \"-list-title \").concat(hashId).trim(),\n      children: listTitle\n    }), listDom]\n  });\n};\nvar GroupCheckboxList = function GroupCheckboxList(_ref6) {\n  var localColumns = _ref6.localColumns,\n    className = _ref6.className,\n    draggable = _ref6.draggable,\n    checkable = _ref6.checkable,\n    showListItemOption = _ref6.showListItemOption,\n    listsHeight = _ref6.listsHeight;\n  var _useContext5 = useContext(ProProvider),\n    hashId = _useContext5.hashId;\n  var rightList = [];\n  var leftList = [];\n  var list = [];\n  var intl = useIntl();\n  localColumns.forEach(function (item) {\n    /** 不在 setting 中展示的 */\n    if (item.hideInSetting) {\n      return;\n    }\n    var fixed = item.fixed;\n    if (fixed === 'left') {\n      leftList.push(item);\n      return;\n    }\n    if (fixed === 'right') {\n      rightList.push(item);\n      return;\n    }\n    list.push(item);\n  });\n  var showRight = rightList && rightList.length > 0;\n  var showLeft = leftList && leftList.length > 0;\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: classNames(\"\".concat(className, \"-list\"), hashId, _defineProperty({}, \"\".concat(className, \"-list-group\"), showRight || showLeft)),\n    children: [/*#__PURE__*/_jsx(CheckboxList, {\n      title: intl.getMessage('tableToolBar.leftFixedTitle', '固定在左侧'),\n      list: leftList,\n      draggable: draggable,\n      checkable: checkable,\n      showListItemOption: showListItemOption,\n      className: className,\n      listHeight: listsHeight\n    }), /*#__PURE__*/_jsx(CheckboxList, {\n      list: list,\n      draggable: draggable,\n      checkable: checkable,\n      showListItemOption: showListItemOption,\n      title: intl.getMessage('tableToolBar.noFixedTitle', '不固定'),\n      showTitle: showLeft || showRight,\n      className: className,\n      listHeight: listsHeight\n    }), /*#__PURE__*/_jsx(CheckboxList, {\n      title: intl.getMessage('tableToolBar.rightFixedTitle', '固定在右侧'),\n      list: rightList,\n      draggable: draggable,\n      checkable: checkable,\n      showListItemOption: showListItemOption,\n      className: className,\n      listHeight: listsHeight\n    })]\n  });\n};\nfunction ColumnSetting(props) {\n  var _props$checkable, _props$draggable, _props$showListItemOp, _props$settingIcon;\n  var columnRef = useRef(null);\n  // 获得当前上下文的 hashID\n  var counter = useContext(TableContext);\n  var localColumns = props.columns;\n  var _props$checkedReset = props.checkedReset,\n    checkedReset = _props$checkedReset === void 0 ? true : _props$checkedReset;\n  var columnsMap = counter.columnsMap,\n    setColumnsMap = counter.setColumnsMap,\n    clearPersistenceStorage = counter.clearPersistenceStorage;\n  useEffect(function () {\n    var _counter$propsRef$cur;\n    if ((_counter$propsRef$cur = counter.propsRef.current) !== null && _counter$propsRef$cur !== void 0 && (_counter$propsRef$cur = _counter$propsRef$cur.columnsState) !== null && _counter$propsRef$cur !== void 0 && _counter$propsRef$cur.value) {\n      var _counter$propsRef$cur2;\n      columnRef.current = JSON.parse(JSON.stringify(((_counter$propsRef$cur2 = counter.propsRef.current) === null || _counter$propsRef$cur2 === void 0 || (_counter$propsRef$cur2 = _counter$propsRef$cur2.columnsState) === null || _counter$propsRef$cur2 === void 0 ? void 0 : _counter$propsRef$cur2.value) || {}));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /**\n   * 设置全部选中，或全部未选中\n   *\n   * @param show\n   */\n  var setAllSelectAction = useRefFunction(function () {\n    var show = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    var columnKeyMap = {};\n    var loopColumns = function loopColumns(columns) {\n      columns.forEach(function (_ref7) {\n        var key = _ref7.key,\n          fixed = _ref7.fixed,\n          index = _ref7.index,\n          children = _ref7.children,\n          disable = _ref7.disable;\n        var columnKey = genColumnKey(key, index);\n        if (columnKey) {\n          var _columnsMap$columnKey, _columnsMap$columnKey2;\n          columnKeyMap[columnKey] = {\n            // 子节点 disable 时，不修改节点显示状态\n            show: disable ? (_columnsMap$columnKey = columnsMap[columnKey]) === null || _columnsMap$columnKey === void 0 ? void 0 : _columnsMap$columnKey.show : show,\n            fixed: fixed,\n            disable: disable,\n            order: (_columnsMap$columnKey2 = columnsMap[columnKey]) === null || _columnsMap$columnKey2 === void 0 ? void 0 : _columnsMap$columnKey2.order\n          };\n        }\n        if (children) {\n          loopColumns(children);\n        }\n      });\n    };\n    loopColumns(localColumns);\n    setColumnsMap(columnKeyMap);\n  });\n\n  /** 全选和反选 */\n  var checkedAll = useRefFunction(function (e) {\n    if (e.target.checked) {\n      setAllSelectAction();\n    } else {\n      setAllSelectAction(false);\n    }\n  });\n\n  /** 重置项目 */\n  var clearClick = useRefFunction(function () {\n    var _counter$propsRef$cur3;\n    clearPersistenceStorage === null || clearPersistenceStorage === void 0 || clearPersistenceStorage();\n    setColumnsMap(((_counter$propsRef$cur3 = counter.propsRef.current) === null || _counter$propsRef$cur3 === void 0 || (_counter$propsRef$cur3 = _counter$propsRef$cur3.columnsState) === null || _counter$propsRef$cur3 === void 0 ? void 0 : _counter$propsRef$cur3.defaultValue) || columnRef.current || counter.defaultColumnKeyMap);\n  });\n\n  // 未选中的 key 列表\n  var unCheckedKeys = Object.values(columnsMap).filter(function (value) {\n    return !value || value.show === false;\n  });\n\n  // 是否已经选中\n  var indeterminate = unCheckedKeys.length > 0 && unCheckedKeys.length !== localColumns.length;\n  var intl = useIntl();\n  var _useContext6 = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext6.getPrefixCls;\n  var className = getPrefixCls('pro-table-column-setting');\n  var _useStyle = useStyle(className),\n    wrapSSR = _useStyle.wrapSSR,\n    hashId = _useStyle.hashId;\n  return wrapSSR(/*#__PURE__*/_jsx(Popover, {\n    arrow: false,\n    title: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"\".concat(className, \"-title \").concat(hashId).trim(),\n      children: [props.checkable === false ? /*#__PURE__*/_jsx(\"div\", {}) : /*#__PURE__*/_jsx(Checkbox, {\n        indeterminate: indeterminate,\n        checked: unCheckedKeys.length === 0 && unCheckedKeys.length !== localColumns.length,\n        onChange: function onChange(e) {\n          checkedAll(e);\n        },\n        children: intl.getMessage('tableToolBar.columnDisplay', '列展示')\n      }), checkedReset ? /*#__PURE__*/_jsx(\"a\", {\n        onClick: clearClick,\n        className: \"\".concat(className, \"-action-rest-button \").concat(hashId).trim(),\n        children: intl.getMessage('tableToolBar.reset', '重置')\n      }) : null, props !== null && props !== void 0 && props.extra ? /*#__PURE__*/_jsx(Space, {\n        size: 12,\n        align: \"center\",\n        children: props.extra\n      }) : null]\n    }),\n    overlayClassName: \"\".concat(className, \"-overlay \").concat(hashId).trim(),\n    trigger: \"click\",\n    placement: \"bottomRight\",\n    content: /*#__PURE__*/_jsx(GroupCheckboxList, {\n      checkable: (_props$checkable = props.checkable) !== null && _props$checkable !== void 0 ? _props$checkable : true,\n      draggable: (_props$draggable = props.draggable) !== null && _props$draggable !== void 0 ? _props$draggable : true,\n      showListItemOption: (_props$showListItemOp = props.showListItemOption) !== null && _props$showListItemOp !== void 0 ? _props$showListItemOp : true,\n      className: className,\n      localColumns: localColumns,\n      listsHeight: props.listsHeight\n    }),\n    children: props.children || /*#__PURE__*/_jsx(Tooltip, {\n      title: intl.getMessage('tableToolBar.columnSetting', '列设置'),\n      children: (_props$settingIcon = props.settingIcon) !== null && _props$settingIcon !== void 0 ? _props$settingIcon : /*#__PURE__*/_jsx(SettingOutlined, {})\n    })\n  }));\n}\nexport default ColumnSetting;","map":{"version":3,"names":["_toConsumableArray","_objectWithoutProperties","_defineProperty","_objectSpread","_excluded","_excluded2","SettingOutlined","VerticalAlignBottomOutlined","VerticalAlignMiddleOutlined","VerticalAlignTopOutlined","ProProvider","useIntl","runFunction","useRefFunction","Checkbox","ConfigProvider","Popover","Space","Tooltip","Tree","Typography","classNames","omit","React","useContext","useEffect","useMemo","useRef","TableContext","genColumnKey","useStyle","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ToolTipIcon","_ref","title","show","children","columnKey","fixed","_useContext","columnsMap","setColumnsMap","onClick","e","stopPropagation","preventDefault","config","columnKeyMap","CheckboxListItem","_ref2","isLeaf","className","showListItemOption","intl","_useContext2","hashId","dom","concat","trim","getMessage","undefined","CheckboxList","_ref3","_treeDataConfig$list","_treeDataConfig$list2","_treeDataConfig$list3","list","draggable","checkable","_ref3$showTitle","showTitle","listTitle","_ref3$listHeight","listHeight","_useContext3","_useContext4","sortKeyColumns","setSortKeyColumns","length","treeDataConfig","checkedKeys","treeMap","Map","loopData","data","parentConfig","map","_ref4","_config$disable","key","dataIndex","rest","index","filter","Boolean","join","push","item","selectable","disabled","disable","disableCheckbox","checkbox","_item$children","every","childrenItem","includes","set","keys","move","id","targetId","dropPosition","newMap","newColumns","findIndex","targetIndex","isDownWard","targetItem","splice","unshift","forEach","order","onCheckTree","newColumnMap","loopSetShow","_treeDataConfig$map","newSetting","checked","get","_treeDataConfig$map$g","node","listDom","itemHeight","onDrop","info","dropKey","dragKey","dragNode","dropToGap","position","blockNode","onCheck","_","showLine","titleRender","_node","normalizedTitle","wrappedTitle","Text","style","width","ellipsis","tooltip","height","treeData","_ref5","GroupCheckboxList","_ref6","localColumns","listsHeight","_useContext5","rightList","leftList","hideInSetting","showRight","showLeft","ColumnSetting","props","_props$checkable","_props$draggable","_props$showListItemOp","_props$settingIcon","columnRef","counter","columns","_props$checkedReset","checkedReset","clearPersistenceStorage","_counter$propsRef$cur","propsRef","current","columnsState","value","_counter$propsRef$cur2","JSON","parse","stringify","setAllSelectAction","arguments","loopColumns","_ref7","_columnsMap$columnKey","_columnsMap$columnKey2","checkedAll","target","clearClick","_counter$propsRef$cur3","defaultValue","defaultColumnKeyMap","unCheckedKeys","Object","values","indeterminate","_useContext6","ConfigContext","getPrefixCls","_useStyle","wrapSSR","arrow","onChange","extra","size","align","overlayClassName","trigger","placement","content","settingIcon"],"sources":["/Users/phanluc/admin-web-fe/node_modules/@ant-design/pro-table/es/components/ColumnSetting/index.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nvar _excluded = [\"key\", \"dataIndex\", \"children\"],\n  _excluded2 = [\"disabled\"];\nimport { SettingOutlined, VerticalAlignBottomOutlined, VerticalAlignMiddleOutlined, VerticalAlignTopOutlined } from '@ant-design/icons';\nimport { ProProvider, useIntl } from '@ant-design/pro-provider';\nimport { runFunction, useRefFunction } from '@ant-design/pro-utils';\nimport { Checkbox, ConfigProvider, Popover, Space, Tooltip, Tree, Typography } from 'antd';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport React, { useContext, useEffect, useMemo, useRef } from 'react';\nimport { TableContext } from \"../../Store/Provide\";\nimport { genColumnKey } from \"../../utils/index\";\nimport { useStyle } from \"./style\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar ToolTipIcon = function ToolTipIcon(_ref) {\n  var title = _ref.title,\n    show = _ref.show,\n    children = _ref.children,\n    columnKey = _ref.columnKey,\n    fixed = _ref.fixed;\n  var _useContext = useContext(TableContext),\n    columnsMap = _useContext.columnsMap,\n    setColumnsMap = _useContext.setColumnsMap;\n  if (!show) {\n    return null;\n  }\n  return /*#__PURE__*/_jsx(Tooltip, {\n    title: title,\n    children: /*#__PURE__*/_jsx(\"span\", {\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        e.preventDefault();\n        var config = columnsMap[columnKey] || {};\n        var columnKeyMap = _objectSpread(_objectSpread({}, columnsMap), {}, _defineProperty({}, columnKey, _objectSpread(_objectSpread({}, config), {}, {\n          fixed: fixed\n        })));\n        setColumnsMap(columnKeyMap);\n      },\n      children: children\n    })\n  });\n};\nvar CheckboxListItem = function CheckboxListItem(_ref2) {\n  var columnKey = _ref2.columnKey,\n    isLeaf = _ref2.isLeaf,\n    title = _ref2.title,\n    className = _ref2.className,\n    fixed = _ref2.fixed,\n    showListItemOption = _ref2.showListItemOption;\n  var intl = useIntl();\n  var _useContext2 = useContext(ProProvider),\n    hashId = _useContext2.hashId;\n  var dom = /*#__PURE__*/_jsxs(\"span\", {\n    className: \"\".concat(className, \"-list-item-option \").concat(hashId).trim(),\n    children: [/*#__PURE__*/_jsx(ToolTipIcon, {\n      columnKey: columnKey,\n      fixed: \"left\",\n      title: intl.getMessage('tableToolBar.leftPin', '固定在列首'),\n      show: fixed !== 'left',\n      children: /*#__PURE__*/_jsx(VerticalAlignTopOutlined, {})\n    }), /*#__PURE__*/_jsx(ToolTipIcon, {\n      columnKey: columnKey,\n      fixed: undefined,\n      title: intl.getMessage('tableToolBar.noPin', '不固定'),\n      show: !!fixed,\n      children: /*#__PURE__*/_jsx(VerticalAlignMiddleOutlined, {})\n    }), /*#__PURE__*/_jsx(ToolTipIcon, {\n      columnKey: columnKey,\n      fixed: \"right\",\n      title: intl.getMessage('tableToolBar.rightPin', '固定在列尾'),\n      show: fixed !== 'right',\n      children: /*#__PURE__*/_jsx(VerticalAlignBottomOutlined, {})\n    })]\n  });\n  return /*#__PURE__*/_jsxs(\"span\", {\n    className: \"\".concat(className, \"-list-item \").concat(hashId).trim(),\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"\".concat(className, \"-list-item-title \").concat(hashId).trim(),\n      children: title\n    }), showListItemOption && !isLeaf ? dom : null]\n  }, columnKey);\n};\nvar CheckboxList = function CheckboxList(_ref3) {\n  var _treeDataConfig$list, _treeDataConfig$list2, _treeDataConfig$list3;\n  var list = _ref3.list,\n    draggable = _ref3.draggable,\n    checkable = _ref3.checkable,\n    showListItemOption = _ref3.showListItemOption,\n    className = _ref3.className,\n    _ref3$showTitle = _ref3.showTitle,\n    showTitle = _ref3$showTitle === void 0 ? true : _ref3$showTitle,\n    listTitle = _ref3.title,\n    _ref3$listHeight = _ref3.listHeight,\n    listHeight = _ref3$listHeight === void 0 ? 280 : _ref3$listHeight;\n  var _useContext3 = useContext(ProProvider),\n    hashId = _useContext3.hashId;\n  var _useContext4 = useContext(TableContext),\n    columnsMap = _useContext4.columnsMap,\n    setColumnsMap = _useContext4.setColumnsMap,\n    sortKeyColumns = _useContext4.sortKeyColumns,\n    setSortKeyColumns = _useContext4.setSortKeyColumns;\n  var show = list && list.length > 0;\n  var treeDataConfig = useMemo(function () {\n    if (!show) return {};\n    var checkedKeys = [];\n    var treeMap = new Map();\n    var loopData = function loopData(data, parentConfig) {\n      return data.map(function (_ref4) {\n        var _config$disable;\n        var key = _ref4.key,\n          dataIndex = _ref4.dataIndex,\n          children = _ref4.children,\n          rest = _objectWithoutProperties(_ref4, _excluded);\n        var columnKey = genColumnKey(key, [parentConfig === null || parentConfig === void 0 ? void 0 : parentConfig.columnKey, rest.index].filter(Boolean).join('-'));\n        var config = columnsMap[columnKey || 'null'] || {\n          show: true\n        };\n        if (config.show !== false && !children) {\n          checkedKeys.push(columnKey);\n        }\n        var item = _objectSpread(_objectSpread({\n          key: columnKey\n        }, omit(rest, ['className'])), {}, {\n          selectable: false,\n          disabled: config.disable === true,\n          disableCheckbox: typeof config.disable === 'boolean' ? config.disable : (_config$disable = config.disable) === null || _config$disable === void 0 ? void 0 : _config$disable.checkbox,\n          isLeaf: parentConfig ? true : undefined\n        });\n        if (children) {\n          var _item$children;\n          item.children = loopData(children, _objectSpread(_objectSpread({}, config), {}, {\n            columnKey: columnKey\n          }));\n          // 如果children 已经全部是show了，把自己也设置为show\n          if ((_item$children = item.children) !== null && _item$children !== void 0 && _item$children.every(function (childrenItem) {\n            return checkedKeys === null || checkedKeys === void 0 ? void 0 : checkedKeys.includes(childrenItem.key);\n          })) {\n            checkedKeys.push(columnKey);\n          }\n        }\n        treeMap.set(key, item);\n        return item;\n      });\n    };\n    return {\n      list: loopData(list),\n      keys: checkedKeys,\n      map: treeMap\n    };\n  }, [columnsMap, list, show]);\n\n  /** 移动到指定的位置 */\n  var move = useRefFunction(function (id, targetId, dropPosition) {\n    var newMap = _objectSpread({}, columnsMap);\n    var newColumns = _toConsumableArray(sortKeyColumns);\n    var findIndex = newColumns.findIndex(function (columnKey) {\n      return columnKey === id;\n    });\n    var targetIndex = newColumns.findIndex(function (columnKey) {\n      return columnKey === targetId;\n    });\n    var isDownWard = dropPosition >= findIndex;\n    if (findIndex < 0) return;\n    var targetItem = newColumns[findIndex];\n    newColumns.splice(findIndex, 1);\n    if (dropPosition === 0) {\n      newColumns.unshift(targetItem);\n    } else {\n      newColumns.splice(isDownWard ? targetIndex : targetIndex + 1, 0, targetItem);\n    }\n    // 重新生成排序数组\n    newColumns.forEach(function (key, order) {\n      newMap[key] = _objectSpread(_objectSpread({}, newMap[key] || {}), {}, {\n        order: order\n      });\n    });\n    // 更新数组\n    setColumnsMap(newMap);\n    setSortKeyColumns(newColumns);\n  });\n\n  /** 选中反选功能 */\n  var onCheckTree = useRefFunction(function (e) {\n    var newColumnMap = _objectSpread({}, columnsMap);\n    var loopSetShow = function loopSetShow(key) {\n      var _treeDataConfig$map;\n      var newSetting = _objectSpread({}, newColumnMap[key]);\n      newSetting.show = e.checked;\n      // 如果含有子节点，也要选中\n      if ((_treeDataConfig$map = treeDataConfig.map) !== null && _treeDataConfig$map !== void 0 && (_treeDataConfig$map = _treeDataConfig$map.get(key)) !== null && _treeDataConfig$map !== void 0 && _treeDataConfig$map.children) {\n        var _treeDataConfig$map$g;\n        (_treeDataConfig$map$g = treeDataConfig.map.get(key)) === null || _treeDataConfig$map$g === void 0 || (_treeDataConfig$map$g = _treeDataConfig$map$g.children) === null || _treeDataConfig$map$g === void 0 || _treeDataConfig$map$g.forEach(function (item) {\n          return loopSetShow(item.key);\n        });\n      }\n      newColumnMap[key] = newSetting;\n    };\n    loopSetShow(e.node.key);\n    setColumnsMap(_objectSpread({}, newColumnMap));\n  });\n  if (!show) {\n    return null;\n  }\n  var listDom = /*#__PURE__*/_jsx(Tree, {\n    itemHeight: 24,\n    draggable: draggable && !!((_treeDataConfig$list = treeDataConfig.list) !== null && _treeDataConfig$list !== void 0 && _treeDataConfig$list.length) && ((_treeDataConfig$list2 = treeDataConfig.list) === null || _treeDataConfig$list2 === void 0 ? void 0 : _treeDataConfig$list2.length) > 1,\n    checkable: checkable,\n    onDrop: function onDrop(info) {\n      var dropKey = info.node.key;\n      var dragKey = info.dragNode.key;\n      var dropPosition = info.dropPosition,\n        dropToGap = info.dropToGap;\n      var position = dropPosition === -1 || !dropToGap ? dropPosition + 1 : dropPosition;\n      move(dragKey, dropKey, position);\n    },\n    blockNode: true,\n    onCheck: function onCheck(_, e) {\n      return onCheckTree(e);\n    },\n    checkedKeys: treeDataConfig.keys,\n    showLine: false,\n    titleRender: function titleRender(_node) {\n      var node = _objectSpread(_objectSpread({}, _node), {}, {\n        children: undefined\n      });\n      if (!node.title) return null;\n      var normalizedTitle = runFunction(node.title, node);\n      var wrappedTitle = /*#__PURE__*/_jsx(Typography.Text, {\n        style: {\n          width: 80\n        },\n        ellipsis: {\n          tooltip: normalizedTitle\n        },\n        children: normalizedTitle\n      });\n      return /*#__PURE__*/_jsx(CheckboxListItem, _objectSpread(_objectSpread({\n        className: className\n      }, omit(node, ['key'])), {}, {\n        showListItemOption: showListItemOption,\n        title: wrappedTitle,\n        columnKey: node.key\n      }));\n    },\n    height: listHeight,\n    treeData: (_treeDataConfig$list3 = treeDataConfig.list) === null || _treeDataConfig$list3 === void 0 ? void 0 : _treeDataConfig$list3.map(function (_ref5) {\n      var disabled = _ref5.disabled,\n        config = _objectWithoutProperties(_ref5, _excluded2);\n      return config;\n    })\n  });\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [showTitle && /*#__PURE__*/_jsx(\"span\", {\n      className: \"\".concat(className, \"-list-title \").concat(hashId).trim(),\n      children: listTitle\n    }), listDom]\n  });\n};\nvar GroupCheckboxList = function GroupCheckboxList(_ref6) {\n  var localColumns = _ref6.localColumns,\n    className = _ref6.className,\n    draggable = _ref6.draggable,\n    checkable = _ref6.checkable,\n    showListItemOption = _ref6.showListItemOption,\n    listsHeight = _ref6.listsHeight;\n  var _useContext5 = useContext(ProProvider),\n    hashId = _useContext5.hashId;\n  var rightList = [];\n  var leftList = [];\n  var list = [];\n  var intl = useIntl();\n  localColumns.forEach(function (item) {\n    /** 不在 setting 中展示的 */\n    if (item.hideInSetting) {\n      return;\n    }\n    var fixed = item.fixed;\n    if (fixed === 'left') {\n      leftList.push(item);\n      return;\n    }\n    if (fixed === 'right') {\n      rightList.push(item);\n      return;\n    }\n    list.push(item);\n  });\n  var showRight = rightList && rightList.length > 0;\n  var showLeft = leftList && leftList.length > 0;\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: classNames(\"\".concat(className, \"-list\"), hashId, _defineProperty({}, \"\".concat(className, \"-list-group\"), showRight || showLeft)),\n    children: [/*#__PURE__*/_jsx(CheckboxList, {\n      title: intl.getMessage('tableToolBar.leftFixedTitle', '固定在左侧'),\n      list: leftList,\n      draggable: draggable,\n      checkable: checkable,\n      showListItemOption: showListItemOption,\n      className: className,\n      listHeight: listsHeight\n    }), /*#__PURE__*/_jsx(CheckboxList, {\n      list: list,\n      draggable: draggable,\n      checkable: checkable,\n      showListItemOption: showListItemOption,\n      title: intl.getMessage('tableToolBar.noFixedTitle', '不固定'),\n      showTitle: showLeft || showRight,\n      className: className,\n      listHeight: listsHeight\n    }), /*#__PURE__*/_jsx(CheckboxList, {\n      title: intl.getMessage('tableToolBar.rightFixedTitle', '固定在右侧'),\n      list: rightList,\n      draggable: draggable,\n      checkable: checkable,\n      showListItemOption: showListItemOption,\n      className: className,\n      listHeight: listsHeight\n    })]\n  });\n};\nfunction ColumnSetting(props) {\n  var _props$checkable, _props$draggable, _props$showListItemOp, _props$settingIcon;\n  var columnRef = useRef(null);\n  // 获得当前上下文的 hashID\n  var counter = useContext(TableContext);\n  var localColumns = props.columns;\n  var _props$checkedReset = props.checkedReset,\n    checkedReset = _props$checkedReset === void 0 ? true : _props$checkedReset;\n  var columnsMap = counter.columnsMap,\n    setColumnsMap = counter.setColumnsMap,\n    clearPersistenceStorage = counter.clearPersistenceStorage;\n  useEffect(function () {\n    var _counter$propsRef$cur;\n    if ((_counter$propsRef$cur = counter.propsRef.current) !== null && _counter$propsRef$cur !== void 0 && (_counter$propsRef$cur = _counter$propsRef$cur.columnsState) !== null && _counter$propsRef$cur !== void 0 && _counter$propsRef$cur.value) {\n      var _counter$propsRef$cur2;\n      columnRef.current = JSON.parse(JSON.stringify(((_counter$propsRef$cur2 = counter.propsRef.current) === null || _counter$propsRef$cur2 === void 0 || (_counter$propsRef$cur2 = _counter$propsRef$cur2.columnsState) === null || _counter$propsRef$cur2 === void 0 ? void 0 : _counter$propsRef$cur2.value) || {}));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /**\n   * 设置全部选中，或全部未选中\n   *\n   * @param show\n   */\n  var setAllSelectAction = useRefFunction(function () {\n    var show = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    var columnKeyMap = {};\n    var loopColumns = function loopColumns(columns) {\n      columns.forEach(function (_ref7) {\n        var key = _ref7.key,\n          fixed = _ref7.fixed,\n          index = _ref7.index,\n          children = _ref7.children,\n          disable = _ref7.disable;\n        var columnKey = genColumnKey(key, index);\n        if (columnKey) {\n          var _columnsMap$columnKey, _columnsMap$columnKey2;\n          columnKeyMap[columnKey] = {\n            // 子节点 disable 时，不修改节点显示状态\n            show: disable ? (_columnsMap$columnKey = columnsMap[columnKey]) === null || _columnsMap$columnKey === void 0 ? void 0 : _columnsMap$columnKey.show : show,\n            fixed: fixed,\n            disable: disable,\n            order: (_columnsMap$columnKey2 = columnsMap[columnKey]) === null || _columnsMap$columnKey2 === void 0 ? void 0 : _columnsMap$columnKey2.order\n          };\n        }\n        if (children) {\n          loopColumns(children);\n        }\n      });\n    };\n    loopColumns(localColumns);\n    setColumnsMap(columnKeyMap);\n  });\n\n  /** 全选和反选 */\n  var checkedAll = useRefFunction(function (e) {\n    if (e.target.checked) {\n      setAllSelectAction();\n    } else {\n      setAllSelectAction(false);\n    }\n  });\n\n  /** 重置项目 */\n  var clearClick = useRefFunction(function () {\n    var _counter$propsRef$cur3;\n    clearPersistenceStorage === null || clearPersistenceStorage === void 0 || clearPersistenceStorage();\n    setColumnsMap(((_counter$propsRef$cur3 = counter.propsRef.current) === null || _counter$propsRef$cur3 === void 0 || (_counter$propsRef$cur3 = _counter$propsRef$cur3.columnsState) === null || _counter$propsRef$cur3 === void 0 ? void 0 : _counter$propsRef$cur3.defaultValue) || columnRef.current || counter.defaultColumnKeyMap);\n  });\n\n  // 未选中的 key 列表\n  var unCheckedKeys = Object.values(columnsMap).filter(function (value) {\n    return !value || value.show === false;\n  });\n\n  // 是否已经选中\n  var indeterminate = unCheckedKeys.length > 0 && unCheckedKeys.length !== localColumns.length;\n  var intl = useIntl();\n  var _useContext6 = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext6.getPrefixCls;\n  var className = getPrefixCls('pro-table-column-setting');\n  var _useStyle = useStyle(className),\n    wrapSSR = _useStyle.wrapSSR,\n    hashId = _useStyle.hashId;\n  return wrapSSR( /*#__PURE__*/_jsx(Popover, {\n    arrow: false,\n    title: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"\".concat(className, \"-title \").concat(hashId).trim(),\n      children: [props.checkable === false ? /*#__PURE__*/_jsx(\"div\", {}) : /*#__PURE__*/_jsx(Checkbox, {\n        indeterminate: indeterminate,\n        checked: unCheckedKeys.length === 0 && unCheckedKeys.length !== localColumns.length,\n        onChange: function onChange(e) {\n          checkedAll(e);\n        },\n        children: intl.getMessage('tableToolBar.columnDisplay', '列展示')\n      }), checkedReset ? /*#__PURE__*/_jsx(\"a\", {\n        onClick: clearClick,\n        className: \"\".concat(className, \"-action-rest-button \").concat(hashId).trim(),\n        children: intl.getMessage('tableToolBar.reset', '重置')\n      }) : null, props !== null && props !== void 0 && props.extra ? /*#__PURE__*/_jsx(Space, {\n        size: 12,\n        align: \"center\",\n        children: props.extra\n      }) : null]\n    }),\n    overlayClassName: \"\".concat(className, \"-overlay \").concat(hashId).trim(),\n    trigger: \"click\",\n    placement: \"bottomRight\",\n    content: /*#__PURE__*/_jsx(GroupCheckboxList, {\n      checkable: (_props$checkable = props.checkable) !== null && _props$checkable !== void 0 ? _props$checkable : true,\n      draggable: (_props$draggable = props.draggable) !== null && _props$draggable !== void 0 ? _props$draggable : true,\n      showListItemOption: (_props$showListItemOp = props.showListItemOption) !== null && _props$showListItemOp !== void 0 ? _props$showListItemOp : true,\n      className: className,\n      localColumns: localColumns,\n      listsHeight: props.listsHeight\n    }),\n    children: props.children || /*#__PURE__*/_jsx(Tooltip, {\n      title: intl.getMessage('tableToolBar.columnSetting', '列设置'),\n      children: (_props$settingIcon = props.settingIcon) !== null && _props$settingIcon !== void 0 ? _props$settingIcon : /*#__PURE__*/_jsx(SettingOutlined, {})\n    })\n  }));\n}\nexport default ColumnSetting;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}