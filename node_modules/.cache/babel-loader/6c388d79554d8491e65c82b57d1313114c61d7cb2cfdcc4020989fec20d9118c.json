{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nvar _excluded = [\"onTableChange\", \"maxLength\", \"formItemProps\", \"recordCreatorProps\", \"rowKey\", \"controlled\", \"defaultValue\", \"onChange\", \"editableFormRef\"],\n  _excluded2 = [\"record\", \"position\", \"creatorButtonText\", \"newRecordType\", \"parentKey\", \"style\"];\nimport { PlusOutlined } from '@ant-design/icons';\nimport ProForm, { ProFormDependency } from '@ant-design/pro-form';\nimport { useIntl } from '@ant-design/pro-provider';\nimport { isDeepEqualReact, runFunction, stringify, useRefFunction } from '@ant-design/pro-utils';\nimport { Button, Form } from 'antd';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport get from \"rc-util/es/utils/get\";\nimport set from \"rc-util/es/utils/set\";\nimport React, { useContext, useEffect, useImperativeHandle, useMemo, useRef } from 'react';\nimport ProTable from \"../../Table\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar EditableTableActionContext = /*#__PURE__*/React.createContext(undefined);\n\n/** 可编辑表格的按钮 */\nfunction RecordCreator(props) {\n  var children = props.children,\n    record = props.record,\n    position = props.position,\n    newRecordType = props.newRecordType,\n    parentKey = props.parentKey;\n  var actionRef = useContext(EditableTableActionContext);\n  return /*#__PURE__*/React.cloneElement(children, _objectSpread(_objectSpread({}, children.props), {}, {\n    onClick: function () {\n      var _onClick = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n        var _children$props$onCli, _children$props, _actionRef$current;\n        var isOk;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return (_children$props$onCli = (_children$props = children.props).onClick) === null || _children$props$onCli === void 0 ? void 0 : _children$props$onCli.call(_children$props, e);\n            case 2:\n              isOk = _context.sent;\n              if (!(isOk === false)) {\n                _context.next = 5;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 5:\n              actionRef === null || actionRef === void 0 || (_actionRef$current = actionRef.current) === null || _actionRef$current === void 0 || _actionRef$current.addEditRecord(record, {\n                position: position,\n                newRecordType: newRecordType,\n                parentKey: parentKey\n              });\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function onClick(_x) {\n        return _onClick.apply(this, arguments);\n      }\n      return onClick;\n    }()\n  }));\n}\n\n/**\n * 可以直接放到 Form 中的可编辑表格\n * A React component that is used to create a table.\n * @param props\n */\nfunction EditableTable(props) {\n  var _props$editable2, _props$editable4;\n  var intl = useIntl();\n  var onTableChange = props.onTableChange,\n    maxLength = props.maxLength,\n    formItemProps = props.formItemProps,\n    recordCreatorProps = props.recordCreatorProps,\n    rowKey = props.rowKey,\n    controlled = props.controlled,\n    defaultValue = props.defaultValue,\n    onChange = props.onChange,\n    editableFormRef = props.editableFormRef,\n    rest = _objectWithoutProperties(props, _excluded);\n  var preData = useRef(undefined);\n  var actionRef = useRef();\n  var formRef = useRef();\n\n  // 设置 ref\n  useImperativeHandle(rest.actionRef, function () {\n    return actionRef.current;\n  }, [actionRef.current]);\n  var _useMergedState = useMergedState(function () {\n      return props.value || defaultValue || [];\n    }, {\n      value: props.value,\n      onChange: props.onChange\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    value = _useMergedState2[0],\n    setValue = _useMergedState2[1];\n  var getRowKey = React.useMemo(function () {\n    if (typeof rowKey === 'function') {\n      return rowKey;\n    }\n    return function (record, index) {\n      return record[rowKey] || index;\n    };\n  }, [rowKey]);\n\n  /**\n   * 根据不同的情况返回不同的 rowKey\n   * @param finlayRowKey\n   * @returns string | number\n   */\n  var coverRowKey = useRefFunction(function (finlayRowKey) {\n    /**\n     * 如果是 prop.name 的模式，就需要把行号转化成具体的rowKey。\n     */\n    if (typeof finlayRowKey === 'number' && !props.name) {\n      if (finlayRowKey >= value.length) return finlayRowKey;\n      var rowData = value && value[finlayRowKey];\n      return getRowKey === null || getRowKey === void 0 ? void 0 : getRowKey(rowData, finlayRowKey);\n    }\n\n    /**\n     * 如果是 prop.name 的模式，就直接返回行号\n     */\n    if ((typeof finlayRowKey === 'string' || finlayRowKey >= value.length) && props.name) {\n      var _rowIndex = value.findIndex(function (item, index) {\n        var _getRowKey;\n        return (getRowKey === null || getRowKey === void 0 || (_getRowKey = getRowKey(item, index)) === null || _getRowKey === void 0 ? void 0 : _getRowKey.toString()) === (finlayRowKey === null || finlayRowKey === void 0 ? void 0 : finlayRowKey.toString());\n      });\n      if (_rowIndex !== -1) return _rowIndex;\n    }\n    return finlayRowKey;\n  });\n\n  // 设置 editableFormRef\n  useImperativeHandle(editableFormRef, function () {\n    /**\n     * 获取一行数据的\n     * @param rowIndex\n     * @returns T | undefined\n     */\n    var getRowData = function getRowData(rowIndex) {\n      var _finlayRowKey$toStrin, _formRef$current;\n      if (rowIndex == undefined) {\n        throw new Error('rowIndex is required');\n      }\n      var finlayRowKey = coverRowKey(rowIndex);\n      var rowKeyName = [props.name, (_finlayRowKey$toStrin = finlayRowKey === null || finlayRowKey === void 0 ? void 0 : finlayRowKey.toString()) !== null && _finlayRowKey$toStrin !== void 0 ? _finlayRowKey$toStrin : ''].flat(1).filter(Boolean);\n      return (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.getFieldValue(rowKeyName);\n    };\n\n    /**\n     * 获取整个 table 的数据\n     * @returns T[] | undefined\n     */\n    var getRowsData = function getRowsData() {\n      var _formRef$current3;\n      var rowKeyName = [props.name].flat(1).filter(Boolean);\n      if (Array.isArray(rowKeyName) && rowKeyName.length === 0) {\n        var _formRef$current2;\n        var rowData = (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.getFieldsValue();\n        if (Array.isArray(rowData)) return rowData;\n        return Object.keys(rowData).map(function (key) {\n          return rowData[key];\n        });\n      }\n      return (_formRef$current3 = formRef.current) === null || _formRef$current3 === void 0 ? void 0 : _formRef$current3.getFieldValue(rowKeyName);\n    };\n    return _objectSpread(_objectSpread({}, formRef.current), {}, {\n      getRowData: getRowData,\n      getRowsData: getRowsData,\n      /**\n       * 设置一行的数据，会将数据进行简单的 merge\n       * @param rowIndex\n       * @param data\n       * @returns void\n       */\n      setRowData: function setRowData(rowIndex, data) {\n        var _finlayRowKey$toStrin2, _formRef$current4;\n        if (rowIndex == undefined) {\n          throw new Error('rowIndex is required');\n        }\n        var finlayRowKey = coverRowKey(rowIndex);\n        var rowKeyName = [props.name, (_finlayRowKey$toStrin2 = finlayRowKey === null || finlayRowKey === void 0 ? void 0 : finlayRowKey.toString()) !== null && _finlayRowKey$toStrin2 !== void 0 ? _finlayRowKey$toStrin2 : ''].flat(1).filter(Boolean);\n        var newRowData = Object.assign({}, _objectSpread(_objectSpread({}, getRowData(rowIndex)), data || {}));\n        var updateValues = set({}, rowKeyName, newRowData);\n        (_formRef$current4 = formRef.current) === null || _formRef$current4 === void 0 || _formRef$current4.setFieldsValue(updateValues);\n        return true;\n      }\n    });\n  }, [coverRowKey, props.name, formRef.current]);\n  useEffect(function () {\n    if (!props.controlled) return;\n    (value || []).forEach(function (current, index) {\n      var _formRef$current5;\n      (_formRef$current5 = formRef.current) === null || _formRef$current5 === void 0 || _formRef$current5.setFieldsValue(_defineProperty({}, \"\".concat(getRowKey(current, index)), current));\n    }, {});\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [stringify(value), props.controlled]);\n  useEffect(function () {\n    if (props.name) {\n      var _props$editable;\n      formRef.current = props === null || props === void 0 || (_props$editable = props.editable) === null || _props$editable === void 0 ? void 0 : _props$editable.form;\n    }\n  }, [(_props$editable2 = props.editable) === null || _props$editable2 === void 0 ? void 0 : _props$editable2.form, props.name]);\n  var _ref = recordCreatorProps || {},\n    record = _ref.record,\n    position = _ref.position,\n    creatorButtonText = _ref.creatorButtonText,\n    newRecordType = _ref.newRecordType,\n    parentKey = _ref.parentKey,\n    style = _ref.style,\n    restButtonProps = _objectWithoutProperties(_ref, _excluded2);\n  var isTop = position === 'top';\n  var creatorButtonDom = useMemo(function () {\n    if (typeof maxLength === 'number' && maxLength <= (value === null || value === void 0 ? void 0 : value.length)) {\n      return false;\n    }\n    return recordCreatorProps !== false && /*#__PURE__*/_jsx(RecordCreator, {\n      record: runFunction(record, value === null || value === void 0 ? void 0 : value.length, value) || {},\n      position: position,\n      parentKey: runFunction(parentKey, value === null || value === void 0 ? void 0 : value.length, value),\n      newRecordType: newRecordType,\n      children: /*#__PURE__*/_jsx(Button, _objectSpread(_objectSpread({\n        type: \"dashed\",\n        style: _objectSpread({\n          display: 'block',\n          margin: '10px 0',\n          width: '100%'\n        }, style),\n        icon: /*#__PURE__*/_jsx(PlusOutlined, {})\n      }, restButtonProps), {}, {\n        children: creatorButtonText || intl.getMessage('editableTable.action.add', '添加一行数据')\n      }))\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [recordCreatorProps, maxLength, value === null || value === void 0 ? void 0 : value.length]);\n  var buttonRenderProps = useMemo(function () {\n    if (!creatorButtonDom) {\n      return {};\n    }\n    if (isTop) {\n      return {\n        components: {\n          header: {\n            wrapper: function wrapper(_ref2) {\n              var _rest$columns;\n              var className = _ref2.className,\n                children = _ref2.children;\n              return /*#__PURE__*/_jsxs(\"thead\", {\n                className: className,\n                children: [children, /*#__PURE__*/_jsxs(\"tr\", {\n                  style: {\n                    position: 'relative'\n                  },\n                  children: [/*#__PURE__*/_jsx(\"td\", {\n                    colSpan: 0,\n                    style: {\n                      visibility: 'hidden'\n                    },\n                    children: creatorButtonDom\n                  }), /*#__PURE__*/_jsx(\"td\", {\n                    style: {\n                      position: 'absolute',\n                      left: 0,\n                      width: '100%'\n                    },\n                    colSpan: (_rest$columns = rest.columns) === null || _rest$columns === void 0 ? void 0 : _rest$columns.length,\n                    children: creatorButtonDom\n                  })]\n                })]\n              });\n            }\n          }\n        }\n      };\n    }\n    return {\n      tableViewRender: function tableViewRender(_, dom) {\n        var _props$tableViewRende, _props$tableViewRende2;\n        return /*#__PURE__*/_jsxs(_Fragment, {\n          children: [(_props$tableViewRende = (_props$tableViewRende2 = props.tableViewRender) === null || _props$tableViewRende2 === void 0 ? void 0 : _props$tableViewRende2.call(props, _, dom)) !== null && _props$tableViewRende !== void 0 ? _props$tableViewRende : dom, creatorButtonDom]\n        });\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isTop, creatorButtonDom]);\n  var editableProps = _objectSpread({}, props.editable);\n\n  /**\n   * 防止闭包的onchange\n   *\n   * >>>>>>为了性能好辛苦\n   */\n  var newOnValueChange = useRefFunction(function (r, dataSource) {\n    var _props$editable3, _props$editable3$onVa, _props$onValuesChange;\n    (_props$editable3 = props.editable) === null || _props$editable3 === void 0 || (_props$editable3$onVa = _props$editable3.onValuesChange) === null || _props$editable3$onVa === void 0 || _props$editable3$onVa.call(_props$editable3, r, dataSource);\n    (_props$onValuesChange = props.onValuesChange) === null || _props$onValuesChange === void 0 || _props$onValuesChange.call(props, dataSource, r);\n    if (props.controlled) {\n      var _props$onChange;\n      props === null || props === void 0 || (_props$onChange = props.onChange) === null || _props$onChange === void 0 || _props$onChange.call(props, dataSource);\n    }\n  });\n  if (props !== null && props !== void 0 && props.onValuesChange || (_props$editable4 = props.editable) !== null && _props$editable4 !== void 0 && _props$editable4.onValuesChange ||\n  // 受控模式需要触发 onchange\n  props.controlled && props !== null && props !== void 0 && props.onChange) {\n    editableProps.onValuesChange = newOnValueChange;\n  }\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(EditableTableActionContext.Provider, {\n      value: actionRef,\n      children: /*#__PURE__*/_jsx(ProTable, _objectSpread(_objectSpread(_objectSpread({\n        search: false,\n        options: false,\n        pagination: false,\n        rowKey: rowKey,\n        revalidateOnFocus: false\n      }, rest), buttonRenderProps), {}, {\n        tableLayout: \"fixed\",\n        actionRef: actionRef,\n        onChange: onTableChange,\n        editable: _objectSpread(_objectSpread({}, editableProps), {}, {\n          formProps: _objectSpread({\n            formRef: formRef\n          }, editableProps.formProps)\n        }),\n        dataSource: value,\n        onDataSourceChange: function onDataSourceChange(dataSource) {\n          setValue(dataSource);\n          /**\n           * 如果是top，需要重新设置一下 form，不然会导致 id 相同数据混淆\n           */\n          if (props.name && position === 'top') {\n            var _formRef$current6;\n            var newValue = set({}, [props.name].flat(1).filter(Boolean), dataSource);\n            (_formRef$current6 = formRef.current) === null || _formRef$current6 === void 0 || _formRef$current6.setFieldsValue(newValue);\n          }\n        }\n      }))\n    }), props.name ? /*#__PURE__*/_jsx(ProFormDependency, {\n      name: [props.name],\n      children: function children(changeValue) {\n        var _props$editable5, _props$editable5$onVa;\n        if (!preData.current) {\n          preData.current = value;\n          return null;\n        }\n        var list = get(changeValue, [props.name].flat(1));\n        var changeItem = list === null || list === void 0 ? void 0 : list.find(function (item, index) {\n          var _preData$current;\n          return !isDeepEqualReact(item, (_preData$current = preData.current) === null || _preData$current === void 0 ? void 0 : _preData$current[index]);\n        });\n        preData.current = value;\n        if (!changeItem) return null;\n        // 如果不存在 preData 说明是初始化，此时不需要触发 onValuesChange\n        props === null || props === void 0 || (_props$editable5 = props.editable) === null || _props$editable5 === void 0 || (_props$editable5$onVa = _props$editable5.onValuesChange) === null || _props$editable5$onVa === void 0 || _props$editable5$onVa.call(_props$editable5, changeItem, list);\n        return null;\n      }\n    }) : null]\n  });\n}\n\n/**\n * 可以直接放到 Form 中的可编辑表格\n * A React component that is used to create a table.\n * @param props\n */\nfunction FieldEditableTable(props) {\n  var form = ProForm.useFormInstance();\n  if (!props.name) return /*#__PURE__*/_jsx(EditableTable, _objectSpread({\n    tableLayout: \"fixed\",\n    scroll: {\n      x: 'max-content'\n    }\n  }, props));\n  return /*#__PURE__*/_jsx(Form.Item, _objectSpread(_objectSpread({\n    style: {\n      maxWidth: '100%'\n    }\n  }, props === null || props === void 0 ? void 0 : props.formItemProps), {}, {\n    name: props.name,\n    shouldUpdate: function shouldUpdate(prev, next) {\n      var name = [props.name].flat(1);\n      try {\n        return JSON.stringify(get(prev, name)) !== JSON.stringify(get(next, name));\n      } catch (error) {\n        return true;\n      }\n    },\n    children: /*#__PURE__*/_jsx(EditableTable, _objectSpread(_objectSpread({\n      tableLayout: \"fixed\",\n      scroll: {\n        x: 'max-content'\n      }\n    }, props), {}, {\n      editable: _objectSpread(_objectSpread({}, props.editable), {}, {\n        form: form\n      })\n    }))\n  }));\n}\nFieldEditableTable.RecordCreator = RecordCreator;\nexport default FieldEditableTable;","map":{"version":3,"names":["_defineProperty","_slicedToArray","_objectWithoutProperties","_regeneratorRuntime","_asyncToGenerator","_objectSpread","_excluded","_excluded2","PlusOutlined","ProForm","ProFormDependency","useIntl","isDeepEqualReact","runFunction","stringify","useRefFunction","Button","Form","useMergedState","get","set","React","useContext","useEffect","useImperativeHandle","useMemo","useRef","ProTable","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditableTableActionContext","createContext","undefined","RecordCreator","props","children","record","position","newRecordType","parentKey","actionRef","cloneElement","onClick","_onClick","mark","_callee","e","_children$props$onCli","_children$props","_actionRef$current","isOk","wrap","_callee$","_context","prev","next","call","sent","abrupt","current","addEditRecord","stop","_x","apply","arguments","EditableTable","_props$editable2","_props$editable4","intl","onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef","rest","preData","formRef","_useMergedState","value","_useMergedState2","setValue","getRowKey","index","coverRowKey","finlayRowKey","name","length","rowData","_rowIndex","findIndex","item","_getRowKey","toString","getRowData","rowIndex","_finlayRowKey$toStrin","_formRef$current","Error","rowKeyName","flat","filter","Boolean","getFieldValue","getRowsData","_formRef$current3","Array","isArray","_formRef$current2","getFieldsValue","Object","keys","map","key","setRowData","data","_finlayRowKey$toStrin2","_formRef$current4","newRowData","assign","updateValues","setFieldsValue","forEach","_formRef$current5","concat","_props$editable","editable","form","_ref","creatorButtonText","style","restButtonProps","isTop","creatorButtonDom","type","display","margin","width","icon","getMessage","buttonRenderProps","components","header","wrapper","_ref2","_rest$columns","className","colSpan","visibility","left","columns","tableViewRender","_","dom","_props$tableViewRende","_props$tableViewRende2","editableProps","newOnValueChange","r","dataSource","_props$editable3","_props$editable3$onVa","_props$onValuesChange","onValuesChange","_props$onChange","Provider","search","options","pagination","revalidateOnFocus","tableLayout","formProps","onDataSourceChange","_formRef$current6","newValue","changeValue","_props$editable5","_props$editable5$onVa","list","changeItem","find","_preData$current","FieldEditableTable","useFormInstance","scroll","x","Item","maxWidth","shouldUpdate","JSON","error"],"sources":["/Users/phanluc/admin-web-fe/node_modules/@ant-design/pro-table/es/components/EditableTable/index.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nvar _excluded = [\"onTableChange\", \"maxLength\", \"formItemProps\", \"recordCreatorProps\", \"rowKey\", \"controlled\", \"defaultValue\", \"onChange\", \"editableFormRef\"],\n  _excluded2 = [\"record\", \"position\", \"creatorButtonText\", \"newRecordType\", \"parentKey\", \"style\"];\nimport { PlusOutlined } from '@ant-design/icons';\nimport ProForm, { ProFormDependency } from '@ant-design/pro-form';\nimport { useIntl } from '@ant-design/pro-provider';\nimport { isDeepEqualReact, runFunction, stringify, useRefFunction } from '@ant-design/pro-utils';\nimport { Button, Form } from 'antd';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport get from \"rc-util/es/utils/get\";\nimport set from \"rc-util/es/utils/set\";\nimport React, { useContext, useEffect, useImperativeHandle, useMemo, useRef } from 'react';\nimport ProTable from \"../../Table\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar EditableTableActionContext = /*#__PURE__*/React.createContext(undefined);\n\n/** 可编辑表格的按钮 */\nfunction RecordCreator(props) {\n  var children = props.children,\n    record = props.record,\n    position = props.position,\n    newRecordType = props.newRecordType,\n    parentKey = props.parentKey;\n  var actionRef = useContext(EditableTableActionContext);\n  return /*#__PURE__*/React.cloneElement(children, _objectSpread(_objectSpread({}, children.props), {}, {\n    onClick: function () {\n      var _onClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n        var _children$props$onCli, _children$props, _actionRef$current;\n        var isOk;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return (_children$props$onCli = (_children$props = children.props).onClick) === null || _children$props$onCli === void 0 ? void 0 : _children$props$onCli.call(_children$props, e);\n            case 2:\n              isOk = _context.sent;\n              if (!(isOk === false)) {\n                _context.next = 5;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 5:\n              actionRef === null || actionRef === void 0 || (_actionRef$current = actionRef.current) === null || _actionRef$current === void 0 || _actionRef$current.addEditRecord(record, {\n                position: position,\n                newRecordType: newRecordType,\n                parentKey: parentKey\n              });\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function onClick(_x) {\n        return _onClick.apply(this, arguments);\n      }\n      return onClick;\n    }()\n  }));\n}\n\n/**\n * 可以直接放到 Form 中的可编辑表格\n * A React component that is used to create a table.\n * @param props\n */\nfunction EditableTable(props) {\n  var _props$editable2, _props$editable4;\n  var intl = useIntl();\n  var onTableChange = props.onTableChange,\n    maxLength = props.maxLength,\n    formItemProps = props.formItemProps,\n    recordCreatorProps = props.recordCreatorProps,\n    rowKey = props.rowKey,\n    controlled = props.controlled,\n    defaultValue = props.defaultValue,\n    onChange = props.onChange,\n    editableFormRef = props.editableFormRef,\n    rest = _objectWithoutProperties(props, _excluded);\n  var preData = useRef(undefined);\n  var actionRef = useRef();\n  var formRef = useRef();\n\n  // 设置 ref\n  useImperativeHandle(rest.actionRef, function () {\n    return actionRef.current;\n  }, [actionRef.current]);\n  var _useMergedState = useMergedState(function () {\n      return props.value || defaultValue || [];\n    }, {\n      value: props.value,\n      onChange: props.onChange\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    value = _useMergedState2[0],\n    setValue = _useMergedState2[1];\n  var getRowKey = React.useMemo(function () {\n    if (typeof rowKey === 'function') {\n      return rowKey;\n    }\n    return function (record, index) {\n      return record[rowKey] || index;\n    };\n  }, [rowKey]);\n\n  /**\n   * 根据不同的情况返回不同的 rowKey\n   * @param finlayRowKey\n   * @returns string | number\n   */\n  var coverRowKey = useRefFunction(function (finlayRowKey) {\n    /**\n     * 如果是 prop.name 的模式，就需要把行号转化成具体的rowKey。\n     */\n    if (typeof finlayRowKey === 'number' && !props.name) {\n      if (finlayRowKey >= value.length) return finlayRowKey;\n      var rowData = value && value[finlayRowKey];\n      return getRowKey === null || getRowKey === void 0 ? void 0 : getRowKey(rowData, finlayRowKey);\n    }\n\n    /**\n     * 如果是 prop.name 的模式，就直接返回行号\n     */\n    if ((typeof finlayRowKey === 'string' || finlayRowKey >= value.length) && props.name) {\n      var _rowIndex = value.findIndex(function (item, index) {\n        var _getRowKey;\n        return (getRowKey === null || getRowKey === void 0 || (_getRowKey = getRowKey(item, index)) === null || _getRowKey === void 0 ? void 0 : _getRowKey.toString()) === (finlayRowKey === null || finlayRowKey === void 0 ? void 0 : finlayRowKey.toString());\n      });\n      if (_rowIndex !== -1) return _rowIndex;\n    }\n    return finlayRowKey;\n  });\n\n  // 设置 editableFormRef\n  useImperativeHandle(editableFormRef, function () {\n    /**\n     * 获取一行数据的\n     * @param rowIndex\n     * @returns T | undefined\n     */\n    var getRowData = function getRowData(rowIndex) {\n      var _finlayRowKey$toStrin, _formRef$current;\n      if (rowIndex == undefined) {\n        throw new Error('rowIndex is required');\n      }\n      var finlayRowKey = coverRowKey(rowIndex);\n      var rowKeyName = [props.name, (_finlayRowKey$toStrin = finlayRowKey === null || finlayRowKey === void 0 ? void 0 : finlayRowKey.toString()) !== null && _finlayRowKey$toStrin !== void 0 ? _finlayRowKey$toStrin : ''].flat(1).filter(Boolean);\n      return (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.getFieldValue(rowKeyName);\n    };\n\n    /**\n     * 获取整个 table 的数据\n     * @returns T[] | undefined\n     */\n    var getRowsData = function getRowsData() {\n      var _formRef$current3;\n      var rowKeyName = [props.name].flat(1).filter(Boolean);\n      if (Array.isArray(rowKeyName) && rowKeyName.length === 0) {\n        var _formRef$current2;\n        var rowData = (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.getFieldsValue();\n        if (Array.isArray(rowData)) return rowData;\n        return Object.keys(rowData).map(function (key) {\n          return rowData[key];\n        });\n      }\n      return (_formRef$current3 = formRef.current) === null || _formRef$current3 === void 0 ? void 0 : _formRef$current3.getFieldValue(rowKeyName);\n    };\n    return _objectSpread(_objectSpread({}, formRef.current), {}, {\n      getRowData: getRowData,\n      getRowsData: getRowsData,\n      /**\n       * 设置一行的数据，会将数据进行简单的 merge\n       * @param rowIndex\n       * @param data\n       * @returns void\n       */\n      setRowData: function setRowData(rowIndex, data) {\n        var _finlayRowKey$toStrin2, _formRef$current4;\n        if (rowIndex == undefined) {\n          throw new Error('rowIndex is required');\n        }\n        var finlayRowKey = coverRowKey(rowIndex);\n        var rowKeyName = [props.name, (_finlayRowKey$toStrin2 = finlayRowKey === null || finlayRowKey === void 0 ? void 0 : finlayRowKey.toString()) !== null && _finlayRowKey$toStrin2 !== void 0 ? _finlayRowKey$toStrin2 : ''].flat(1).filter(Boolean);\n        var newRowData = Object.assign({}, _objectSpread(_objectSpread({}, getRowData(rowIndex)), data || {}));\n        var updateValues = set({}, rowKeyName, newRowData);\n        (_formRef$current4 = formRef.current) === null || _formRef$current4 === void 0 || _formRef$current4.setFieldsValue(updateValues);\n        return true;\n      }\n    });\n  }, [coverRowKey, props.name, formRef.current]);\n  useEffect(function () {\n    if (!props.controlled) return;\n    (value || []).forEach(function (current, index) {\n      var _formRef$current5;\n      (_formRef$current5 = formRef.current) === null || _formRef$current5 === void 0 || _formRef$current5.setFieldsValue(_defineProperty({}, \"\".concat(getRowKey(current, index)), current));\n    }, {});\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [stringify(value), props.controlled]);\n  useEffect(function () {\n    if (props.name) {\n      var _props$editable;\n      formRef.current = props === null || props === void 0 || (_props$editable = props.editable) === null || _props$editable === void 0 ? void 0 : _props$editable.form;\n    }\n  }, [(_props$editable2 = props.editable) === null || _props$editable2 === void 0 ? void 0 : _props$editable2.form, props.name]);\n  var _ref = recordCreatorProps || {},\n    record = _ref.record,\n    position = _ref.position,\n    creatorButtonText = _ref.creatorButtonText,\n    newRecordType = _ref.newRecordType,\n    parentKey = _ref.parentKey,\n    style = _ref.style,\n    restButtonProps = _objectWithoutProperties(_ref, _excluded2);\n  var isTop = position === 'top';\n  var creatorButtonDom = useMemo(function () {\n    if (typeof maxLength === 'number' && maxLength <= (value === null || value === void 0 ? void 0 : value.length)) {\n      return false;\n    }\n    return recordCreatorProps !== false && /*#__PURE__*/_jsx(RecordCreator, {\n      record: runFunction(record, value === null || value === void 0 ? void 0 : value.length, value) || {},\n      position: position,\n      parentKey: runFunction(parentKey, value === null || value === void 0 ? void 0 : value.length, value),\n      newRecordType: newRecordType,\n      children: /*#__PURE__*/_jsx(Button, _objectSpread(_objectSpread({\n        type: \"dashed\",\n        style: _objectSpread({\n          display: 'block',\n          margin: '10px 0',\n          width: '100%'\n        }, style),\n        icon: /*#__PURE__*/_jsx(PlusOutlined, {})\n      }, restButtonProps), {}, {\n        children: creatorButtonText || intl.getMessage('editableTable.action.add', '添加一行数据')\n      }))\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [recordCreatorProps, maxLength, value === null || value === void 0 ? void 0 : value.length]);\n  var buttonRenderProps = useMemo(function () {\n    if (!creatorButtonDom) {\n      return {};\n    }\n    if (isTop) {\n      return {\n        components: {\n          header: {\n            wrapper: function wrapper(_ref2) {\n              var _rest$columns;\n              var className = _ref2.className,\n                children = _ref2.children;\n              return /*#__PURE__*/_jsxs(\"thead\", {\n                className: className,\n                children: [children, /*#__PURE__*/_jsxs(\"tr\", {\n                  style: {\n                    position: 'relative'\n                  },\n                  children: [/*#__PURE__*/_jsx(\"td\", {\n                    colSpan: 0,\n                    style: {\n                      visibility: 'hidden'\n                    },\n                    children: creatorButtonDom\n                  }), /*#__PURE__*/_jsx(\"td\", {\n                    style: {\n                      position: 'absolute',\n                      left: 0,\n                      width: '100%'\n                    },\n                    colSpan: (_rest$columns = rest.columns) === null || _rest$columns === void 0 ? void 0 : _rest$columns.length,\n                    children: creatorButtonDom\n                  })]\n                })]\n              });\n            }\n          }\n        }\n      };\n    }\n    return {\n      tableViewRender: function tableViewRender(_, dom) {\n        var _props$tableViewRende, _props$tableViewRende2;\n        return /*#__PURE__*/_jsxs(_Fragment, {\n          children: [(_props$tableViewRende = (_props$tableViewRende2 = props.tableViewRender) === null || _props$tableViewRende2 === void 0 ? void 0 : _props$tableViewRende2.call(props, _, dom)) !== null && _props$tableViewRende !== void 0 ? _props$tableViewRende : dom, creatorButtonDom]\n        });\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isTop, creatorButtonDom]);\n  var editableProps = _objectSpread({}, props.editable);\n\n  /**\n   * 防止闭包的onchange\n   *\n   * >>>>>>为了性能好辛苦\n   */\n  var newOnValueChange = useRefFunction(function (r, dataSource) {\n    var _props$editable3, _props$editable3$onVa, _props$onValuesChange;\n    (_props$editable3 = props.editable) === null || _props$editable3 === void 0 || (_props$editable3$onVa = _props$editable3.onValuesChange) === null || _props$editable3$onVa === void 0 || _props$editable3$onVa.call(_props$editable3, r, dataSource);\n    (_props$onValuesChange = props.onValuesChange) === null || _props$onValuesChange === void 0 || _props$onValuesChange.call(props, dataSource, r);\n    if (props.controlled) {\n      var _props$onChange;\n      props === null || props === void 0 || (_props$onChange = props.onChange) === null || _props$onChange === void 0 || _props$onChange.call(props, dataSource);\n    }\n  });\n  if (props !== null && props !== void 0 && props.onValuesChange || (_props$editable4 = props.editable) !== null && _props$editable4 !== void 0 && _props$editable4.onValuesChange ||\n  // 受控模式需要触发 onchange\n  props.controlled && props !== null && props !== void 0 && props.onChange) {\n    editableProps.onValuesChange = newOnValueChange;\n  }\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(EditableTableActionContext.Provider, {\n      value: actionRef,\n      children: /*#__PURE__*/_jsx(ProTable, _objectSpread(_objectSpread(_objectSpread({\n        search: false,\n        options: false,\n        pagination: false,\n        rowKey: rowKey,\n        revalidateOnFocus: false\n      }, rest), buttonRenderProps), {}, {\n        tableLayout: \"fixed\",\n        actionRef: actionRef,\n        onChange: onTableChange,\n        editable: _objectSpread(_objectSpread({}, editableProps), {}, {\n          formProps: _objectSpread({\n            formRef: formRef\n          }, editableProps.formProps)\n        }),\n        dataSource: value,\n        onDataSourceChange: function onDataSourceChange(dataSource) {\n          setValue(dataSource);\n          /**\n           * 如果是top，需要重新设置一下 form，不然会导致 id 相同数据混淆\n           */\n          if (props.name && position === 'top') {\n            var _formRef$current6;\n            var newValue = set({}, [props.name].flat(1).filter(Boolean), dataSource);\n            (_formRef$current6 = formRef.current) === null || _formRef$current6 === void 0 || _formRef$current6.setFieldsValue(newValue);\n          }\n        }\n      }))\n    }), props.name ? /*#__PURE__*/_jsx(ProFormDependency, {\n      name: [props.name],\n      children: function children(changeValue) {\n        var _props$editable5, _props$editable5$onVa;\n        if (!preData.current) {\n          preData.current = value;\n          return null;\n        }\n        var list = get(changeValue, [props.name].flat(1));\n        var changeItem = list === null || list === void 0 ? void 0 : list.find(function (item, index) {\n          var _preData$current;\n          return !isDeepEqualReact(item, (_preData$current = preData.current) === null || _preData$current === void 0 ? void 0 : _preData$current[index]);\n        });\n        preData.current = value;\n        if (!changeItem) return null;\n        // 如果不存在 preData 说明是初始化，此时不需要触发 onValuesChange\n        props === null || props === void 0 || (_props$editable5 = props.editable) === null || _props$editable5 === void 0 || (_props$editable5$onVa = _props$editable5.onValuesChange) === null || _props$editable5$onVa === void 0 || _props$editable5$onVa.call(_props$editable5, changeItem, list);\n        return null;\n      }\n    }) : null]\n  });\n}\n\n/**\n * 可以直接放到 Form 中的可编辑表格\n * A React component that is used to create a table.\n * @param props\n */\nfunction FieldEditableTable(props) {\n  var form = ProForm.useFormInstance();\n  if (!props.name) return /*#__PURE__*/_jsx(EditableTable, _objectSpread({\n    tableLayout: \"fixed\",\n    scroll: {\n      x: 'max-content'\n    }\n  }, props));\n  return /*#__PURE__*/_jsx(Form.Item, _objectSpread(_objectSpread({\n    style: {\n      maxWidth: '100%'\n    }\n  }, props === null || props === void 0 ? void 0 : props.formItemProps), {}, {\n    name: props.name,\n    shouldUpdate: function shouldUpdate(prev, next) {\n      var name = [props.name].flat(1);\n      try {\n        return JSON.stringify(get(prev, name)) !== JSON.stringify(get(next, name));\n      } catch (error) {\n        return true;\n      }\n    },\n    children: /*#__PURE__*/_jsx(EditableTable, _objectSpread(_objectSpread({\n      tableLayout: \"fixed\",\n      scroll: {\n        x: 'max-content'\n      }\n    }, props), {}, {\n      editable: _objectSpread(_objectSpread({}, props.editable), {}, {\n        form: form\n      })\n    }))\n  }));\n}\nFieldEditableTable.RecordCreator = RecordCreator;\nexport default FieldEditableTable;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}