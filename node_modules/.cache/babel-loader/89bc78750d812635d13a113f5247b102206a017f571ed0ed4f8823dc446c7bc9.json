{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { isNil } from '@ant-design/pro-utils';\nimport { InputNumber } from 'antd';\nimport omit from 'omit.js';\nimport React, { useCallback } from 'react';\n// 兼容代码-----------\nimport { useIntl } from '@ant-design/pro-provider';\nimport \"antd/es/input-number/style\";\n//----------------------\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n/**\n * 数字组件\n *\n * @param FieldDigitProps {\n *     text: number;\n *     moneySymbol?: string; }\n */\nvar FieldDigit = function FieldDigit(_ref, ref) {\n  var text = _ref.text,\n    type = _ref.mode,\n    render = _ref.render,\n    placeholder = _ref.placeholder,\n    renderFormItem = _ref.renderFormItem,\n    fieldProps = _ref.fieldProps;\n  var intl = useIntl();\n  var placeholderValue = placeholder || intl.getMessage('tableForm.inputPlaceholder', '请输入');\n  var proxyChange = useCallback(function (value) {\n    var val = value !== null && value !== void 0 ? value : undefined;\n    if (!fieldProps.stringMode && typeof val === 'string') {\n      val = Number(val);\n    }\n    if (typeof val === 'number' && !isNil(val) && !isNil(fieldProps.precision)) {\n      val = Number(val.toFixed(fieldProps.precision));\n    }\n    return val;\n  }, [fieldProps]);\n  if (type === 'read') {\n    var _fieldProps$formatter;\n    var fractionDigits = {};\n    if (fieldProps !== null && fieldProps !== void 0 && fieldProps.precision) {\n      fractionDigits = {\n        minimumFractionDigits: Number(fieldProps.precision),\n        maximumFractionDigits: Number(fieldProps.precision)\n      };\n    }\n    var digit = new Intl.NumberFormat(undefined, _objectSpread(_objectSpread({}, fractionDigits), (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.intlProps) || {})).format(Number(text));\n\n    // 如果是 string 模式，什么都不要处理了\n    var dom = !(fieldProps !== null && fieldProps !== void 0 && fieldProps.stringMode) ? /*#__PURE__*/_jsx(\"span\", {\n      ref: ref,\n      children: (fieldProps === null || fieldProps === void 0 || (_fieldProps$formatter = fieldProps.formatter) === null || _fieldProps$formatter === void 0 ? void 0 : _fieldProps$formatter.call(fieldProps, digit)) || digit\n    }) : /*#__PURE__*/_jsx(\"span\", {\n      children: text\n    });\n    if (render) {\n      return render(text, _objectSpread({\n        mode: type\n      }, fieldProps), dom);\n    }\n    return dom;\n  }\n  if (type === 'edit' || type === 'update') {\n    var _dom = /*#__PURE__*/_jsx(InputNumber, _objectSpread(_objectSpread({\n      ref: ref,\n      min: 0,\n      placeholder: placeholderValue\n    }, omit(fieldProps, ['onChange', 'onBlur'])), {}, {\n      onChange: function onChange(e) {\n        var _fieldProps$onChange;\n        return fieldProps === null || fieldProps === void 0 || (_fieldProps$onChange = fieldProps.onChange) === null || _fieldProps$onChange === void 0 ? void 0 : _fieldProps$onChange.call(fieldProps, proxyChange(e));\n      },\n      onBlur: function onBlur(e) {\n        var _fieldProps$onBlur;\n        return fieldProps === null || fieldProps === void 0 || (_fieldProps$onBlur = fieldProps.onBlur) === null || _fieldProps$onBlur === void 0 ? void 0 : _fieldProps$onBlur.call(fieldProps, proxyChange(e.target.value));\n      }\n    }));\n    if (renderFormItem) {\n      return renderFormItem(text, _objectSpread({\n        mode: type\n      }, fieldProps), _dom);\n    }\n    return _dom;\n  }\n  return null;\n};\nexport default /*#__PURE__*/React.forwardRef(FieldDigit);","map":{"version":3,"names":["_objectSpread","isNil","InputNumber","omit","React","useCallback","useIntl","jsx","_jsx","FieldDigit","_ref","ref","text","type","mode","render","placeholder","renderFormItem","fieldProps","intl","placeholderValue","getMessage","proxyChange","value","val","undefined","stringMode","Number","precision","toFixed","_fieldProps$formatter","fractionDigits","minimumFractionDigits","maximumFractionDigits","digit","Intl","NumberFormat","intlProps","format","dom","children","formatter","call","_dom","min","onChange","e","_fieldProps$onChange","onBlur","_fieldProps$onBlur","target","forwardRef"],"sources":["/Users/phanluc/admin-web-fe/node_modules/@ant-design/pro-field/es/components/Digit/index.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { isNil } from '@ant-design/pro-utils';\nimport { InputNumber } from 'antd';\nimport omit from 'omit.js';\nimport React, { useCallback } from 'react';\n// 兼容代码-----------\nimport { useIntl } from '@ant-design/pro-provider';\nimport \"antd/es/input-number/style\";\n//----------------------\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n/**\n * 数字组件\n *\n * @param FieldDigitProps {\n *     text: number;\n *     moneySymbol?: string; }\n */\nvar FieldDigit = function FieldDigit(_ref, ref) {\n  var text = _ref.text,\n    type = _ref.mode,\n    render = _ref.render,\n    placeholder = _ref.placeholder,\n    renderFormItem = _ref.renderFormItem,\n    fieldProps = _ref.fieldProps;\n  var intl = useIntl();\n  var placeholderValue = placeholder || intl.getMessage('tableForm.inputPlaceholder', '请输入');\n  var proxyChange = useCallback(function (value) {\n    var val = value !== null && value !== void 0 ? value : undefined;\n    if (!fieldProps.stringMode && typeof val === 'string') {\n      val = Number(val);\n    }\n    if (typeof val === 'number' && !isNil(val) && !isNil(fieldProps.precision)) {\n      val = Number(val.toFixed(fieldProps.precision));\n    }\n    return val;\n  }, [fieldProps]);\n  if (type === 'read') {\n    var _fieldProps$formatter;\n    var fractionDigits = {};\n    if (fieldProps !== null && fieldProps !== void 0 && fieldProps.precision) {\n      fractionDigits = {\n        minimumFractionDigits: Number(fieldProps.precision),\n        maximumFractionDigits: Number(fieldProps.precision)\n      };\n    }\n    var digit = new Intl.NumberFormat(undefined, _objectSpread(_objectSpread({}, fractionDigits), (fieldProps === null || fieldProps === void 0 ? void 0 : fieldProps.intlProps) || {})).format(Number(text));\n\n    // 如果是 string 模式，什么都不要处理了\n    var dom = !(fieldProps !== null && fieldProps !== void 0 && fieldProps.stringMode) ? /*#__PURE__*/_jsx(\"span\", {\n      ref: ref,\n      children: (fieldProps === null || fieldProps === void 0 || (_fieldProps$formatter = fieldProps.formatter) === null || _fieldProps$formatter === void 0 ? void 0 : _fieldProps$formatter.call(fieldProps, digit)) || digit\n    }) : /*#__PURE__*/_jsx(\"span\", {\n      children: text\n    });\n    if (render) {\n      return render(text, _objectSpread({\n        mode: type\n      }, fieldProps), dom);\n    }\n    return dom;\n  }\n  if (type === 'edit' || type === 'update') {\n    var _dom = /*#__PURE__*/_jsx(InputNumber, _objectSpread(_objectSpread({\n      ref: ref,\n      min: 0,\n      placeholder: placeholderValue\n    }, omit(fieldProps, ['onChange', 'onBlur'])), {}, {\n      onChange: function onChange(e) {\n        var _fieldProps$onChange;\n        return fieldProps === null || fieldProps === void 0 || (_fieldProps$onChange = fieldProps.onChange) === null || _fieldProps$onChange === void 0 ? void 0 : _fieldProps$onChange.call(fieldProps, proxyChange(e));\n      },\n      onBlur: function onBlur(e) {\n        var _fieldProps$onBlur;\n        return fieldProps === null || fieldProps === void 0 || (_fieldProps$onBlur = fieldProps.onBlur) === null || _fieldProps$onBlur === void 0 ? void 0 : _fieldProps$onBlur.call(fieldProps, proxyChange(e.target.value));\n      }\n    }));\n    if (renderFormItem) {\n      return renderFormItem(text, _objectSpread({\n        mode: type\n      }, fieldProps), _dom);\n    }\n    return _dom;\n  }\n  return null;\n};\nexport default /*#__PURE__*/React.forwardRef(FieldDigit);"],"mappings":"AAAA,OAAOA,aAAa,MAAM,0CAA0C;AACpE,SAASC,KAAK,QAAQ,uBAAuB;AAC7C,SAASC,WAAW,QAAQ,MAAM;AAClC,OAAOC,IAAI,MAAM,SAAS;AAC1B,OAAOC,KAAK,IAAIC,WAAW,QAAQ,OAAO;AAC1C;AACA,SAASC,OAAO,QAAQ,0BAA0B;AAClD,OAAO,4BAA4B;AACnC;AACA,SAASC,GAAG,IAAIC,IAAI,QAAQ,mBAAmB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,UAAU,GAAG,SAASA,UAAUA,CAACC,IAAI,EAAEC,GAAG,EAAE;EAC9C,IAAIC,IAAI,GAAGF,IAAI,CAACE,IAAI;IAClBC,IAAI,GAAGH,IAAI,CAACI,IAAI;IAChBC,MAAM,GAAGL,IAAI,CAACK,MAAM;IACpBC,WAAW,GAAGN,IAAI,CAACM,WAAW;IAC9BC,cAAc,GAAGP,IAAI,CAACO,cAAc;IACpCC,UAAU,GAAGR,IAAI,CAACQ,UAAU;EAC9B,IAAIC,IAAI,GAAGb,OAAO,CAAC,CAAC;EACpB,IAAIc,gBAAgB,GAAGJ,WAAW,IAAIG,IAAI,CAACE,UAAU,CAAC,4BAA4B,EAAE,KAAK,CAAC;EAC1F,IAAIC,WAAW,GAAGjB,WAAW,CAAC,UAAUkB,KAAK,EAAE;IAC7C,IAAIC,GAAG,GAAGD,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAGA,KAAK,GAAGE,SAAS;IAChE,IAAI,CAACP,UAAU,CAACQ,UAAU,IAAI,OAAOF,GAAG,KAAK,QAAQ,EAAE;MACrDA,GAAG,GAAGG,MAAM,CAACH,GAAG,CAAC;IACnB;IACA,IAAI,OAAOA,GAAG,KAAK,QAAQ,IAAI,CAACvB,KAAK,CAACuB,GAAG,CAAC,IAAI,CAACvB,KAAK,CAACiB,UAAU,CAACU,SAAS,CAAC,EAAE;MAC1EJ,GAAG,GAAGG,MAAM,CAACH,GAAG,CAACK,OAAO,CAACX,UAAU,CAACU,SAAS,CAAC,CAAC;IACjD;IACA,OAAOJ,GAAG;EACZ,CAAC,EAAE,CAACN,UAAU,CAAC,CAAC;EAChB,IAAIL,IAAI,KAAK,MAAM,EAAE;IACnB,IAAIiB,qBAAqB;IACzB,IAAIC,cAAc,GAAG,CAAC,CAAC;IACvB,IAAIb,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,IAAIA,UAAU,CAACU,SAAS,EAAE;MACxEG,cAAc,GAAG;QACfC,qBAAqB,EAAEL,MAAM,CAACT,UAAU,CAACU,SAAS,CAAC;QACnDK,qBAAqB,EAAEN,MAAM,CAACT,UAAU,CAACU,SAAS;MACpD,CAAC;IACH;IACA,IAAIM,KAAK,GAAG,IAAIC,IAAI,CAACC,YAAY,CAACX,SAAS,EAAEzB,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE+B,cAAc,CAAC,EAAE,CAACb,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACmB,SAAS,KAAK,CAAC,CAAC,CAAC,CAAC,CAACC,MAAM,CAACX,MAAM,CAACf,IAAI,CAAC,CAAC;;IAEzM;IACA,IAAI2B,GAAG,GAAG,EAAErB,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,IAAIA,UAAU,CAACQ,UAAU,CAAC,GAAG,aAAalB,IAAI,CAAC,MAAM,EAAE;MAC7GG,GAAG,EAAEA,GAAG;MACR6B,QAAQ,EAAE,CAACtB,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,IAAI,CAACY,qBAAqB,GAAGZ,UAAU,CAACuB,SAAS,MAAM,IAAI,IAAIX,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACY,IAAI,CAACxB,UAAU,EAAEgB,KAAK,CAAC,KAAKA;IACtN,CAAC,CAAC,GAAG,aAAa1B,IAAI,CAAC,MAAM,EAAE;MAC7BgC,QAAQ,EAAE5B;IACZ,CAAC,CAAC;IACF,IAAIG,MAAM,EAAE;MACV,OAAOA,MAAM,CAACH,IAAI,EAAEZ,aAAa,CAAC;QAChCc,IAAI,EAAED;MACR,CAAC,EAAEK,UAAU,CAAC,EAAEqB,GAAG,CAAC;IACtB;IACA,OAAOA,GAAG;EACZ;EACA,IAAI1B,IAAI,KAAK,MAAM,IAAIA,IAAI,KAAK,QAAQ,EAAE;IACxC,IAAI8B,IAAI,GAAG,aAAanC,IAAI,CAACN,WAAW,EAAEF,aAAa,CAACA,aAAa,CAAC;MACpEW,GAAG,EAAEA,GAAG;MACRiC,GAAG,EAAE,CAAC;MACN5B,WAAW,EAAEI;IACf,CAAC,EAAEjB,IAAI,CAACe,UAAU,EAAE,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;MAChD2B,QAAQ,EAAE,SAASA,QAAQA,CAACC,CAAC,EAAE;QAC7B,IAAIC,oBAAoB;QACxB,OAAO7B,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,IAAI,CAAC6B,oBAAoB,GAAG7B,UAAU,CAAC2B,QAAQ,MAAM,IAAI,IAAIE,oBAAoB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,oBAAoB,CAACL,IAAI,CAACxB,UAAU,EAAEI,WAAW,CAACwB,CAAC,CAAC,CAAC;MAClN,CAAC;MACDE,MAAM,EAAE,SAASA,MAAMA,CAACF,CAAC,EAAE;QACzB,IAAIG,kBAAkB;QACtB,OAAO/B,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,IAAI,CAAC+B,kBAAkB,GAAG/B,UAAU,CAAC8B,MAAM,MAAM,IAAI,IAAIC,kBAAkB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kBAAkB,CAACP,IAAI,CAACxB,UAAU,EAAEI,WAAW,CAACwB,CAAC,CAACI,MAAM,CAAC3B,KAAK,CAAC,CAAC;MACvN;IACF,CAAC,CAAC,CAAC;IACH,IAAIN,cAAc,EAAE;MAClB,OAAOA,cAAc,CAACL,IAAI,EAAEZ,aAAa,CAAC;QACxCc,IAAI,EAAED;MACR,CAAC,EAAEK,UAAU,CAAC,EAAEyB,IAAI,CAAC;IACvB;IACA,OAAOA,IAAI;EACb;EACA,OAAO,IAAI;AACb,CAAC;AACD,eAAe,aAAavC,KAAK,CAAC+C,UAAU,CAAC1C,UAAU,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}