{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React from 'react';\nimport EditableProTable from \"./index\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function CellEditorTable(props) {\n  var _props$columns;\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    editableKeys = _React$useState2[0],\n    setEditableRowKeys = _React$useState2[1];\n  var _React$useState3 = React.useState([]),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    dataIndex = _React$useState4[0],\n    setDataIndex = _React$useState4[1];\n  var rowKey = props.rowKey || 'id';\n\n  // ============================ RowKey ============================\n  var getRowKey = React.useMemo(function () {\n    if (typeof rowKey === 'function') {\n      return rowKey;\n    }\n    return function (record, index) {\n      var _ref;\n      if (index === -1) {\n        return record === null || record === void 0 ? void 0 : record[rowKey];\n      }\n      // 如果 props 中有name 的话，用index 来做行号，这样方便转化为 index\n      if (props.name) {\n        return index === null || index === void 0 ? void 0 : index.toString();\n      }\n      return (_ref = record === null || record === void 0 ? void 0 : record[rowKey]) !== null && _ref !== void 0 ? _ref : index === null || index === void 0 ? void 0 : index.toString();\n    };\n  }, [props.name, rowKey]);\n  return /*#__PURE__*/_jsx(EditableProTable, _objectSpread(_objectSpread({\n    bordered: true,\n    pagination: false\n  }, props), {}, {\n    editable: _objectSpread({\n      editableKeys: editableKeys\n    }, props.editable),\n    columns: (props === null || props === void 0 || (_props$columns = props.columns) === null || _props$columns === void 0 ? void 0 : _props$columns.map(function (item) {\n      return _objectSpread(_objectSpread({}, item), {}, {\n        editable: dataIndex.flat(1).join('.') === [item.dataIndex || item.key].flat(1).join('.') ? undefined : false,\n        onCell: function onCell(record, rowIndex) {\n          return {\n            onDoubleClick: function onDoubleClick() {\n              setEditableRowKeys([getRowKey(record, rowIndex)]);\n              setDataIndex([item.dataIndex || item.key]);\n            },\n            onBlur: function onBlur() {\n              setEditableRowKeys([]);\n            }\n          };\n        }\n      });\n    })) || []\n  }));\n}","map":{"version":3,"names":["_objectSpread","_slicedToArray","React","EditableProTable","jsx","_jsx","CellEditorTable","props","_props$columns","_React$useState","useState","_React$useState2","editableKeys","setEditableRowKeys","_React$useState3","_React$useState4","dataIndex","setDataIndex","rowKey","getRowKey","useMemo","record","index","_ref","name","toString","bordered","pagination","editable","columns","map","item","flat","join","key","undefined","onCell","rowIndex","onDoubleClick","onBlur"],"sources":["/Users/phanluc/admin-web-fe/node_modules/@ant-design/pro-table/es/components/EditableTable/CellEditorTable.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React from 'react';\nimport EditableProTable from \"./index\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function CellEditorTable(props) {\n  var _props$columns;\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    editableKeys = _React$useState2[0],\n    setEditableRowKeys = _React$useState2[1];\n  var _React$useState3 = React.useState([]),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    dataIndex = _React$useState4[0],\n    setDataIndex = _React$useState4[1];\n  var rowKey = props.rowKey || 'id';\n\n  // ============================ RowKey ============================\n  var getRowKey = React.useMemo(function () {\n    if (typeof rowKey === 'function') {\n      return rowKey;\n    }\n    return function (record, index) {\n      var _ref;\n      if (index === -1) {\n        return record === null || record === void 0 ? void 0 : record[rowKey];\n      }\n      // 如果 props 中有name 的话，用index 来做行号，这样方便转化为 index\n      if (props.name) {\n        return index === null || index === void 0 ? void 0 : index.toString();\n      }\n      return (_ref = record === null || record === void 0 ? void 0 : record[rowKey]) !== null && _ref !== void 0 ? _ref : index === null || index === void 0 ? void 0 : index.toString();\n    };\n  }, [props.name, rowKey]);\n  return /*#__PURE__*/_jsx(EditableProTable, _objectSpread(_objectSpread({\n    bordered: true,\n    pagination: false\n  }, props), {}, {\n    editable: _objectSpread({\n      editableKeys: editableKeys\n    }, props.editable),\n    columns: (props === null || props === void 0 || (_props$columns = props.columns) === null || _props$columns === void 0 ? void 0 : _props$columns.map(function (item) {\n      return _objectSpread(_objectSpread({}, item), {}, {\n        editable: dataIndex.flat(1).join('.') === [item.dataIndex || item.key].flat(1).join('.') ? undefined : false,\n        onCell: function onCell(record, rowIndex) {\n          return {\n            onDoubleClick: function onDoubleClick() {\n              setEditableRowKeys([getRowKey(record, rowIndex)]);\n              setDataIndex([item.dataIndex || item.key]);\n            },\n            onBlur: function onBlur() {\n              setEditableRowKeys([]);\n            }\n          };\n        }\n      });\n    })) || []\n  }));\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}