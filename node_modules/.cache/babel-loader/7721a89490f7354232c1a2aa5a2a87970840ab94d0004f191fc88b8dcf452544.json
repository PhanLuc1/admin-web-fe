{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"label\", \"size\", \"disabled\", \"onChange\", \"className\", \"style\", \"children\", \"valuePropName\", \"placeholder\", \"labelFormatter\", \"bordered\", \"footerRender\", \"allowClear\", \"otherFieldProps\", \"valueType\", \"placement\"];\nimport { dateArrayFormatter, dateFormatterMap, FieldLabel, FilterDropdown, useMountMergeState } from '@ant-design/pro-utils';\nimport { ConfigProvider } from 'antd';\nimport classNames from 'classnames';\nimport React, { useContext, useMemo, useState } from 'react';\nimport { useStyle } from \"./style\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar LightWrapper = function LightWrapper(props) {\n  var label = props.label,\n    size = props.size,\n    disabled = props.disabled,\n    propsOnChange = props.onChange,\n    className = props.className,\n    style = props.style,\n    children = props.children,\n    valuePropName = props.valuePropName,\n    placeholder = props.placeholder,\n    labelFormatter = props.labelFormatter,\n    bordered = props.bordered,\n    footerRender = props.footerRender,\n    allowClear = props.allowClear,\n    otherFieldProps = props.otherFieldProps,\n    valueType = props.valueType,\n    placement = props.placement,\n    rest = _objectWithoutProperties(props, _excluded);\n  var _useContext = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls;\n  var prefixCls = getPrefixCls('pro-field-light-wrapper');\n  var _useStyle = useStyle(prefixCls),\n    wrapSSR = _useStyle.wrapSSR,\n    hashId = _useStyle.hashId;\n  var _useState = useState(props[valuePropName]),\n    _useState2 = _slicedToArray(_useState, 2),\n    tempValue = _useState2[0],\n    setTempValue = _useState2[1];\n  var _useMountMergeState = useMountMergeState(false),\n    _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n    open = _useMountMergeState2[0],\n    setOpen = _useMountMergeState2[1];\n  var onChange = function onChange() {\n    var _otherFieldProps$onCh;\n    for (var _len = arguments.length, restParams = new Array(_len), _key = 0; _key < _len; _key++) {\n      restParams[_key] = arguments[_key];\n    }\n    otherFieldProps === null || otherFieldProps === void 0 || (_otherFieldProps$onCh = otherFieldProps.onChange) === null || _otherFieldProps$onCh === void 0 || _otherFieldProps$onCh.call.apply(_otherFieldProps$onCh, [otherFieldProps].concat(restParams));\n    propsOnChange === null || propsOnChange === void 0 || propsOnChange.apply(void 0, restParams);\n  };\n  var labelValue = props[valuePropName];\n\n  /** DataRange的转化，dayjs 的 toString 有点不好用 */\n  var labelValueText = useMemo(function () {\n    var _valueType$toLowerCas;\n    if (!labelValue) return labelValue;\n    if (valueType !== null && valueType !== void 0 && (_valueType$toLowerCas = valueType.toLowerCase()) !== null && _valueType$toLowerCas !== void 0 && _valueType$toLowerCas.endsWith('range') && valueType !== 'digitRange' && !labelFormatter) {\n      return dateArrayFormatter(labelValue, dateFormatterMap[valueType] || 'YYYY-MM-DD');\n    }\n    if (Array.isArray(labelValue)) return labelValue.map(function (item) {\n      if (_typeof(item) === 'object' && item.label && item.value) {\n        return item.label;\n      }\n      return item;\n    });\n    return labelValue;\n  }, [labelValue, valueType, labelFormatter]);\n  return wrapSSR(/*#__PURE__*/_jsx(FilterDropdown, {\n    disabled: disabled,\n    open: open,\n    onOpenChange: setOpen,\n    placement: placement,\n    label: /*#__PURE__*/_jsx(FieldLabel, {\n      ellipsis: true,\n      size: size,\n      onClear: function onClear() {\n        onChange === null || onChange === void 0 || onChange();\n        setTempValue(null);\n      },\n      bordered: bordered,\n      style: style,\n      className: className,\n      label: label,\n      placeholder: placeholder,\n      value: labelValueText,\n      disabled: disabled,\n      formatter: labelFormatter,\n      allowClear: allowClear\n    }),\n    footer: {\n      onClear: function onClear() {\n        return setTempValue(null);\n      },\n      onConfirm: function onConfirm() {\n        onChange === null || onChange === void 0 || onChange(tempValue);\n        setOpen(false);\n      }\n    },\n    footerRender: footerRender,\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: classNames(\"\".concat(prefixCls, \"-container\"), hashId, className),\n      style: style,\n      children: /*#__PURE__*/React.cloneElement(children, _objectSpread(_objectSpread({}, rest), {}, _defineProperty(_defineProperty({}, valuePropName, tempValue), \"onChange\", function onChange(e) {\n        setTempValue(e !== null && e !== void 0 && e.target ? e.target.value : e);\n      }), children.props))\n    })\n  }));\n};\nexport { LightWrapper };","map":{"version":3,"names":["_defineProperty","_objectSpread","_typeof","_slicedToArray","_objectWithoutProperties","_excluded","dateArrayFormatter","dateFormatterMap","FieldLabel","FilterDropdown","useMountMergeState","ConfigProvider","classNames","React","useContext","useMemo","useState","useStyle","jsx","_jsx","LightWrapper","props","label","size","disabled","propsOnChange","onChange","className","style","children","valuePropName","placeholder","labelFormatter","bordered","footerRender","allowClear","otherFieldProps","valueType","placement","rest","_useContext","ConfigContext","getPrefixCls","prefixCls","_useStyle","wrapSSR","hashId","_useState","_useState2","tempValue","setTempValue","_useMountMergeState","_useMountMergeState2","open","setOpen","_otherFieldProps$onCh","_len","arguments","length","restParams","Array","_key","call","apply","concat","labelValue","labelValueText","_valueType$toLowerCas","toLowerCase","endsWith","isArray","map","item","value","onOpenChange","ellipsis","onClear","formatter","footer","onConfirm","cloneElement","e","target"],"sources":["/Users/phanluc/admin-web-fe/node_modules/@ant-design/pro-form/es/BaseForm/LightWrapper/index.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"label\", \"size\", \"disabled\", \"onChange\", \"className\", \"style\", \"children\", \"valuePropName\", \"placeholder\", \"labelFormatter\", \"bordered\", \"footerRender\", \"allowClear\", \"otherFieldProps\", \"valueType\", \"placement\"];\nimport { dateArrayFormatter, dateFormatterMap, FieldLabel, FilterDropdown, useMountMergeState } from '@ant-design/pro-utils';\nimport { ConfigProvider } from 'antd';\nimport classNames from 'classnames';\nimport React, { useContext, useMemo, useState } from 'react';\nimport { useStyle } from \"./style\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar LightWrapper = function LightWrapper(props) {\n  var label = props.label,\n    size = props.size,\n    disabled = props.disabled,\n    propsOnChange = props.onChange,\n    className = props.className,\n    style = props.style,\n    children = props.children,\n    valuePropName = props.valuePropName,\n    placeholder = props.placeholder,\n    labelFormatter = props.labelFormatter,\n    bordered = props.bordered,\n    footerRender = props.footerRender,\n    allowClear = props.allowClear,\n    otherFieldProps = props.otherFieldProps,\n    valueType = props.valueType,\n    placement = props.placement,\n    rest = _objectWithoutProperties(props, _excluded);\n  var _useContext = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls;\n  var prefixCls = getPrefixCls('pro-field-light-wrapper');\n  var _useStyle = useStyle(prefixCls),\n    wrapSSR = _useStyle.wrapSSR,\n    hashId = _useStyle.hashId;\n  var _useState = useState(props[valuePropName]),\n    _useState2 = _slicedToArray(_useState, 2),\n    tempValue = _useState2[0],\n    setTempValue = _useState2[1];\n  var _useMountMergeState = useMountMergeState(false),\n    _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n    open = _useMountMergeState2[0],\n    setOpen = _useMountMergeState2[1];\n  var onChange = function onChange() {\n    var _otherFieldProps$onCh;\n    for (var _len = arguments.length, restParams = new Array(_len), _key = 0; _key < _len; _key++) {\n      restParams[_key] = arguments[_key];\n    }\n    otherFieldProps === null || otherFieldProps === void 0 || (_otherFieldProps$onCh = otherFieldProps.onChange) === null || _otherFieldProps$onCh === void 0 || _otherFieldProps$onCh.call.apply(_otherFieldProps$onCh, [otherFieldProps].concat(restParams));\n    propsOnChange === null || propsOnChange === void 0 || propsOnChange.apply(void 0, restParams);\n  };\n  var labelValue = props[valuePropName];\n\n  /** DataRange的转化，dayjs 的 toString 有点不好用 */\n  var labelValueText = useMemo(function () {\n    var _valueType$toLowerCas;\n    if (!labelValue) return labelValue;\n    if (valueType !== null && valueType !== void 0 && (_valueType$toLowerCas = valueType.toLowerCase()) !== null && _valueType$toLowerCas !== void 0 && _valueType$toLowerCas.endsWith('range') && valueType !== 'digitRange' && !labelFormatter) {\n      return dateArrayFormatter(labelValue, dateFormatterMap[valueType] || 'YYYY-MM-DD');\n    }\n    if (Array.isArray(labelValue)) return labelValue.map(function (item) {\n      if (_typeof(item) === 'object' && item.label && item.value) {\n        return item.label;\n      }\n      return item;\n    });\n    return labelValue;\n  }, [labelValue, valueType, labelFormatter]);\n  return wrapSSR( /*#__PURE__*/_jsx(FilterDropdown, {\n    disabled: disabled,\n    open: open,\n    onOpenChange: setOpen,\n    placement: placement,\n    label: /*#__PURE__*/_jsx(FieldLabel, {\n      ellipsis: true,\n      size: size,\n      onClear: function onClear() {\n        onChange === null || onChange === void 0 || onChange();\n        setTempValue(null);\n      },\n      bordered: bordered,\n      style: style,\n      className: className,\n      label: label,\n      placeholder: placeholder,\n      value: labelValueText,\n      disabled: disabled,\n      formatter: labelFormatter,\n      allowClear: allowClear\n    }),\n    footer: {\n      onClear: function onClear() {\n        return setTempValue(null);\n      },\n      onConfirm: function onConfirm() {\n        onChange === null || onChange === void 0 || onChange(tempValue);\n        setOpen(false);\n      }\n    },\n    footerRender: footerRender,\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: classNames(\"\".concat(prefixCls, \"-container\"), hashId, className),\n      style: style,\n      children: /*#__PURE__*/React.cloneElement(children, _objectSpread(_objectSpread({}, rest), {}, _defineProperty(_defineProperty({}, valuePropName, tempValue), \"onChange\", function onChange(e) {\n        setTempValue(e !== null && e !== void 0 && e.target ? e.target.value : e);\n      }), children.props))\n    })\n  }));\n};\nexport { LightWrapper };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}