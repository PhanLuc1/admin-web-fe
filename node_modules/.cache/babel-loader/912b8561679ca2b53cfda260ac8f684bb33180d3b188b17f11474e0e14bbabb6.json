{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"rowKey\", \"tableClassName\", \"defaultClassName\", \"action\", \"tableColumn\", \"type\", \"pagination\", \"rowSelection\", \"size\", \"defaultSize\", \"tableStyle\", \"toolbarDom\", \"hideToolbar\", \"searchNode\", \"style\", \"cardProps\", \"alertDom\", \"name\", \"onSortChange\", \"onFilterChange\", \"options\", \"isLightFilter\", \"className\", \"cardBordered\", \"editableUtils\", \"getRowKey\"],\n  _excluded2 = [\"cardBordered\", \"request\", \"className\", \"params\", \"defaultData\", \"headerTitle\", \"postData\", \"ghost\", \"pagination\", \"actionRef\", \"columns\", \"toolBarRender\", \"optionsRender\", \"onLoad\", \"onRequestError\", \"style\", \"cardProps\", \"tableStyle\", \"tableClassName\", \"columnsStateMap\", \"onColumnsStateChange\", \"options\", \"search\", \"name\", \"onLoadingChange\", \"rowSelection\", \"beforeSearchSubmit\", \"tableAlertRender\", \"defaultClassName\", \"formRef\", \"type\", \"columnEmptyText\", \"toolbar\", \"rowKey\", \"manualRequest\", \"polling\", \"tooltip\", \"revalidateOnFocus\", \"searchFormRender\"];\n// 兼容代码-----------\nimport \"antd/es/table/style\";\nimport \"antd/es/typography/style\";\n//----------------------\n\nimport ProCard from '@ant-design/pro-card';\nimport ProForm, { GridContext } from '@ant-design/pro-form';\nimport { ProConfigProvider, proTheme, useIntl } from '@ant-design/pro-provider';\nimport { ErrorBoundary, editableRowByKey, omitUndefined, recordKeyToString, stringify, useDeepCompareEffect, useDeepCompareEffectDebounce, useEditableArray, useMountMergeState } from '@ant-design/pro-utils';\nimport { ConfigProvider, Table } from 'antd';\nimport classNames from 'classnames';\nimport isEmpty from 'lodash-es/isEmpty';\nimport isEqual from 'lodash-es/isEqual';\nimport React, { useCallback, useContext, useEffect, useImperativeHandle, useMemo, useRef } from 'react';\nimport { Container, TableContext } from \"./Store/Provide\";\nimport Alert from \"./components/Alert\";\nimport FormRender from \"./components/Form\";\nimport Toolbar from \"./components/ToolBar\";\nimport { useStyle } from \"./style\";\nimport useFetchData from \"./useFetchData\";\nimport { genColumnKey, isBordered, mergePagination, parseDefaultColumnConfig, useActionType } from \"./utils\";\nimport { columnSort } from \"./utils/columnSort\";\nimport { genProColumnToColumn } from \"./utils/genProColumnToColumn\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createElement as _createElement } from \"react\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction TableRender(props) {\n  var rowKey = props.rowKey,\n    tableClassName = props.tableClassName,\n    defaultClassName = props.defaultClassName,\n    action = props.action,\n    tableColumns = props.tableColumn,\n    type = props.type,\n    pagination = props.pagination,\n    rowSelection = props.rowSelection,\n    size = props.size,\n    defaultSize = props.defaultSize,\n    tableStyle = props.tableStyle,\n    toolbarDom = props.toolbarDom,\n    hideToolbar = props.hideToolbar,\n    searchNode = props.searchNode,\n    style = props.style,\n    propsCardProps = props.cardProps,\n    alertDom = props.alertDom,\n    name = props.name,\n    onSortChange = props.onSortChange,\n    onFilterChange = props.onFilterChange,\n    options = props.options,\n    isLightFilter = props.isLightFilter,\n    className = props.className,\n    cardBordered = props.cardBordered,\n    editableUtils = props.editableUtils,\n    getRowKey = props.getRowKey,\n    rest = _objectWithoutProperties(props, _excluded);\n  var counter = useContext(TableContext);\n\n  /** 需要遍历一下，不然不支持嵌套表格 */\n  var columns = useMemo(function () {\n    var loopFilter = function loopFilter(column) {\n      return column.map(function (item) {\n        // 删掉不应该显示的\n        var columnKey = genColumnKey(item.key, item.index);\n        var config = counter.columnsMap[columnKey];\n        if (config && config.show === false) {\n          return false;\n        }\n        if (item.children) {\n          return _objectSpread(_objectSpread({}, item), {}, {\n            children: loopFilter(item.children)\n          });\n        }\n        return item;\n      }).filter(Boolean);\n    };\n    return loopFilter(tableColumns);\n  }, [counter.columnsMap, tableColumns]);\n\n  /** 如果所有列中的 filters = true | undefined 说明是用的是本地筛选 任何一列配置 filters=false，就能绕过这个判断 */\n  var useLocaleFilter = useMemo(function () {\n    var _columns = [];\n    // 平铺所有columns, 用于判断是用的是本地筛选\n    var loopColumns = function loopColumns(data) {\n      for (var i = 0; i < data.length; i++) {\n        var _curItem = data[i];\n        if (_curItem.children) {\n          loopColumns(_curItem.children);\n        } else {\n          _columns.push(_curItem);\n        }\n      }\n    };\n    loopColumns(columns);\n    return _columns === null || _columns === void 0 ? void 0 : _columns.every(function (column) {\n      return !!column.filters && !!column.onFilter || column.filters === undefined && column.onFilter === undefined;\n    });\n  }, [columns]);\n\n  /**\n   * 如果是分页的新增，总是加到最后一行\n   *\n   * @returns\n   */\n  var editableDataSource = function editableDataSource(dataSource) {\n    var _ref = editableUtils.newLineRecord || {},\n      newLineOptions = _ref.options,\n      row = _ref.defaultValue;\n    var isNewLineRecordAtTop = (newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.position) === 'top';\n    if (newLineOptions !== null && newLineOptions !== void 0 && newLineOptions.parentKey) {\n      var _recordKeyToString, _props$expandable;\n      var actionProps = {\n        data: dataSource,\n        getRowKey: getRowKey,\n        row: _objectSpread(_objectSpread({}, row), {}, {\n          map_row_parentKey: (_recordKeyToString = recordKeyToString(newLineOptions.parentKey)) === null || _recordKeyToString === void 0 ? void 0 : _recordKeyToString.toString()\n        }),\n        key: newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.recordKey,\n        childrenColumnName: ((_props$expandable = props.expandable) === null || _props$expandable === void 0 ? void 0 : _props$expandable.childrenColumnName) || 'children'\n      };\n      return editableRowByKey(actionProps, isNewLineRecordAtTop ? 'top' : 'update');\n    }\n    if (isNewLineRecordAtTop) {\n      return [row].concat(_toConsumableArray(action.dataSource));\n    }\n    // 如果有分页的功能，我们加到这一页的末尾\n    if (pagination && pagination !== null && pagination !== void 0 && pagination.current && pagination !== null && pagination !== void 0 && pagination.pageSize) {\n      var newDataSource = _toConsumableArray(action.dataSource);\n      if ((pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) > newDataSource.length) {\n        newDataSource.push(row);\n        return newDataSource;\n      }\n      newDataSource.splice((pagination === null || pagination === void 0 ? void 0 : pagination.current) * (pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) - 1, 0, row);\n      return newDataSource;\n    }\n    return [].concat(_toConsumableArray(action.dataSource), [row]);\n  };\n  var getTableProps = function getTableProps() {\n    return _objectSpread(_objectSpread({}, rest), {}, {\n      size: size,\n      rowSelection: rowSelection === false ? undefined : rowSelection,\n      className: tableClassName,\n      style: tableStyle,\n      columns: columns.map(function (item) {\n        return item.isExtraColumns ? item.extraColumn : item;\n      }),\n      loading: action.loading,\n      dataSource: editableUtils.newLineRecord ? editableDataSource(action.dataSource) : action.dataSource,\n      pagination: pagination,\n      onChange: function onChange(changePagination, filters, sorter, extra) {\n        var _rest$onChange;\n        (_rest$onChange = rest.onChange) === null || _rest$onChange === void 0 || _rest$onChange.call(rest, changePagination, filters, sorter, extra);\n        if (!useLocaleFilter) {\n          onFilterChange(omitUndefined(filters));\n        }\n\n        // 制造筛选的数据\n        // 制造一个排序的数据\n        if (Array.isArray(sorter)) {\n          var data = sorter.reduce(function (pre, value) {\n            return _objectSpread(_objectSpread({}, pre), {}, _defineProperty({}, \"\".concat(value.field), value.order));\n          }, {});\n          onSortChange(omitUndefined(data));\n        } else {\n          var _sorter$column;\n          var sorterOfColumn = (_sorter$column = sorter.column) === null || _sorter$column === void 0 ? void 0 : _sorter$column.sorter;\n          var isSortByField = (sorterOfColumn === null || sorterOfColumn === void 0 ? void 0 : sorterOfColumn.toString()) === sorterOfColumn;\n          onSortChange(omitUndefined(_defineProperty({}, \"\".concat(isSortByField ? sorterOfColumn : sorter.field), sorter.order)));\n        }\n      }\n    });\n  };\n\n  /**\n   * 是否需要 card 来包裹\n   */\n  var notNeedCardDom = useMemo(function () {\n    if (props.search === false && !props.headerTitle && props.toolBarRender === false) {\n      return true;\n    }\n    return false;\n  }, []);\n\n  /** 默认的 table dom，如果是编辑模式，外面还要包个 form */\n  var baseTableDom = /*#__PURE__*/_jsx(GridContext.Provider, {\n    value: {\n      grid: false,\n      colProps: undefined,\n      rowProps: undefined\n    },\n    children: /*#__PURE__*/_jsx(Table, _objectSpread(_objectSpread({}, getTableProps()), {}, {\n      rowKey: rowKey\n    }))\n  });\n\n  /** 自定义的 render */\n  var tableDom = props.tableViewRender ? props.tableViewRender(_objectSpread(_objectSpread({}, getTableProps()), {}, {\n    rowSelection: rowSelection !== false ? rowSelection : undefined\n  }), baseTableDom) : baseTableDom;\n\n  /**\n   * 这段代码使用了 useMemo 进行了性能优化，根据 props.editable 和 props.name 的不同情况，渲染不同的页面组件。\n   * 当 props.editable 为 true 并且 props.name 不存在时，渲染一个带有表单和工具栏的页面组件，否则只渲染工具栏和表格组件。\n   * renderContent 函数会在 alertDom、props.loading、props.editable、tableDom、toolbarDom 发生变化时重新执行。\n   * */\n  var tableContentDom = useMemo(function () {\n    if (props.editable && !props.name) {\n      var _props$editable, _props$editable2, _props$editable3;\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [toolbarDom, alertDom, /*#__PURE__*/_createElement(ProForm, _objectSpread(_objectSpread({}, (_props$editable = props.editable) === null || _props$editable === void 0 ? void 0 : _props$editable.formProps), {}, {\n          formRef: (_props$editable2 = props.editable) === null || _props$editable2 === void 0 || (_props$editable2 = _props$editable2.formProps) === null || _props$editable2 === void 0 ? void 0 : _props$editable2.formRef,\n          component: false,\n          form: (_props$editable3 = props.editable) === null || _props$editable3 === void 0 ? void 0 : _props$editable3.form,\n          onValuesChange: editableUtils.onValuesChange,\n          key: \"table\",\n          submitter: false,\n          omitNil: false,\n          dateFormatter: props.dateFormatter\n        }), tableDom)]\n      });\n    }\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [toolbarDom, alertDom, tableDom]\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [alertDom, props.loading, !!props.editable, tableDom, toolbarDom]);\n  var cardBodyStyle = useMemo(function () {\n    if (propsCardProps === false || notNeedCardDom === true || !!props.name) return {};\n    if (hideToolbar) {\n      return {\n        padding: 0\n      };\n    }\n    if (toolbarDom) {\n      return {\n        paddingBlockStart: 0\n      };\n    }\n    if (toolbarDom && pagination === false) {\n      return {\n        paddingBlockStart: 0\n      };\n    }\n    // if (!toolbarDom)\n    return {\n      padding: 0\n    };\n  }, [notNeedCardDom, pagination, props.name, propsCardProps, toolbarDom, hideToolbar]);\n\n  /** Table 区域的 dom，为了方便 render */\n  var tableAreaDom =\n  // cardProps 或者 有了name 就不需要这个padding了，不然会导致不好对齐\n  propsCardProps === false || notNeedCardDom === true || !!props.name ? tableContentDom : /*#__PURE__*/_jsx(ProCard, _objectSpread(_objectSpread({\n    ghost: props.ghost,\n    bordered: isBordered('table', cardBordered),\n    bodyStyle: cardBodyStyle\n  }, propsCardProps), {}, {\n    children: tableContentDom\n  }));\n  var renderTable = function renderTable() {\n    if (props.tableRender) {\n      return props.tableRender(props, tableAreaDom, {\n        toolbar: toolbarDom || undefined,\n        alert: alertDom || undefined,\n        table: tableDom || undefined\n      });\n    }\n    return tableAreaDom;\n  };\n  var proTableDom = /*#__PURE__*/_jsxs(\"div\", {\n    className: classNames(className, _defineProperty({}, \"\".concat(defaultClassName, \"-polling\"), action.pollingLoading)),\n    style: style,\n    ref: counter.rootDomRef,\n    children: [isLightFilter ? null : searchNode, type !== 'form' && props.tableExtraRender && /*#__PURE__*/_jsx(\"div\", {\n      className: classNames(className, \"\".concat(defaultClassName, \"-extra\")),\n      children: props.tableExtraRender(props, action.dataSource || [])\n    }), type !== 'form' && renderTable()]\n  });\n\n  // 如果不需要的全屏，ConfigProvider 没有意义\n  if (!options || !(options !== null && options !== void 0 && options.fullScreen)) {\n    return proTableDom;\n  }\n  return /*#__PURE__*/_jsx(ConfigProvider, {\n    getPopupContainer: function getPopupContainer() {\n      return counter.rootDomRef.current || document.body;\n    },\n    children: proTableDom\n  });\n}\nvar emptyObj = {};\nvar ProTable = function ProTable(props) {\n  var _props$expandable2;\n  var cardBordered = props.cardBordered,\n    request = props.request,\n    propsClassName = props.className,\n    _props$params = props.params,\n    params = _props$params === void 0 ? emptyObj : _props$params,\n    defaultData = props.defaultData,\n    headerTitle = props.headerTitle,\n    postData = props.postData,\n    ghost = props.ghost,\n    propsPagination = props.pagination,\n    propsActionRef = props.actionRef,\n    _props$columns = props.columns,\n    propsColumns = _props$columns === void 0 ? [] : _props$columns,\n    toolBarRender = props.toolBarRender,\n    optionsRender = props.optionsRender,\n    onLoad = props.onLoad,\n    onRequestError = props.onRequestError,\n    style = props.style,\n    cardProps = props.cardProps,\n    tableStyle = props.tableStyle,\n    tableClassName = props.tableClassName,\n    columnsStateMap = props.columnsStateMap,\n    onColumnsStateChange = props.onColumnsStateChange,\n    options = props.options,\n    search = props.search,\n    isEditorTable = props.name,\n    onLoadingChange = props.onLoadingChange,\n    _props$rowSelection = props.rowSelection,\n    propsRowSelection = _props$rowSelection === void 0 ? false : _props$rowSelection,\n    beforeSearchSubmit = props.beforeSearchSubmit,\n    tableAlertRender = props.tableAlertRender,\n    defaultClassName = props.defaultClassName,\n    propRef = props.formRef,\n    _props$type = props.type,\n    type = _props$type === void 0 ? 'table' : _props$type,\n    _props$columnEmptyTex = props.columnEmptyText,\n    columnEmptyText = _props$columnEmptyTex === void 0 ? '-' : _props$columnEmptyTex,\n    toolbar = props.toolbar,\n    rowKey = props.rowKey,\n    manualRequest = props.manualRequest,\n    polling = props.polling,\n    tooltip = props.tooltip,\n    _props$revalidateOnFo = props.revalidateOnFocus,\n    revalidateOnFocus = _props$revalidateOnFo === void 0 ? false : _props$revalidateOnFo,\n    searchFormRender = props.searchFormRender,\n    rest = _objectWithoutProperties(props, _excluded2);\n  var _useStyle = useStyle(props.defaultClassName),\n    wrapSSR = _useStyle.wrapSSR,\n    hashId = _useStyle.hashId;\n  var className = classNames(defaultClassName, propsClassName, hashId);\n\n  /** 通用的来操作子节点的工具类 */\n  var actionRef = useRef();\n  var defaultFormRef = useRef();\n  var formRef = propRef || defaultFormRef;\n  useImperativeHandle(propsActionRef, function () {\n    return actionRef.current;\n  });\n\n  /** 单选多选的相关逻辑 */\n  var _useMountMergeState = useMountMergeState(propsRowSelection ? (propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.defaultSelectedRowKeys) || [] : undefined, {\n      value: propsRowSelection ? propsRowSelection.selectedRowKeys : undefined\n    }),\n    _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n    selectedRowKeys = _useMountMergeState2[0],\n    setSelectedRowKeys = _useMountMergeState2[1];\n  var _useMountMergeState3 = useMountMergeState(function () {\n      // 如果手动模式，或者 search 不存在的时候设置为 undefined\n      // undefined 就不会触发首次加载\n      if (manualRequest || search !== false) {\n        return undefined;\n      }\n      return {};\n    }),\n    _useMountMergeState4 = _slicedToArray(_useMountMergeState3, 2),\n    formSearch = _useMountMergeState4[0],\n    setFormSearch = _useMountMergeState4[1];\n  var _useMountMergeState5 = useMountMergeState({}),\n    _useMountMergeState6 = _slicedToArray(_useMountMergeState5, 2),\n    proFilter = _useMountMergeState6[0],\n    setProFilter = _useMountMergeState6[1];\n  var _useMountMergeState7 = useMountMergeState({}),\n    _useMountMergeState8 = _slicedToArray(_useMountMergeState7, 2),\n    proSort = _useMountMergeState8[0],\n    setProSort = _useMountMergeState8[1];\n\n  /** 设置默认排序和筛选值 */\n  useEffect(function () {\n    var _parseDefaultColumnCo = parseDefaultColumnConfig(propsColumns),\n      sort = _parseDefaultColumnCo.sort,\n      filter = _parseDefaultColumnCo.filter;\n    setProFilter(filter);\n    setProSort(sort);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var intl = useIntl();\n\n  /** 需要初始化 不然默认可能报错 这里取了 defaultCurrent 和 current 为了保证不会重复刷新 */\n  var fetchPagination = _typeof(propsPagination) === 'object' ? propsPagination : {\n    defaultCurrent: 1,\n    defaultPageSize: 20,\n    pageSize: 20,\n    current: 1\n  };\n  var counter = useContext(TableContext);\n\n  // ============================ useFetchData ============================\n  var fetchData = useMemo(function () {\n    if (!request) return undefined;\n    return /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(pageParams) {\n        var actionParams, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              actionParams = _objectSpread(_objectSpread(_objectSpread({}, pageParams || {}), formSearch), params); // eslint-disable-next-line no-underscore-dangle\n              delete actionParams._timestamp;\n              _context.next = 4;\n              return request(actionParams, proSort, proFilter);\n            case 4:\n              response = _context.sent;\n              return _context.abrupt(\"return\", response);\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  }, [formSearch, params, proFilter, proSort, request]);\n  var action = useFetchData(fetchData, defaultData, {\n    pageInfo: propsPagination === false ? false : fetchPagination,\n    loading: props.loading,\n    dataSource: props.dataSource,\n    onDataSourceChange: props.onDataSourceChange,\n    onLoad: onLoad,\n    onLoadingChange: onLoadingChange,\n    onRequestError: onRequestError,\n    postData: postData,\n    revalidateOnFocus: revalidateOnFocus,\n    manual: formSearch === undefined,\n    polling: polling,\n    effects: [stringify(params), stringify(formSearch), stringify(proFilter), stringify(proSort)],\n    debounceTime: props.debounceTime,\n    onPageInfoChange: function onPageInfoChange(pageInfo) {\n      var _propsPagination$onCh, _propsPagination$onSh;\n      if (!propsPagination || !fetchData) return;\n\n      // 总是触发一下 onChange 和  onShowSizeChange\n      // 目前只有 List 和 Table 支持分页, List 有分页的时候打断 Table 的分页\n      propsPagination === null || propsPagination === void 0 || (_propsPagination$onCh = propsPagination.onChange) === null || _propsPagination$onCh === void 0 || _propsPagination$onCh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n      propsPagination === null || propsPagination === void 0 || (_propsPagination$onSh = propsPagination.onShowSizeChange) === null || _propsPagination$onSh === void 0 || _propsPagination$onSh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n    }\n  });\n  // ============================ END ============================\n\n  /** 聚焦的时候重新请求数据，这样可以保证数据都是最新的。 */\n  useEffect(function () {\n    var _props$form;\n    // 手动模式和 request 为空都不生效\n    if (props.manualRequest || !props.request || !revalidateOnFocus || (_props$form = props.form) !== null && _props$form !== void 0 && _props$form.ignoreRules) return;\n\n    // 聚焦时重新请求事件\n    var visibilitychange = function visibilitychange() {\n      if (document.visibilityState === 'visible') {\n        action.reload();\n      }\n    };\n    document.addEventListener('visibilitychange', visibilitychange);\n    return function () {\n      return document.removeEventListener('visibilitychange', visibilitychange);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /** SelectedRowKeys受控处理selectRows */\n  var preserveRecordsRef = React.useRef(new Map());\n\n  // ============================ RowKey ============================\n  var getRowKey = React.useMemo(function () {\n    if (typeof rowKey === 'function') {\n      return rowKey;\n    }\n    return function (record, index) {\n      var _ref3;\n      if (index === -1) {\n        return record === null || record === void 0 ? void 0 : record[rowKey];\n      }\n      // 如果 props 中有name 的话，用index 来做行号，这样方便转化为 index\n      if (props.name) {\n        return index === null || index === void 0 ? void 0 : index.toString();\n      }\n      return (_ref3 = record === null || record === void 0 ? void 0 : record[rowKey]) !== null && _ref3 !== void 0 ? _ref3 : index === null || index === void 0 ? void 0 : index.toString();\n    };\n  }, [props.name, rowKey]);\n  useMemo(function () {\n    var _action$dataSource;\n    if ((_action$dataSource = action.dataSource) !== null && _action$dataSource !== void 0 && _action$dataSource.length) {\n      var keys = action.dataSource.map(function (data) {\n        var dataRowKey = getRowKey(data, -1);\n        preserveRecordsRef.current.set(dataRowKey, data);\n        return dataRowKey;\n      });\n      return keys;\n    }\n    return [];\n  }, [action.dataSource, getRowKey]);\n\n  /** 页面编辑的计算 */\n  var pagination = useMemo(function () {\n    var newPropsPagination = propsPagination === false ? false : _objectSpread({}, propsPagination);\n    var pageConfig = _objectSpread(_objectSpread({}, action.pageInfo), {}, {\n      setPageInfo: function setPageInfo(_ref4) {\n        var pageSize = _ref4.pageSize,\n          current = _ref4.current;\n        var pageInfo = action.pageInfo;\n\n        // pageSize 发生改变，并且你不是在第一页，切回到第一页\n        // 这样可以防止出现 跳转到一个空的数据页的问题\n        if (pageSize === pageInfo.pageSize || pageInfo.current === 1) {\n          action.setPageInfo({\n            pageSize: pageSize,\n            current: current\n          });\n          return;\n        }\n\n        // 通过request的时候清空数据，然后刷新不然可能会导致 pageSize 没有数据多\n        if (request) action.setDataSource([]);\n        action.setPageInfo({\n          pageSize: pageSize,\n          // 目前只有 List 和 Table 支持分页, List 有分页的时候 还是使用之前的当前页码\n          current: type === 'list' ? current : 1\n        });\n      }\n    });\n    if (request && newPropsPagination) {\n      delete newPropsPagination.onChange;\n      delete newPropsPagination.onShowSizeChange;\n    }\n    return mergePagination(newPropsPagination, pageConfig, intl);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsPagination, action, intl]);\n  useDeepCompareEffect(function () {\n    var _action$pageInfo;\n    // request 存在且params不为空，且已经请求过数据才需要设置。\n    if (props.request && !isEmpty(params) && action.dataSource && !isEqual(action.dataSource, defaultData) && (action === null || action === void 0 || (_action$pageInfo = action.pageInfo) === null || _action$pageInfo === void 0 ? void 0 : _action$pageInfo.current) !== 1) {\n      action.setPageInfo({\n        current: 1\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [params]);\n\n  // 设置 name 到 store 中，里面用了 ref ，所以不用担心直接 set\n  counter.setPrefixName(props.name);\n\n  /** 清空所有的选中项 */\n  var _onCleanSelected = useCallback(function () {\n    if (propsRowSelection && propsRowSelection.onChange) {\n      propsRowSelection.onChange([], [], {\n        type: 'none'\n      });\n    }\n    setSelectedRowKeys([]);\n  }, [propsRowSelection, setSelectedRowKeys]);\n  counter.propsRef.current = props;\n\n  /** 可编辑行的相关配置 */\n  var editableUtils = useEditableArray(_objectSpread(_objectSpread({}, props.editable), {}, {\n    tableName: props.name,\n    getRowKey: getRowKey,\n    childrenColumnName: ((_props$expandable2 = props.expandable) === null || _props$expandable2 === void 0 ? void 0 : _props$expandable2.childrenColumnName) || 'children',\n    dataSource: action.dataSource || [],\n    setDataSource: function setDataSource(data) {\n      var _props$editable4, _props$editable4$onVa;\n      (_props$editable4 = props.editable) === null || _props$editable4 === void 0 || (_props$editable4$onVa = _props$editable4.onValuesChange) === null || _props$editable4$onVa === void 0 || _props$editable4$onVa.call(_props$editable4, undefined, data);\n      action.setDataSource(data);\n    }\n  }));\n\n  // ============================ Render ============================\n  var _proTheme$useToken = proTheme === null || proTheme === void 0 ? void 0 : proTheme.useToken(),\n    token = _proTheme$useToken.token;\n\n  /** 绑定 action */\n  useActionType(actionRef, action, {\n    fullScreen: function fullScreen() {\n      var _counter$rootDomRef;\n      if (!((_counter$rootDomRef = counter.rootDomRef) !== null && _counter$rootDomRef !== void 0 && _counter$rootDomRef.current) || !document.fullscreenEnabled) {\n        return;\n      }\n      if (document.fullscreenElement) {\n        document.exitFullscreen();\n      } else {\n        var _counter$rootDomRef2;\n        (_counter$rootDomRef2 = counter.rootDomRef) === null || _counter$rootDomRef2 === void 0 || _counter$rootDomRef2.current.requestFullscreen();\n      }\n    },\n    onCleanSelected: function onCleanSelected() {\n      // 清空选中行\n      _onCleanSelected();\n    },\n    resetAll: function resetAll() {\n      var _formRef$current;\n      // 清空选中行\n      _onCleanSelected();\n      // 清空筛选\n      setProFilter({});\n      // 清空排序\n      setProSort({});\n      // 清空 toolbar 搜索\n      counter.setKeyWords(undefined);\n      // 重置页码\n      action.setPageInfo({\n        current: 1\n      });\n\n      // 重置表单\n      formRef === null || formRef === void 0 || (_formRef$current = formRef.current) === null || _formRef$current === void 0 || _formRef$current.resetFields();\n      setFormSearch({});\n    },\n    editableUtils: editableUtils\n  });\n\n  /** 同步 action */\n  counter.setAction(actionRef.current);\n\n  // ---------- 列计算相关 start  -----------------\n  var tableColumn = useMemo(function () {\n    var _props$expandable3;\n    return genProColumnToColumn({\n      columns: propsColumns,\n      counter: counter,\n      columnEmptyText: columnEmptyText,\n      type: type,\n      marginSM: token.marginSM,\n      editableUtils: editableUtils,\n      rowKey: rowKey,\n      childrenColumnName: (_props$expandable3 = props.expandable) === null || _props$expandable3 === void 0 ? void 0 : _props$expandable3.childrenColumnName\n    }).sort(columnSort(counter.columnsMap));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsColumns, counter === null || counter === void 0 ? void 0 : counter.sortKeyColumns, counter === null || counter === void 0 ? void 0 : counter.columnsMap, columnEmptyText, type,\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  editableUtils.editableKeys && editableUtils.editableKeys.join(',')]);\n\n  /** Table Column 变化的时候更新一下，这个参数将会用于渲染 */\n  useDeepCompareEffectDebounce(function () {\n    if (tableColumn && tableColumn.length > 0) {\n      // 重新生成key的字符串用于排序\n      var columnKeys = tableColumn.map(function (item) {\n        return genColumnKey(item.key, item.index);\n      });\n      counter.setSortKeyColumns(columnKeys);\n    }\n  }, [tableColumn], ['render', 'renderFormItem'], 100);\n\n  /** 同步 Pagination，支持受控的 页码 和 pageSize */\n  useDeepCompareEffect(function () {\n    var pageInfo = action.pageInfo;\n    var _ref5 = propsPagination || {},\n      _ref5$current = _ref5.current,\n      current = _ref5$current === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current : _ref5$current,\n      _ref5$pageSize = _ref5.pageSize,\n      pageSize = _ref5$pageSize === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize : _ref5$pageSize;\n    if (propsPagination && (current || pageSize) && (pageSize !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize) || current !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current))) {\n      action.setPageInfo({\n        pageSize: pageSize || pageInfo.pageSize,\n        current: current || pageInfo.current\n      });\n    }\n  }, [propsPagination && propsPagination.pageSize, propsPagination && propsPagination.current]);\n\n  /** 行选择相关的问题 */\n  var rowSelection = _objectSpread(_objectSpread({\n    selectedRowKeys: selectedRowKeys\n  }, propsRowSelection), {}, {\n    onChange: function onChange(keys, rows, info) {\n      if (propsRowSelection && propsRowSelection.onChange) {\n        propsRowSelection.onChange(keys, rows, info);\n      }\n      setSelectedRowKeys(keys);\n    }\n  });\n\n  /** 是不是 LightFilter, LightFilter 有一些特殊的处理 */\n  var isLightFilter = search !== false && (search === null || search === void 0 ? void 0 : search.filterType) === 'light';\n  var _onFormSearchSubmit = useCallback(function (values) {\n    // 判断search.onSearch返回值决定是否更新formSearch\n    if (options && options.search) {\n      var _options$search, _options$search$onSea;\n      var _ref6 = options.search === true ? {} : options.search,\n        _ref6$name = _ref6.name,\n        name = _ref6$name === void 0 ? 'keyword' : _ref6$name;\n\n      /** 如果传入的 onSearch 返回值为 false，则不要把options.search.name对应的值set到formSearch */\n      var success = (_options$search = options.search) === null || _options$search === void 0 || (_options$search$onSea = _options$search.onSearch) === null || _options$search$onSea === void 0 ? void 0 : _options$search$onSea.call(_options$search, counter.keyWords);\n      if (success !== false) {\n        setFormSearch(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, counter.keyWords)));\n        return;\n      }\n    }\n    setFormSearch(values);\n  }, [counter.keyWords, options, setFormSearch]);\n  var loading = useMemo(function () {\n    if (_typeof(action.loading) === 'object') {\n      var _action$loading;\n      return ((_action$loading = action.loading) === null || _action$loading === void 0 ? void 0 : _action$loading.spinning) || false;\n    }\n    return action.loading;\n  }, [action.loading]);\n  var searchNode = useMemo(function () {\n    var node = search === false && type !== 'form' ? null : /*#__PURE__*/_jsx(FormRender, {\n      pagination: pagination,\n      beforeSearchSubmit: beforeSearchSubmit,\n      action: actionRef,\n      columns: propsColumns,\n      onFormSearchSubmit: function onFormSearchSubmit(values) {\n        _onFormSearchSubmit(values);\n      },\n      ghost: ghost,\n      onReset: props.onReset,\n      onSubmit: props.onSubmit,\n      loading: !!loading,\n      manualRequest: manualRequest,\n      search: search,\n      form: props.form,\n      formRef: formRef,\n      type: props.type || 'table',\n      cardBordered: props.cardBordered,\n      dateFormatter: props.dateFormatter\n    });\n    if (searchFormRender && node) {\n      return /*#__PURE__*/_jsx(_Fragment, {\n        children: searchFormRender(props, node)\n      });\n    } else {\n      return node;\n    }\n  }, [beforeSearchSubmit, formRef, ghost, loading, manualRequest, _onFormSearchSubmit, pagination, props, propsColumns, search, searchFormRender, type]);\n  var selectedRows = useMemo(function () {\n    return selectedRowKeys === null || selectedRowKeys === void 0 ? void 0 : selectedRowKeys.map(function (key) {\n      var _preserveRecordsRef$c;\n      return (_preserveRecordsRef$c = preserveRecordsRef.current) === null || _preserveRecordsRef$c === void 0 ? void 0 : _preserveRecordsRef$c.get(key);\n    });\n  }, [action.dataSource, selectedRowKeys]);\n  var hideToolbar = useMemo(function () {\n    return options === false && !headerTitle && !toolBarRender && !toolbar && !isLightFilter;\n  }, [options, headerTitle, toolBarRender, toolbar, isLightFilter]);\n\n  /** 内置的工具栏 */\n  var toolbarDom = toolBarRender === false ? null : /*#__PURE__*/_jsx(Toolbar, {\n    headerTitle: headerTitle,\n    hideToolbar: hideToolbar,\n    selectedRows: selectedRows,\n    selectedRowKeys: selectedRowKeys,\n    tableColumn: tableColumn,\n    tooltip: tooltip,\n    toolbar: toolbar,\n    onFormSearchSubmit: function onFormSearchSubmit(newValues) {\n      setFormSearch(_objectSpread(_objectSpread({}, formSearch), newValues));\n    },\n    searchNode: isLightFilter ? searchNode : null,\n    options: options,\n    optionsRender: optionsRender,\n    actionRef: actionRef,\n    toolBarRender: toolBarRender\n  });\n\n  /** 内置的多选操作栏 */\n  var alertDom = propsRowSelection !== false ? /*#__PURE__*/_jsx(Alert, {\n    selectedRowKeys: selectedRowKeys,\n    selectedRows: selectedRows,\n    onCleanSelected: _onCleanSelected,\n    alertOptionRender: rest.tableAlertOptionRender,\n    alertInfoRender: tableAlertRender,\n    alwaysShowAlert: propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.alwaysShowAlert\n  }) : null;\n  return wrapSSR(/*#__PURE__*/_jsx(TableRender, _objectSpread(_objectSpread({}, props), {}, {\n    name: isEditorTable,\n    defaultClassName: defaultClassName,\n    size: counter.tableSize,\n    onSizeChange: counter.setTableSize,\n    pagination: pagination,\n    searchNode: searchNode,\n    rowSelection: propsRowSelection !== false ? rowSelection : undefined,\n    className: className,\n    tableColumn: tableColumn,\n    isLightFilter: isLightFilter,\n    action: action,\n    alertDom: alertDom,\n    toolbarDom: toolbarDom,\n    hideToolbar: hideToolbar,\n    onSortChange: function onSortChange(sortConfig) {\n      if (proSort === sortConfig) return;\n      setProSort(sortConfig !== null && sortConfig !== void 0 ? sortConfig : {});\n    },\n    onFilterChange: function onFilterChange(filterConfig) {\n      if (filterConfig === proFilter) return;\n      setProFilter(filterConfig);\n    },\n    editableUtils: editableUtils,\n    getRowKey: getRowKey\n  })));\n};\n\n/**\n * 🏆 Use Ant Design Table like a Pro! 更快 更好 更方便\n *\n * @param props\n */\nvar ProviderTableContainer = function ProviderTableContainer(props) {\n  var _useContext = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls;\n  var ErrorComponent = props.ErrorBoundary === false ? React.Fragment : props.ErrorBoundary || ErrorBoundary;\n  return /*#__PURE__*/_jsx(Container, {\n    initValue: props,\n    children: /*#__PURE__*/_jsx(ProConfigProvider, {\n      needDeps: true,\n      children: /*#__PURE__*/_jsx(ErrorComponent, {\n        children: /*#__PURE__*/_jsx(ProTable, _objectSpread({\n          defaultClassName: \"\".concat(getPrefixCls('pro-table'))\n        }, props))\n      })\n    })\n  });\n};\nProviderTableContainer.Summary = Table.Summary;\nexport default ProviderTableContainer;","map":{"version":3,"names":["_regeneratorRuntime","_asyncToGenerator","_typeof","_slicedToArray","_defineProperty","_toConsumableArray","_objectSpread","_objectWithoutProperties","_excluded","_excluded2","ProCard","ProForm","GridContext","ProConfigProvider","proTheme","useIntl","ErrorBoundary","editableRowByKey","omitUndefined","recordKeyToString","stringify","useDeepCompareEffect","useDeepCompareEffectDebounce","useEditableArray","useMountMergeState","ConfigProvider","Table","classNames","isEmpty","isEqual","React","useCallback","useContext","useEffect","useImperativeHandle","useMemo","useRef","Container","TableContext","Alert","FormRender","Toolbar","useStyle","useFetchData","genColumnKey","isBordered","mergePagination","parseDefaultColumnConfig","useActionType","columnSort","genProColumnToColumn","jsx","_jsx","createElement","_createElement","Fragment","_Fragment","jsxs","_jsxs","TableRender","props","rowKey","tableClassName","defaultClassName","action","tableColumns","tableColumn","type","pagination","rowSelection","size","defaultSize","tableStyle","toolbarDom","hideToolbar","searchNode","style","propsCardProps","cardProps","alertDom","name","onSortChange","onFilterChange","options","isLightFilter","className","cardBordered","editableUtils","getRowKey","rest","counter","columns","loopFilter","column","map","item","columnKey","key","index","config","columnsMap","show","children","filter","Boolean","useLocaleFilter","_columns","loopColumns","data","i","length","_curItem","push","every","filters","onFilter","undefined","editableDataSource","dataSource","_ref","newLineRecord","newLineOptions","row","defaultValue","isNewLineRecordAtTop","position","parentKey","_recordKeyToString","_props$expandable","actionProps","map_row_parentKey","toString","recordKey","childrenColumnName","expandable","concat","current","pageSize","newDataSource","splice","getTableProps","isExtraColumns","extraColumn","loading","onChange","changePagination","sorter","extra","_rest$onChange","call","Array","isArray","reduce","pre","value","field","order","_sorter$column","sorterOfColumn","isSortByField","notNeedCardDom","search","headerTitle","toolBarRender","baseTableDom","Provider","grid","colProps","rowProps","tableDom","tableViewRender","tableContentDom","editable","_props$editable","_props$editable2","_props$editable3","formProps","formRef","component","form","onValuesChange","submitter","omitNil","dateFormatter","cardBodyStyle","padding","paddingBlockStart","tableAreaDom","ghost","bordered","bodyStyle","renderTable","tableRender","toolbar","alert","table","proTableDom","pollingLoading","ref","rootDomRef","tableExtraRender","fullScreen","getPopupContainer","document","body","emptyObj","ProTable","_props$expandable2","request","propsClassName","_props$params","params","defaultData","postData","propsPagination","propsActionRef","actionRef","_props$columns","propsColumns","optionsRender","onLoad","onRequestError","columnsStateMap","onColumnsStateChange","isEditorTable","onLoadingChange","_props$rowSelection","propsRowSelection","beforeSearchSubmit","tableAlertRender","propRef","_props$type","_props$columnEmptyTex","columnEmptyText","manualRequest","polling","tooltip","_props$revalidateOnFo","revalidateOnFocus","searchFormRender","_useStyle","wrapSSR","hashId","defaultFormRef","_useMountMergeState","defaultSelectedRowKeys","selectedRowKeys","_useMountMergeState2","setSelectedRowKeys","_useMountMergeState3","_useMountMergeState4","formSearch","setFormSearch","_useMountMergeState5","_useMountMergeState6","proFilter","setProFilter","_useMountMergeState7","_useMountMergeState8","proSort","setProSort","_parseDefaultColumnCo","sort","intl","fetchPagination","defaultCurrent","defaultPageSize","fetchData","_ref2","mark","_callee","pageParams","actionParams","response","wrap","_callee$","_context","prev","next","_timestamp","sent","abrupt","stop","_x","apply","arguments","pageInfo","onDataSourceChange","manual","effects","debounceTime","onPageInfoChange","_propsPagination$onCh","_propsPagination$onSh","onShowSizeChange","_props$form","ignoreRules","visibilitychange","visibilityState","reload","addEventListener","removeEventListener","preserveRecordsRef","Map","record","_ref3","_action$dataSource","keys","dataRowKey","set","newPropsPagination","pageConfig","setPageInfo","_ref4","setDataSource","_action$pageInfo","setPrefixName","_onCleanSelected","propsRef","tableName","_props$editable4","_props$editable4$onVa","_proTheme$useToken","useToken","token","_counter$rootDomRef","fullscreenEnabled","fullscreenElement","exitFullscreen","_counter$rootDomRef2","requestFullscreen","onCleanSelected","resetAll","_formRef$current","setKeyWords","resetFields","setAction","_props$expandable3","marginSM","sortKeyColumns","editableKeys","join","columnKeys","setSortKeyColumns","_ref5","_ref5$current","_ref5$pageSize","rows","info","filterType","_onFormSearchSubmit","values","_options$search","_options$search$onSea","_ref6","_ref6$name","success","onSearch","keyWords","_action$loading","spinning","node","onFormSearchSubmit","onReset","onSubmit","selectedRows","_preserveRecordsRef$c","get","newValues","alertOptionRender","tableAlertOptionRender","alertInfoRender","alwaysShowAlert","tableSize","onSizeChange","setTableSize","sortConfig","filterConfig","ProviderTableContainer","_useContext","ConfigContext","getPrefixCls","ErrorComponent","initValue","needDeps","Summary"],"sources":["/Users/phanluc/admin-web-fe/node_modules/@ant-design/pro-table/es/Table.js"],"sourcesContent":["import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"rowKey\", \"tableClassName\", \"defaultClassName\", \"action\", \"tableColumn\", \"type\", \"pagination\", \"rowSelection\", \"size\", \"defaultSize\", \"tableStyle\", \"toolbarDom\", \"hideToolbar\", \"searchNode\", \"style\", \"cardProps\", \"alertDom\", \"name\", \"onSortChange\", \"onFilterChange\", \"options\", \"isLightFilter\", \"className\", \"cardBordered\", \"editableUtils\", \"getRowKey\"],\n  _excluded2 = [\"cardBordered\", \"request\", \"className\", \"params\", \"defaultData\", \"headerTitle\", \"postData\", \"ghost\", \"pagination\", \"actionRef\", \"columns\", \"toolBarRender\", \"optionsRender\", \"onLoad\", \"onRequestError\", \"style\", \"cardProps\", \"tableStyle\", \"tableClassName\", \"columnsStateMap\", \"onColumnsStateChange\", \"options\", \"search\", \"name\", \"onLoadingChange\", \"rowSelection\", \"beforeSearchSubmit\", \"tableAlertRender\", \"defaultClassName\", \"formRef\", \"type\", \"columnEmptyText\", \"toolbar\", \"rowKey\", \"manualRequest\", \"polling\", \"tooltip\", \"revalidateOnFocus\", \"searchFormRender\"];\n// 兼容代码-----------\nimport \"antd/es/table/style\";\nimport \"antd/es/typography/style\";\n//----------------------\n\nimport ProCard from '@ant-design/pro-card';\nimport ProForm, { GridContext } from '@ant-design/pro-form';\nimport { ProConfigProvider, proTheme, useIntl } from '@ant-design/pro-provider';\nimport { ErrorBoundary, editableRowByKey, omitUndefined, recordKeyToString, stringify, useDeepCompareEffect, useDeepCompareEffectDebounce, useEditableArray, useMountMergeState } from '@ant-design/pro-utils';\nimport { ConfigProvider, Table } from 'antd';\nimport classNames from 'classnames';\nimport isEmpty from 'lodash-es/isEmpty';\nimport isEqual from 'lodash-es/isEqual';\nimport React, { useCallback, useContext, useEffect, useImperativeHandle, useMemo, useRef } from 'react';\nimport { Container, TableContext } from \"./Store/Provide\";\nimport Alert from \"./components/Alert\";\nimport FormRender from \"./components/Form\";\nimport Toolbar from \"./components/ToolBar\";\nimport { useStyle } from \"./style\";\nimport useFetchData from \"./useFetchData\";\nimport { genColumnKey, isBordered, mergePagination, parseDefaultColumnConfig, useActionType } from \"./utils\";\nimport { columnSort } from \"./utils/columnSort\";\nimport { genProColumnToColumn } from \"./utils/genProColumnToColumn\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createElement as _createElement } from \"react\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction TableRender(props) {\n  var rowKey = props.rowKey,\n    tableClassName = props.tableClassName,\n    defaultClassName = props.defaultClassName,\n    action = props.action,\n    tableColumns = props.tableColumn,\n    type = props.type,\n    pagination = props.pagination,\n    rowSelection = props.rowSelection,\n    size = props.size,\n    defaultSize = props.defaultSize,\n    tableStyle = props.tableStyle,\n    toolbarDom = props.toolbarDom,\n    hideToolbar = props.hideToolbar,\n    searchNode = props.searchNode,\n    style = props.style,\n    propsCardProps = props.cardProps,\n    alertDom = props.alertDom,\n    name = props.name,\n    onSortChange = props.onSortChange,\n    onFilterChange = props.onFilterChange,\n    options = props.options,\n    isLightFilter = props.isLightFilter,\n    className = props.className,\n    cardBordered = props.cardBordered,\n    editableUtils = props.editableUtils,\n    getRowKey = props.getRowKey,\n    rest = _objectWithoutProperties(props, _excluded);\n  var counter = useContext(TableContext);\n\n  /** 需要遍历一下，不然不支持嵌套表格 */\n  var columns = useMemo(function () {\n    var loopFilter = function loopFilter(column) {\n      return column.map(function (item) {\n        // 删掉不应该显示的\n        var columnKey = genColumnKey(item.key, item.index);\n        var config = counter.columnsMap[columnKey];\n        if (config && config.show === false) {\n          return false;\n        }\n        if (item.children) {\n          return _objectSpread(_objectSpread({}, item), {}, {\n            children: loopFilter(item.children)\n          });\n        }\n        return item;\n      }).filter(Boolean);\n    };\n    return loopFilter(tableColumns);\n  }, [counter.columnsMap, tableColumns]);\n\n  /** 如果所有列中的 filters = true | undefined 说明是用的是本地筛选 任何一列配置 filters=false，就能绕过这个判断 */\n  var useLocaleFilter = useMemo(function () {\n    var _columns = [];\n    // 平铺所有columns, 用于判断是用的是本地筛选\n    var loopColumns = function loopColumns(data) {\n      for (var i = 0; i < data.length; i++) {\n        var _curItem = data[i];\n        if (_curItem.children) {\n          loopColumns(_curItem.children);\n        } else {\n          _columns.push(_curItem);\n        }\n      }\n    };\n    loopColumns(columns);\n    return _columns === null || _columns === void 0 ? void 0 : _columns.every(function (column) {\n      return !!column.filters && !!column.onFilter || column.filters === undefined && column.onFilter === undefined;\n    });\n  }, [columns]);\n\n  /**\n   * 如果是分页的新增，总是加到最后一行\n   *\n   * @returns\n   */\n  var editableDataSource = function editableDataSource(dataSource) {\n    var _ref = editableUtils.newLineRecord || {},\n      newLineOptions = _ref.options,\n      row = _ref.defaultValue;\n    var isNewLineRecordAtTop = (newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.position) === 'top';\n    if (newLineOptions !== null && newLineOptions !== void 0 && newLineOptions.parentKey) {\n      var _recordKeyToString, _props$expandable;\n      var actionProps = {\n        data: dataSource,\n        getRowKey: getRowKey,\n        row: _objectSpread(_objectSpread({}, row), {}, {\n          map_row_parentKey: (_recordKeyToString = recordKeyToString(newLineOptions.parentKey)) === null || _recordKeyToString === void 0 ? void 0 : _recordKeyToString.toString()\n        }),\n        key: newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.recordKey,\n        childrenColumnName: ((_props$expandable = props.expandable) === null || _props$expandable === void 0 ? void 0 : _props$expandable.childrenColumnName) || 'children'\n      };\n      return editableRowByKey(actionProps, isNewLineRecordAtTop ? 'top' : 'update');\n    }\n    if (isNewLineRecordAtTop) {\n      return [row].concat(_toConsumableArray(action.dataSource));\n    }\n    // 如果有分页的功能，我们加到这一页的末尾\n    if (pagination && pagination !== null && pagination !== void 0 && pagination.current && pagination !== null && pagination !== void 0 && pagination.pageSize) {\n      var newDataSource = _toConsumableArray(action.dataSource);\n      if ((pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) > newDataSource.length) {\n        newDataSource.push(row);\n        return newDataSource;\n      }\n      newDataSource.splice((pagination === null || pagination === void 0 ? void 0 : pagination.current) * (pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) - 1, 0, row);\n      return newDataSource;\n    }\n    return [].concat(_toConsumableArray(action.dataSource), [row]);\n  };\n  var getTableProps = function getTableProps() {\n    return _objectSpread(_objectSpread({}, rest), {}, {\n      size: size,\n      rowSelection: rowSelection === false ? undefined : rowSelection,\n      className: tableClassName,\n      style: tableStyle,\n      columns: columns.map(function (item) {\n        return item.isExtraColumns ? item.extraColumn : item;\n      }),\n      loading: action.loading,\n      dataSource: editableUtils.newLineRecord ? editableDataSource(action.dataSource) : action.dataSource,\n      pagination: pagination,\n      onChange: function onChange(changePagination, filters, sorter, extra) {\n        var _rest$onChange;\n        (_rest$onChange = rest.onChange) === null || _rest$onChange === void 0 || _rest$onChange.call(rest, changePagination, filters, sorter, extra);\n        if (!useLocaleFilter) {\n          onFilterChange(omitUndefined(filters));\n        }\n\n        // 制造筛选的数据\n        // 制造一个排序的数据\n        if (Array.isArray(sorter)) {\n          var data = sorter.reduce(function (pre, value) {\n            return _objectSpread(_objectSpread({}, pre), {}, _defineProperty({}, \"\".concat(value.field), value.order));\n          }, {});\n          onSortChange(omitUndefined(data));\n        } else {\n          var _sorter$column;\n          var sorterOfColumn = (_sorter$column = sorter.column) === null || _sorter$column === void 0 ? void 0 : _sorter$column.sorter;\n          var isSortByField = (sorterOfColumn === null || sorterOfColumn === void 0 ? void 0 : sorterOfColumn.toString()) === sorterOfColumn;\n          onSortChange(omitUndefined(_defineProperty({}, \"\".concat(isSortByField ? sorterOfColumn : sorter.field), sorter.order)));\n        }\n      }\n    });\n  };\n\n  /**\n   * 是否需要 card 来包裹\n   */\n  var notNeedCardDom = useMemo(function () {\n    if (props.search === false && !props.headerTitle && props.toolBarRender === false) {\n      return true;\n    }\n    return false;\n  }, []);\n\n  /** 默认的 table dom，如果是编辑模式，外面还要包个 form */\n  var baseTableDom = /*#__PURE__*/_jsx(GridContext.Provider, {\n    value: {\n      grid: false,\n      colProps: undefined,\n      rowProps: undefined\n    },\n    children: /*#__PURE__*/_jsx(Table, _objectSpread(_objectSpread({}, getTableProps()), {}, {\n      rowKey: rowKey\n    }))\n  });\n\n  /** 自定义的 render */\n  var tableDom = props.tableViewRender ? props.tableViewRender(_objectSpread(_objectSpread({}, getTableProps()), {}, {\n    rowSelection: rowSelection !== false ? rowSelection : undefined\n  }), baseTableDom) : baseTableDom;\n\n  /**\n   * 这段代码使用了 useMemo 进行了性能优化，根据 props.editable 和 props.name 的不同情况，渲染不同的页面组件。\n   * 当 props.editable 为 true 并且 props.name 不存在时，渲染一个带有表单和工具栏的页面组件，否则只渲染工具栏和表格组件。\n   * renderContent 函数会在 alertDom、props.loading、props.editable、tableDom、toolbarDom 发生变化时重新执行。\n   * */\n  var tableContentDom = useMemo(function () {\n    if (props.editable && !props.name) {\n      var _props$editable, _props$editable2, _props$editable3;\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [toolbarDom, alertDom, /*#__PURE__*/_createElement(ProForm, _objectSpread(_objectSpread({}, (_props$editable = props.editable) === null || _props$editable === void 0 ? void 0 : _props$editable.formProps), {}, {\n          formRef: (_props$editable2 = props.editable) === null || _props$editable2 === void 0 || (_props$editable2 = _props$editable2.formProps) === null || _props$editable2 === void 0 ? void 0 : _props$editable2.formRef,\n          component: false,\n          form: (_props$editable3 = props.editable) === null || _props$editable3 === void 0 ? void 0 : _props$editable3.form,\n          onValuesChange: editableUtils.onValuesChange,\n          key: \"table\",\n          submitter: false,\n          omitNil: false,\n          dateFormatter: props.dateFormatter\n        }), tableDom)]\n      });\n    }\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [toolbarDom, alertDom, tableDom]\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [alertDom, props.loading, !!props.editable, tableDom, toolbarDom]);\n  var cardBodyStyle = useMemo(function () {\n    if (propsCardProps === false || notNeedCardDom === true || !!props.name) return {};\n    if (hideToolbar) {\n      return {\n        padding: 0\n      };\n    }\n    if (toolbarDom) {\n      return {\n        paddingBlockStart: 0\n      };\n    }\n    if (toolbarDom && pagination === false) {\n      return {\n        paddingBlockStart: 0\n      };\n    }\n    // if (!toolbarDom)\n    return {\n      padding: 0\n    };\n  }, [notNeedCardDom, pagination, props.name, propsCardProps, toolbarDom, hideToolbar]);\n\n  /** Table 区域的 dom，为了方便 render */\n  var tableAreaDom =\n  // cardProps 或者 有了name 就不需要这个padding了，不然会导致不好对齐\n  propsCardProps === false || notNeedCardDom === true || !!props.name ? tableContentDom : /*#__PURE__*/_jsx(ProCard, _objectSpread(_objectSpread({\n    ghost: props.ghost,\n    bordered: isBordered('table', cardBordered),\n    bodyStyle: cardBodyStyle\n  }, propsCardProps), {}, {\n    children: tableContentDom\n  }));\n  var renderTable = function renderTable() {\n    if (props.tableRender) {\n      return props.tableRender(props, tableAreaDom, {\n        toolbar: toolbarDom || undefined,\n        alert: alertDom || undefined,\n        table: tableDom || undefined\n      });\n    }\n    return tableAreaDom;\n  };\n  var proTableDom = /*#__PURE__*/_jsxs(\"div\", {\n    className: classNames(className, _defineProperty({}, \"\".concat(defaultClassName, \"-polling\"), action.pollingLoading)),\n    style: style,\n    ref: counter.rootDomRef,\n    children: [isLightFilter ? null : searchNode, type !== 'form' && props.tableExtraRender && /*#__PURE__*/_jsx(\"div\", {\n      className: classNames(className, \"\".concat(defaultClassName, \"-extra\")),\n      children: props.tableExtraRender(props, action.dataSource || [])\n    }), type !== 'form' && renderTable()]\n  });\n\n  // 如果不需要的全屏，ConfigProvider 没有意义\n  if (!options || !(options !== null && options !== void 0 && options.fullScreen)) {\n    return proTableDom;\n  }\n  return /*#__PURE__*/_jsx(ConfigProvider, {\n    getPopupContainer: function getPopupContainer() {\n      return counter.rootDomRef.current || document.body;\n    },\n    children: proTableDom\n  });\n}\nvar emptyObj = {};\nvar ProTable = function ProTable(props) {\n  var _props$expandable2;\n  var cardBordered = props.cardBordered,\n    request = props.request,\n    propsClassName = props.className,\n    _props$params = props.params,\n    params = _props$params === void 0 ? emptyObj : _props$params,\n    defaultData = props.defaultData,\n    headerTitle = props.headerTitle,\n    postData = props.postData,\n    ghost = props.ghost,\n    propsPagination = props.pagination,\n    propsActionRef = props.actionRef,\n    _props$columns = props.columns,\n    propsColumns = _props$columns === void 0 ? [] : _props$columns,\n    toolBarRender = props.toolBarRender,\n    optionsRender = props.optionsRender,\n    onLoad = props.onLoad,\n    onRequestError = props.onRequestError,\n    style = props.style,\n    cardProps = props.cardProps,\n    tableStyle = props.tableStyle,\n    tableClassName = props.tableClassName,\n    columnsStateMap = props.columnsStateMap,\n    onColumnsStateChange = props.onColumnsStateChange,\n    options = props.options,\n    search = props.search,\n    isEditorTable = props.name,\n    onLoadingChange = props.onLoadingChange,\n    _props$rowSelection = props.rowSelection,\n    propsRowSelection = _props$rowSelection === void 0 ? false : _props$rowSelection,\n    beforeSearchSubmit = props.beforeSearchSubmit,\n    tableAlertRender = props.tableAlertRender,\n    defaultClassName = props.defaultClassName,\n    propRef = props.formRef,\n    _props$type = props.type,\n    type = _props$type === void 0 ? 'table' : _props$type,\n    _props$columnEmptyTex = props.columnEmptyText,\n    columnEmptyText = _props$columnEmptyTex === void 0 ? '-' : _props$columnEmptyTex,\n    toolbar = props.toolbar,\n    rowKey = props.rowKey,\n    manualRequest = props.manualRequest,\n    polling = props.polling,\n    tooltip = props.tooltip,\n    _props$revalidateOnFo = props.revalidateOnFocus,\n    revalidateOnFocus = _props$revalidateOnFo === void 0 ? false : _props$revalidateOnFo,\n    searchFormRender = props.searchFormRender,\n    rest = _objectWithoutProperties(props, _excluded2);\n  var _useStyle = useStyle(props.defaultClassName),\n    wrapSSR = _useStyle.wrapSSR,\n    hashId = _useStyle.hashId;\n  var className = classNames(defaultClassName, propsClassName, hashId);\n\n  /** 通用的来操作子节点的工具类 */\n  var actionRef = useRef();\n  var defaultFormRef = useRef();\n  var formRef = propRef || defaultFormRef;\n  useImperativeHandle(propsActionRef, function () {\n    return actionRef.current;\n  });\n\n  /** 单选多选的相关逻辑 */\n  var _useMountMergeState = useMountMergeState(propsRowSelection ? (propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.defaultSelectedRowKeys) || [] : undefined, {\n      value: propsRowSelection ? propsRowSelection.selectedRowKeys : undefined\n    }),\n    _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n    selectedRowKeys = _useMountMergeState2[0],\n    setSelectedRowKeys = _useMountMergeState2[1];\n  var _useMountMergeState3 = useMountMergeState(function () {\n      // 如果手动模式，或者 search 不存在的时候设置为 undefined\n      // undefined 就不会触发首次加载\n      if (manualRequest || search !== false) {\n        return undefined;\n      }\n      return {};\n    }),\n    _useMountMergeState4 = _slicedToArray(_useMountMergeState3, 2),\n    formSearch = _useMountMergeState4[0],\n    setFormSearch = _useMountMergeState4[1];\n  var _useMountMergeState5 = useMountMergeState({}),\n    _useMountMergeState6 = _slicedToArray(_useMountMergeState5, 2),\n    proFilter = _useMountMergeState6[0],\n    setProFilter = _useMountMergeState6[1];\n  var _useMountMergeState7 = useMountMergeState({}),\n    _useMountMergeState8 = _slicedToArray(_useMountMergeState7, 2),\n    proSort = _useMountMergeState8[0],\n    setProSort = _useMountMergeState8[1];\n\n  /** 设置默认排序和筛选值 */\n  useEffect(function () {\n    var _parseDefaultColumnCo = parseDefaultColumnConfig(propsColumns),\n      sort = _parseDefaultColumnCo.sort,\n      filter = _parseDefaultColumnCo.filter;\n    setProFilter(filter);\n    setProSort(sort);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var intl = useIntl();\n\n  /** 需要初始化 不然默认可能报错 这里取了 defaultCurrent 和 current 为了保证不会重复刷新 */\n  var fetchPagination = _typeof(propsPagination) === 'object' ? propsPagination : {\n    defaultCurrent: 1,\n    defaultPageSize: 20,\n    pageSize: 20,\n    current: 1\n  };\n  var counter = useContext(TableContext);\n\n  // ============================ useFetchData ============================\n  var fetchData = useMemo(function () {\n    if (!request) return undefined;\n    return /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(pageParams) {\n        var actionParams, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              actionParams = _objectSpread(_objectSpread(_objectSpread({}, pageParams || {}), formSearch), params); // eslint-disable-next-line no-underscore-dangle\n              delete actionParams._timestamp;\n              _context.next = 4;\n              return request(actionParams, proSort, proFilter);\n            case 4:\n              response = _context.sent;\n              return _context.abrupt(\"return\", response);\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  }, [formSearch, params, proFilter, proSort, request]);\n  var action = useFetchData(fetchData, defaultData, {\n    pageInfo: propsPagination === false ? false : fetchPagination,\n    loading: props.loading,\n    dataSource: props.dataSource,\n    onDataSourceChange: props.onDataSourceChange,\n    onLoad: onLoad,\n    onLoadingChange: onLoadingChange,\n    onRequestError: onRequestError,\n    postData: postData,\n    revalidateOnFocus: revalidateOnFocus,\n    manual: formSearch === undefined,\n    polling: polling,\n    effects: [stringify(params), stringify(formSearch), stringify(proFilter), stringify(proSort)],\n    debounceTime: props.debounceTime,\n    onPageInfoChange: function onPageInfoChange(pageInfo) {\n      var _propsPagination$onCh, _propsPagination$onSh;\n      if (!propsPagination || !fetchData) return;\n\n      // 总是触发一下 onChange 和  onShowSizeChange\n      // 目前只有 List 和 Table 支持分页, List 有分页的时候打断 Table 的分页\n      propsPagination === null || propsPagination === void 0 || (_propsPagination$onCh = propsPagination.onChange) === null || _propsPagination$onCh === void 0 || _propsPagination$onCh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n      propsPagination === null || propsPagination === void 0 || (_propsPagination$onSh = propsPagination.onShowSizeChange) === null || _propsPagination$onSh === void 0 || _propsPagination$onSh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n    }\n  });\n  // ============================ END ============================\n\n  /** 聚焦的时候重新请求数据，这样可以保证数据都是最新的。 */\n  useEffect(function () {\n    var _props$form;\n    // 手动模式和 request 为空都不生效\n    if (props.manualRequest || !props.request || !revalidateOnFocus || (_props$form = props.form) !== null && _props$form !== void 0 && _props$form.ignoreRules) return;\n\n    // 聚焦时重新请求事件\n    var visibilitychange = function visibilitychange() {\n      if (document.visibilityState === 'visible') {\n        action.reload();\n      }\n    };\n    document.addEventListener('visibilitychange', visibilitychange);\n    return function () {\n      return document.removeEventListener('visibilitychange', visibilitychange);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /** SelectedRowKeys受控处理selectRows */\n  var preserveRecordsRef = React.useRef(new Map());\n\n  // ============================ RowKey ============================\n  var getRowKey = React.useMemo(function () {\n    if (typeof rowKey === 'function') {\n      return rowKey;\n    }\n    return function (record, index) {\n      var _ref3;\n      if (index === -1) {\n        return record === null || record === void 0 ? void 0 : record[rowKey];\n      }\n      // 如果 props 中有name 的话，用index 来做行号，这样方便转化为 index\n      if (props.name) {\n        return index === null || index === void 0 ? void 0 : index.toString();\n      }\n      return (_ref3 = record === null || record === void 0 ? void 0 : record[rowKey]) !== null && _ref3 !== void 0 ? _ref3 : index === null || index === void 0 ? void 0 : index.toString();\n    };\n  }, [props.name, rowKey]);\n  useMemo(function () {\n    var _action$dataSource;\n    if ((_action$dataSource = action.dataSource) !== null && _action$dataSource !== void 0 && _action$dataSource.length) {\n      var keys = action.dataSource.map(function (data) {\n        var dataRowKey = getRowKey(data, -1);\n        preserveRecordsRef.current.set(dataRowKey, data);\n        return dataRowKey;\n      });\n      return keys;\n    }\n    return [];\n  }, [action.dataSource, getRowKey]);\n\n  /** 页面编辑的计算 */\n  var pagination = useMemo(function () {\n    var newPropsPagination = propsPagination === false ? false : _objectSpread({}, propsPagination);\n    var pageConfig = _objectSpread(_objectSpread({}, action.pageInfo), {}, {\n      setPageInfo: function setPageInfo(_ref4) {\n        var pageSize = _ref4.pageSize,\n          current = _ref4.current;\n        var pageInfo = action.pageInfo;\n\n        // pageSize 发生改变，并且你不是在第一页，切回到第一页\n        // 这样可以防止出现 跳转到一个空的数据页的问题\n        if (pageSize === pageInfo.pageSize || pageInfo.current === 1) {\n          action.setPageInfo({\n            pageSize: pageSize,\n            current: current\n          });\n          return;\n        }\n\n        // 通过request的时候清空数据，然后刷新不然可能会导致 pageSize 没有数据多\n        if (request) action.setDataSource([]);\n        action.setPageInfo({\n          pageSize: pageSize,\n          // 目前只有 List 和 Table 支持分页, List 有分页的时候 还是使用之前的当前页码\n          current: type === 'list' ? current : 1\n        });\n      }\n    });\n    if (request && newPropsPagination) {\n      delete newPropsPagination.onChange;\n      delete newPropsPagination.onShowSizeChange;\n    }\n    return mergePagination(newPropsPagination, pageConfig, intl);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsPagination, action, intl]);\n  useDeepCompareEffect(function () {\n    var _action$pageInfo;\n    // request 存在且params不为空，且已经请求过数据才需要设置。\n    if (props.request && !isEmpty(params) && action.dataSource && !isEqual(action.dataSource, defaultData) && (action === null || action === void 0 || (_action$pageInfo = action.pageInfo) === null || _action$pageInfo === void 0 ? void 0 : _action$pageInfo.current) !== 1) {\n      action.setPageInfo({\n        current: 1\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [params]);\n\n  // 设置 name 到 store 中，里面用了 ref ，所以不用担心直接 set\n  counter.setPrefixName(props.name);\n\n  /** 清空所有的选中项 */\n  var _onCleanSelected = useCallback(function () {\n    if (propsRowSelection && propsRowSelection.onChange) {\n      propsRowSelection.onChange([], [], {\n        type: 'none'\n      });\n    }\n    setSelectedRowKeys([]);\n  }, [propsRowSelection, setSelectedRowKeys]);\n  counter.propsRef.current = props;\n\n  /** 可编辑行的相关配置 */\n  var editableUtils = useEditableArray(_objectSpread(_objectSpread({}, props.editable), {}, {\n    tableName: props.name,\n    getRowKey: getRowKey,\n    childrenColumnName: ((_props$expandable2 = props.expandable) === null || _props$expandable2 === void 0 ? void 0 : _props$expandable2.childrenColumnName) || 'children',\n    dataSource: action.dataSource || [],\n    setDataSource: function setDataSource(data) {\n      var _props$editable4, _props$editable4$onVa;\n      (_props$editable4 = props.editable) === null || _props$editable4 === void 0 || (_props$editable4$onVa = _props$editable4.onValuesChange) === null || _props$editable4$onVa === void 0 || _props$editable4$onVa.call(_props$editable4, undefined, data);\n      action.setDataSource(data);\n    }\n  }));\n\n  // ============================ Render ============================\n  var _proTheme$useToken = proTheme === null || proTheme === void 0 ? void 0 : proTheme.useToken(),\n    token = _proTheme$useToken.token;\n\n  /** 绑定 action */\n  useActionType(actionRef, action, {\n    fullScreen: function fullScreen() {\n      var _counter$rootDomRef;\n      if (!((_counter$rootDomRef = counter.rootDomRef) !== null && _counter$rootDomRef !== void 0 && _counter$rootDomRef.current) || !document.fullscreenEnabled) {\n        return;\n      }\n      if (document.fullscreenElement) {\n        document.exitFullscreen();\n      } else {\n        var _counter$rootDomRef2;\n        (_counter$rootDomRef2 = counter.rootDomRef) === null || _counter$rootDomRef2 === void 0 || _counter$rootDomRef2.current.requestFullscreen();\n      }\n    },\n    onCleanSelected: function onCleanSelected() {\n      // 清空选中行\n      _onCleanSelected();\n    },\n    resetAll: function resetAll() {\n      var _formRef$current;\n      // 清空选中行\n      _onCleanSelected();\n      // 清空筛选\n      setProFilter({});\n      // 清空排序\n      setProSort({});\n      // 清空 toolbar 搜索\n      counter.setKeyWords(undefined);\n      // 重置页码\n      action.setPageInfo({\n        current: 1\n      });\n\n      // 重置表单\n      formRef === null || formRef === void 0 || (_formRef$current = formRef.current) === null || _formRef$current === void 0 || _formRef$current.resetFields();\n      setFormSearch({});\n    },\n    editableUtils: editableUtils\n  });\n\n  /** 同步 action */\n  counter.setAction(actionRef.current);\n\n  // ---------- 列计算相关 start  -----------------\n  var tableColumn = useMemo(function () {\n    var _props$expandable3;\n    return genProColumnToColumn({\n      columns: propsColumns,\n      counter: counter,\n      columnEmptyText: columnEmptyText,\n      type: type,\n      marginSM: token.marginSM,\n      editableUtils: editableUtils,\n      rowKey: rowKey,\n      childrenColumnName: (_props$expandable3 = props.expandable) === null || _props$expandable3 === void 0 ? void 0 : _props$expandable3.childrenColumnName\n    }).sort(columnSort(counter.columnsMap));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsColumns, counter === null || counter === void 0 ? void 0 : counter.sortKeyColumns, counter === null || counter === void 0 ? void 0 : counter.columnsMap, columnEmptyText, type,\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  editableUtils.editableKeys && editableUtils.editableKeys.join(',')]);\n\n  /** Table Column 变化的时候更新一下，这个参数将会用于渲染 */\n  useDeepCompareEffectDebounce(function () {\n    if (tableColumn && tableColumn.length > 0) {\n      // 重新生成key的字符串用于排序\n      var columnKeys = tableColumn.map(function (item) {\n        return genColumnKey(item.key, item.index);\n      });\n      counter.setSortKeyColumns(columnKeys);\n    }\n  }, [tableColumn], ['render', 'renderFormItem'], 100);\n\n  /** 同步 Pagination，支持受控的 页码 和 pageSize */\n  useDeepCompareEffect(function () {\n    var pageInfo = action.pageInfo;\n    var _ref5 = propsPagination || {},\n      _ref5$current = _ref5.current,\n      current = _ref5$current === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current : _ref5$current,\n      _ref5$pageSize = _ref5.pageSize,\n      pageSize = _ref5$pageSize === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize : _ref5$pageSize;\n    if (propsPagination && (current || pageSize) && (pageSize !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize) || current !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current))) {\n      action.setPageInfo({\n        pageSize: pageSize || pageInfo.pageSize,\n        current: current || pageInfo.current\n      });\n    }\n  }, [propsPagination && propsPagination.pageSize, propsPagination && propsPagination.current]);\n\n  /** 行选择相关的问题 */\n  var rowSelection = _objectSpread(_objectSpread({\n    selectedRowKeys: selectedRowKeys\n  }, propsRowSelection), {}, {\n    onChange: function onChange(keys, rows, info) {\n      if (propsRowSelection && propsRowSelection.onChange) {\n        propsRowSelection.onChange(keys, rows, info);\n      }\n      setSelectedRowKeys(keys);\n    }\n  });\n\n  /** 是不是 LightFilter, LightFilter 有一些特殊的处理 */\n  var isLightFilter = search !== false && (search === null || search === void 0 ? void 0 : search.filterType) === 'light';\n  var _onFormSearchSubmit = useCallback(function (values) {\n    // 判断search.onSearch返回值决定是否更新formSearch\n    if (options && options.search) {\n      var _options$search, _options$search$onSea;\n      var _ref6 = options.search === true ? {} : options.search,\n        _ref6$name = _ref6.name,\n        name = _ref6$name === void 0 ? 'keyword' : _ref6$name;\n\n      /** 如果传入的 onSearch 返回值为 false，则不要把options.search.name对应的值set到formSearch */\n      var success = (_options$search = options.search) === null || _options$search === void 0 || (_options$search$onSea = _options$search.onSearch) === null || _options$search$onSea === void 0 ? void 0 : _options$search$onSea.call(_options$search, counter.keyWords);\n      if (success !== false) {\n        setFormSearch(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, counter.keyWords)));\n        return;\n      }\n    }\n    setFormSearch(values);\n  }, [counter.keyWords, options, setFormSearch]);\n  var loading = useMemo(function () {\n    if (_typeof(action.loading) === 'object') {\n      var _action$loading;\n      return ((_action$loading = action.loading) === null || _action$loading === void 0 ? void 0 : _action$loading.spinning) || false;\n    }\n    return action.loading;\n  }, [action.loading]);\n  var searchNode = useMemo(function () {\n    var node = search === false && type !== 'form' ? null : /*#__PURE__*/_jsx(FormRender, {\n      pagination: pagination,\n      beforeSearchSubmit: beforeSearchSubmit,\n      action: actionRef,\n      columns: propsColumns,\n      onFormSearchSubmit: function onFormSearchSubmit(values) {\n        _onFormSearchSubmit(values);\n      },\n      ghost: ghost,\n      onReset: props.onReset,\n      onSubmit: props.onSubmit,\n      loading: !!loading,\n      manualRequest: manualRequest,\n      search: search,\n      form: props.form,\n      formRef: formRef,\n      type: props.type || 'table',\n      cardBordered: props.cardBordered,\n      dateFormatter: props.dateFormatter\n    });\n    if (searchFormRender && node) {\n      return /*#__PURE__*/_jsx(_Fragment, {\n        children: searchFormRender(props, node)\n      });\n    } else {\n      return node;\n    }\n  }, [beforeSearchSubmit, formRef, ghost, loading, manualRequest, _onFormSearchSubmit, pagination, props, propsColumns, search, searchFormRender, type]);\n  var selectedRows = useMemo(function () {\n    return selectedRowKeys === null || selectedRowKeys === void 0 ? void 0 : selectedRowKeys.map(function (key) {\n      var _preserveRecordsRef$c;\n      return (_preserveRecordsRef$c = preserveRecordsRef.current) === null || _preserveRecordsRef$c === void 0 ? void 0 : _preserveRecordsRef$c.get(key);\n    });\n  }, [action.dataSource, selectedRowKeys]);\n  var hideToolbar = useMemo(function () {\n    return options === false && !headerTitle && !toolBarRender && !toolbar && !isLightFilter;\n  }, [options, headerTitle, toolBarRender, toolbar, isLightFilter]);\n\n  /** 内置的工具栏 */\n  var toolbarDom = toolBarRender === false ? null : /*#__PURE__*/_jsx(Toolbar, {\n    headerTitle: headerTitle,\n    hideToolbar: hideToolbar,\n    selectedRows: selectedRows,\n    selectedRowKeys: selectedRowKeys,\n    tableColumn: tableColumn,\n    tooltip: tooltip,\n    toolbar: toolbar,\n    onFormSearchSubmit: function onFormSearchSubmit(newValues) {\n      setFormSearch(_objectSpread(_objectSpread({}, formSearch), newValues));\n    },\n    searchNode: isLightFilter ? searchNode : null,\n    options: options,\n    optionsRender: optionsRender,\n    actionRef: actionRef,\n    toolBarRender: toolBarRender\n  });\n\n  /** 内置的多选操作栏 */\n  var alertDom = propsRowSelection !== false ? /*#__PURE__*/_jsx(Alert, {\n    selectedRowKeys: selectedRowKeys,\n    selectedRows: selectedRows,\n    onCleanSelected: _onCleanSelected,\n    alertOptionRender: rest.tableAlertOptionRender,\n    alertInfoRender: tableAlertRender,\n    alwaysShowAlert: propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.alwaysShowAlert\n  }) : null;\n  return wrapSSR( /*#__PURE__*/_jsx(TableRender, _objectSpread(_objectSpread({}, props), {}, {\n    name: isEditorTable,\n    defaultClassName: defaultClassName,\n    size: counter.tableSize,\n    onSizeChange: counter.setTableSize,\n    pagination: pagination,\n    searchNode: searchNode,\n    rowSelection: propsRowSelection !== false ? rowSelection : undefined,\n    className: className,\n    tableColumn: tableColumn,\n    isLightFilter: isLightFilter,\n    action: action,\n    alertDom: alertDom,\n    toolbarDom: toolbarDom,\n    hideToolbar: hideToolbar,\n    onSortChange: function onSortChange(sortConfig) {\n      if (proSort === sortConfig) return;\n      setProSort(sortConfig !== null && sortConfig !== void 0 ? sortConfig : {});\n    },\n    onFilterChange: function onFilterChange(filterConfig) {\n      if (filterConfig === proFilter) return;\n      setProFilter(filterConfig);\n    },\n    editableUtils: editableUtils,\n    getRowKey: getRowKey\n  })));\n};\n\n/**\n * 🏆 Use Ant Design Table like a Pro! 更快 更好 更方便\n *\n * @param props\n */\nvar ProviderTableContainer = function ProviderTableContainer(props) {\n  var _useContext = useContext(ConfigProvider.ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls;\n  var ErrorComponent = props.ErrorBoundary === false ? React.Fragment : props.ErrorBoundary || ErrorBoundary;\n  return /*#__PURE__*/_jsx(Container, {\n    initValue: props,\n    children: /*#__PURE__*/_jsx(ProConfigProvider, {\n      needDeps: true,\n      children: /*#__PURE__*/_jsx(ErrorComponent, {\n        children: /*#__PURE__*/_jsx(ProTable, _objectSpread({\n          defaultClassName: \"\".concat(getPrefixCls('pro-table'))\n        }, props))\n      })\n    })\n  });\n};\nProviderTableContainer.Summary = Table.Summary;\nexport default ProviderTableContainer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}