{"ast":null,"code":"var _jsxFileName = \"/Users/phanluc/admin-web-fe/src/pages/login/index.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext } from 'react';\nimport { Button, Form, Input } from 'antd';\nimport apiService from \"../../services/api\";\nimport { useNavigate } from 'react-router-dom';\nimport AuthContext from '../../contexts/AuthContext'; // Import AuthContext\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    setIsAuth,\n    setAuthorities\n  } = useContext(AuthContext); // Access setIsAuth and setAuthorities\n\n  // Handle the form submission\n  const onFinish = values => {\n    apiService.post('authenticate', {\n      ...values\n    }).then(res => {\n      // Store the token in local storage\n      localStorage.setItem(\"token\", res.id_token);\n\n      // Fetch user details after successful login\n      apiService.get('account').then(userRes => {\n        // Set authentication state in context\n        setIsAuth(true);\n        setAuthorities(userRes.authorities || []);\n\n        // Navigate to the home page\n        navigate('/home');\n      }).catch(err => {\n        // Handle any errors fetching user data\n        console.error(\"Failed to fetch user details\", err);\n      });\n    }).catch(err => {\n      // Handle login failure\n      console.error(\"Login failed\", err);\n    });\n  };\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    name: \"basic\",\n    labelCol: {\n      span: 8\n    },\n    wrapperCol: {\n      span: 16\n    },\n    style: {\n      maxWidth: 600\n    },\n    initialValues: {\n      remember: true\n    },\n    onFinish: onFinish,\n    onFinishFailed: onFinishFailed,\n    autoComplete: \"off\",\n    children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"Username\",\n      name: \"username\",\n      rules: [{\n        required: true,\n        message: 'Please input your username!'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"Password\",\n      name: \"password\",\n      rules: [{\n        required: true,\n        message: 'Please input your password!'\n      }, {\n        // Optional password validation (uncomment if needed)\n        // pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{3,}$/,\n        message: 'Password must be at least 8 characters long and include uppercase, lowercase, number, and special character!'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input.Password, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: null,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n};\n_s(Login, \"bT1ACANjBB8A4Dwj9m+IkRD6SoI=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useContext","Button","Form","Input","apiService","useNavigate","AuthContext","jsxDEV","_jsxDEV","Login","_s","navigate","setIsAuth","setAuthorities","onFinish","values","post","then","res","localStorage","setItem","id_token","get","userRes","authorities","catch","err","console","error","onFinishFailed","errorInfo","log","name","labelCol","span","wrapperCol","style","maxWidth","initialValues","remember","autoComplete","children","Item","label","rules","required","message","fileName","_jsxFileName","lineNumber","columnNumber","Password","type","htmlType","_c","$RefreshReg$"],"sources":["/Users/phanluc/admin-web-fe/src/pages/login/index.jsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport { Button, Form, Input } from 'antd';\nimport apiService from \"../../services/api\";\nimport { useNavigate } from 'react-router-dom';\nimport AuthContext from '../../contexts/AuthContext';  // Import AuthContext\n\nconst Login = () => {\n    const navigate = useNavigate();\n    const { setIsAuth, setAuthorities } = useContext(AuthContext);  // Access setIsAuth and setAuthorities\n\n    // Handle the form submission\n    const onFinish = (values) => {\n        apiService.post('authenticate', { ...values }).then((res) => {\n            // Store the token in local storage\n            localStorage.setItem(\"token\", res.id_token);\n\n            // Fetch user details after successful login\n            apiService.get('account').then((userRes) => {\n                // Set authentication state in context\n                setIsAuth(true);\n                setAuthorities(userRes.authorities || []);\n\n                // Navigate to the home page\n                navigate('/home');\n            }).catch((err) => {\n                // Handle any errors fetching user data\n                console.error(\"Failed to fetch user details\", err);\n            });\n        }).catch((err) => {\n            // Handle login failure\n            console.error(\"Login failed\", err);\n        });\n    };\n\n    const onFinishFailed = (errorInfo) => {\n        console.log('Failed:', errorInfo);\n    };\n\n    return (\n        <Form\n            name=\"basic\"\n            labelCol={{\n                span: 8,\n            }}\n            wrapperCol={{\n                span: 16,\n            }}\n            style={{\n                maxWidth: 600,\n            }}\n            initialValues={{\n                remember: true,\n            }}\n            onFinish={onFinish}\n            onFinishFailed={onFinishFailed}\n            autoComplete=\"off\"\n        >\n            <Form.Item\n                label=\"Username\"\n                name=\"username\"\n                rules={[\n                    {\n                        required: true,\n                        message: 'Please input your username!',\n                    },\n                ]}\n            >\n                <Input />\n            </Form.Item>\n\n            <Form.Item\n                label=\"Password\"\n                name=\"password\"\n                rules={[\n                    {\n                        required: true,\n                        message: 'Please input your password!',\n                    },\n                    {\n                        // Optional password validation (uncomment if needed)\n                        // pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{3,}$/,\n                        message: 'Password must be at least 8 characters long and include uppercase, lowercase, number, and special character!',\n                    },\n                ]}\n            >\n                <Input.Password />\n            </Form.Item>\n\n            <Form.Item label={null}>\n                <Button type=\"primary\" htmlType=\"submit\">\n                    Submit\n                </Button>\n            </Form.Item>\n        </Form>\n    );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}