{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useRef, useState } from 'react';\nimport useSWR from 'swr';\nvar testId = 0;\nexport function useFetchData(props) {\n  var abortRef = useRef(null);\n  /** Key 是用来缓存请求的，如果不在是有问题 */\n  var _useState = useState(function () {\n      if (props.proFieldKey) {\n        return props.proFieldKey.toString();\n      }\n      testId += 1;\n      return testId.toString();\n    }),\n    _useState2 = _slicedToArray(_useState, 1),\n    cacheKey = _useState2[0];\n  var proFieldKeyRef = useRef(cacheKey);\n  var fetchData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _abortRef$current, _props$request;\n      var abort, loadData;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            (_abortRef$current = abortRef.current) === null || _abortRef$current === void 0 || _abortRef$current.abort();\n            abort = new AbortController();\n            abortRef.current = abort;\n            _context.next = 5;\n            return Promise.race([(_props$request = props.request) === null || _props$request === void 0 ? void 0 : _props$request.call(props, props.params, props), new Promise(function (_, reject) {\n              var _abortRef$current2;\n              (_abortRef$current2 = abortRef.current) === null || _abortRef$current2 === void 0 || (_abortRef$current2 = _abortRef$current2.signal) === null || _abortRef$current2 === void 0 || _abortRef$current2.addEventListener('abort', function () {\n                reject(new Error('aborted'));\n              });\n            })]);\n          case 5:\n            loadData = _context.sent;\n            return _context.abrupt(\"return\", loadData);\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function fetchData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    return function () {\n      testId += 1;\n    };\n  }, []);\n  var _useSWR = useSWR([proFieldKeyRef.current, props.params], fetchData, {\n      revalidateOnFocus: false,\n      shouldRetryOnError: false,\n      revalidateOnReconnect: false\n    }),\n    data = _useSWR.data,\n    error = _useSWR.error;\n  return [data || error];\n}","map":{"version":3,"names":["_regeneratorRuntime","_asyncToGenerator","_slicedToArray","useEffect","useRef","useState","useSWR","testId","useFetchData","props","abortRef","_useState","proFieldKey","toString","_useState2","cacheKey","proFieldKeyRef","fetchData","_ref","mark","_callee","_abortRef$current","_props$request","abort","loadData","wrap","_callee$","_context","prev","next","current","AbortController","Promise","race","request","call","params","_","reject","_abortRef$current2","signal","addEventListener","Error","sent","abrupt","stop","apply","arguments","_useSWR","revalidateOnFocus","shouldRetryOnError","revalidateOnReconnect","data","error"],"sources":["/Users/phanluc/admin-web-fe/node_modules/@ant-design/pro-utils/es/hooks/useFetchData/index.js"],"sourcesContent":["import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useRef, useState } from 'react';\nimport useSWR from 'swr';\nvar testId = 0;\nexport function useFetchData(props) {\n  var abortRef = useRef(null);\n  /** Key 是用来缓存请求的，如果不在是有问题 */\n  var _useState = useState(function () {\n      if (props.proFieldKey) {\n        return props.proFieldKey.toString();\n      }\n      testId += 1;\n      return testId.toString();\n    }),\n    _useState2 = _slicedToArray(_useState, 1),\n    cacheKey = _useState2[0];\n  var proFieldKeyRef = useRef(cacheKey);\n  var fetchData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _abortRef$current, _props$request;\n      var abort, loadData;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            (_abortRef$current = abortRef.current) === null || _abortRef$current === void 0 || _abortRef$current.abort();\n            abort = new AbortController();\n            abortRef.current = abort;\n            _context.next = 5;\n            return Promise.race([(_props$request = props.request) === null || _props$request === void 0 ? void 0 : _props$request.call(props, props.params, props), new Promise(function (_, reject) {\n              var _abortRef$current2;\n              (_abortRef$current2 = abortRef.current) === null || _abortRef$current2 === void 0 || (_abortRef$current2 = _abortRef$current2.signal) === null || _abortRef$current2 === void 0 || _abortRef$current2.addEventListener('abort', function () {\n                reject(new Error('aborted'));\n              });\n            })]);\n          case 5:\n            loadData = _context.sent;\n            return _context.abrupt(\"return\", loadData);\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function fetchData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    return function () {\n      testId += 1;\n    };\n  }, []);\n  var _useSWR = useSWR([proFieldKeyRef.current, props.params], fetchData, {\n      revalidateOnFocus: false,\n      shouldRetryOnError: false,\n      revalidateOnReconnect: false\n    }),\n    data = _useSWR.data,\n    error = _useSWR.error;\n  return [data || error];\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}