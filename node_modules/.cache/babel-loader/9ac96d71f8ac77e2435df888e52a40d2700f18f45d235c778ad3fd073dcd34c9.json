{"ast":null,"code":"var _jsxFileName = \"/Users/phanluc/admin-web-fe/src/pages/login/index.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AuthContext from '../contexts/AuthContext';\nimport apiService from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const {\n    setIsAuth,\n    setAuthorities\n  } = useContext(AuthContext);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const handleLogin = values => {\n    apiService.post('authenticate', {\n      ...values\n    }).then(res => {\n      localStorage.setItem('token', res.id_token); // Store the token\n      apiService.get('account').then(userRes => {\n        setIsAuth(true);\n        setAuthorities(userRes.authorities); // Set user roles/permissions\n        navigate('/home'); // Redirect to the home page\n      });\n    }).catch(() => setError('Invalid login credentials'));\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleLogin,\n    children: error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 23\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 9\n  }, this);\n};\n_s(Login, \"KXKFIq8umwut6OnI8xUKez0dXnk=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useContext","useState","useNavigate","AuthContext","apiService","jsxDEV","_jsxDEV","Login","_s","setIsAuth","setAuthorities","error","setError","navigate","handleLogin","values","post","then","res","localStorage","setItem","id_token","get","userRes","authorities","catch","onSubmit","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/phanluc/admin-web-fe/src/pages/login/index.jsx"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AuthContext from '../contexts/AuthContext';\nimport apiService from '../services/api';\n\nconst Login = () => {\n    const { setIsAuth, setAuthorities } = useContext(AuthContext);\n    const [error, setError] = useState(null);\n    const navigate = useNavigate();\n\n    const handleLogin = (values) => {\n        apiService.post('authenticate', { ...values })\n            .then((res) => {\n                localStorage.setItem('token', res.id_token); // Store the token\n                apiService.get('account').then((userRes) => {\n                    setIsAuth(true);\n                    setAuthorities(userRes.authorities); // Set user roles/permissions\n                    navigate('/home'); // Redirect to the home page\n                });\n            })\n            .catch(() => setError('Invalid login credentials'));\n    };\n\n    return (\n        <form onSubmit={handleLogin}>\n            {/* Login form fields */}\n            {error && <p>{error}</p>}\n        </form>\n    );\n};\n\nexport default Login;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,WAAW,MAAM,yBAAyB;AACjD,OAAOC,UAAU,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzC,MAAMC,KAAK,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChB,MAAM;IAAEC,SAAS;IAAEC;EAAe,CAAC,GAAGV,UAAU,CAACG,WAAW,CAAC;EAC7D,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAMY,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9B,MAAMY,WAAW,GAAIC,MAAM,IAAK;IAC5BX,UAAU,CAACY,IAAI,CAAC,cAAc,EAAE;MAAE,GAAGD;IAAO,CAAC,CAAC,CACzCE,IAAI,CAAEC,GAAG,IAAK;MACXC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,GAAG,CAACG,QAAQ,CAAC,CAAC,CAAC;MAC7CjB,UAAU,CAACkB,GAAG,CAAC,SAAS,CAAC,CAACL,IAAI,CAAEM,OAAO,IAAK;QACxCd,SAAS,CAAC,IAAI,CAAC;QACfC,cAAc,CAACa,OAAO,CAACC,WAAW,CAAC,CAAC,CAAC;QACrCX,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;MACvB,CAAC,CAAC;IACN,CAAC,CAAC,CACDY,KAAK,CAAC,MAAMb,QAAQ,CAAC,2BAA2B,CAAC,CAAC;EAC3D,CAAC;EAED,oBACIN,OAAA;IAAMoB,QAAQ,EAAEZ,WAAY;IAAAa,QAAA,EAEvBhB,KAAK,iBAAIL,OAAA;MAAAqB,QAAA,EAAIhB;IAAK;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtB,CAAC;AAEf,CAAC;AAACvB,EAAA,CAxBID,KAAK;EAAA,QAGUL,WAAW;AAAA;AAAA8B,EAAA,GAH1BzB,KAAK;AA0BX,eAAeA,KAAK;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}